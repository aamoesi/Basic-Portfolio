/*
 jQuery-ajaxTransport-XDomainRequest - v1.0.3 - 2014-06-06
 https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest
 Copyright (c) 2014 Jason Moon (@JSONMOON)
 Licensed MIT (/blob/master/LICENSE.txt)
*/
var $jscomp={scope:{},findInternal:function(b,c,d){b instanceof String&&(b=String(b));for(var f=b.length,e=0;e<f;e++){var g=b[e];if(c.call(d,g,e,b))return{i:e,v:g}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,c,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[c]=d.value)};
$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,c,d,f){if(c){d=$jscomp.global;b=b.split(".");for(f=0;f<b.length-1;f++){var e=b[f];e in d||(d[e]={});d=d[e]}b=b[b.length-1];f=d[b];c=c(f);c!=f&&null!=c&&$jscomp.defineProperty(d,b,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,d){return $jscomp.findInternal(this,b,d).v}},"es6-impl","es3");
define("common/config",["lib/jquery","tools/dhgate.cookie"],function(b,c){var d=(!1===/https/i.test(location.protocol)?"http://":"https://")+location.hostname,f=d.match(/(es|pt|ru|fr|de|it|ca|in|uk|au|tr|nz|mx|cl|co|pe|hk|kr|ar|jp)\.dhgate.+/i)||(window._customHost?window._customHost:"en");/(A|a)ndroid/i.test(navigator.userAgent);var e=c.DHCookieUtil,f=$.isArray(f)?f[1]:f;window._gaq&&window.ga||(window._gaq={push:function(b){"_trackEvent"==b[0]&&gtag("event",b[2],{event_category:b[1],event_label:b[3]})}},
window.ga=function(){"event"==arguments[1]&&gtag("event",a[3],{event_category:a[2],event_label:a[4]})});return{getVisitorType:function(){var b=/(http|https):\/\/(.*)(google|yahoo|bing|aol|ask|search-results|yandex)\.(.+)/i,e=/(\?q=|\&q=|\?p=|&p=|\?text=|&text=)([^&]+)/,c=/bm|([^\|]+\|){5}([^\|]+)\|.*/,f=document.referrer+document.location.href,d={_f:"",keywords:"",_ref:""},f=f.replace(/%7c/gi,"|");/\?f=bm/.test(f)?(d._f="PPC",c.test(f)&&(d.keywords=RegExp.$3)):b.test(f)&&(d._f="SEO",e.test(f)&&(d.keywords=
RegExp.$3));/(http|https):\/\/([^\/]+).*/i.test(document.referrer)&&(b=RegExp.$2,/dhgate\.com/i.test(b)||(d._ref=b));return d},isLocalStorageNameSupported:function(){try{return localStorageName in win&&win[localStorageName]}catch(g){return!1}},wwwURL:d,WWWHostName:location.hostname,wwwPATHNAME:location.pathname,wwwHASH:location.hash,hostWrite:"//dg.dhgate.com",hostRead:"//"+("en"==f?"www":f)+".dhgate.com",staticImage:"//www.dhresource.com",staticJS:"//js.dhresource.com",staticCSS:"//css.dhresource.com",
wwwSEARCH:location.search,countrys:{en:"English (EN)",es:"Espa\u00f1ol (ES)",pt:"Portugu\u00eas (PT)",ru:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439 (RU)",fr:"Fran\u00e7ais (FR)",de:"Deutsch (DE)",it:"Italiano (IT)",kr:"Korea (KR)",ar:"Arabian(AR)"},countryCur:f,ipCountry:e.getcookie("b2b_ip_country")||"",version:"up-1560761041085",b2b_nick_n:e.getcookie("b2b_nick_n"),b2b_buyer_lv:e.getcookie("b2b_buyer_lv"),buyerId:e.getcookie("b2b_buyerid")}});
define("common/langLoader",["common/config"],function(b){return{get:function(c){$.ajax({type:"GET",url:"//js.dhresource.com/multi/common/lang/msg_"+b.countryCur+".js?v="+b.version,context:window,async:!0,cache:!0,dataType:"script",success:c})}}});
(function(b){"function"===typeof define&&define.amd?(b(jQuery),define("tools/jquery.cookie",["lib/jquery"],b)):"object"===typeof exports?b(require("jquery")):b(jQuery)})(function(b){function c(b){b=e.json?JSON.stringify(b):String(b);return e.raw?b:encodeURIComponent(b)}function d(c,d){var h;if(e.raw)h=c;else a:{var g=c;0===g.indexOf('"')&&(g=g.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{g=decodeURIComponent(g.replace(f," "));h=e.json?JSON.parse(g):g;break a}catch(n){}h=void 0}return b.isFunction(d)?
d(h):h}var f=/\+/g,e=b.cookie=function(f,l,h){if(void 0!==l&&!b.isFunction(l)){h=b.extend({},e.defaults,h);if("number"===typeof h.expires){var g=h.expires,n=h.expires=new Date;n.setTime(+n+864E5*g)}return document.cookie=[e.raw?f:encodeURIComponent(f),"=",c(l),h.expires?"; expires="+h.expires.toUTCString():"",h.path?"; path="+h.path:"",h.domain?"; domain="+h.domain:"",h.secure?"; secure":""].join("")}h=f?void 0:{};for(var g=document.cookie?document.cookie.split("; "):[],n=0,p=g.length;n<p;n++){var r=
g[n].split("="),q;q=r.shift();q=e.raw?q:decodeURIComponent(q);r=r.join("=");if(f&&f===q){h=d(r,l);break}f||void 0===(r=d(r))||(h[q]=r)}return h};e.defaults={};b.removeCookie=function(e,c){if(void 0===b.cookie(e))return!1;b.cookie(e,"",b.extend({},c,{expires:-1}));return!b.cookie(e)}});
(function(b,c){if("object"===typeof exports&&"function"===typeof require)module.exports=c(require("lib/jQuery"),require("tools/jquery.cookie"));else if("function"===typeof define&&define.amd){var d=c(jQuery);b.DHCookieUtil=d.DHCookieUtil;b.DHCookieConts=d.DHCookieConts;define("tools/dhgate.cookie",["tools/jquery.cookie"],function(b){return c(jQuery,b)})}else d=c(jQuery,jCookie),b.DHCookieUtil=d.DHCookieUtil,b.DHCookieConts=d.DHCookieConts})(this,function(b,c){var d={rmcookie:function(b,c){$.removeCookie(b,
c)},addcookie:function(b,c,f){$.cookie(b,c,f)},addcookies:function(b,c,f,d){if(void 0===c)throw Error("subkey is no exist!");var e=($.cookie(b)||"").split("|"),h={};$.each(e,function(b,e){if(e.length){var c=e.split("=");h[c[0]]=c[1]}});h[c]=encodeURIComponent(f);__hasProp={}.hasOwnProperty;valueArr=[];for(var g in h)__hasProp.call(h,g)&&valueArr.push(g+"="+h[g]);this.addcookie(b,valueArr.join("|"),d)},getcookie:function(b){return $.cookie(b)},getcookies:function(b,c){if(void 0===c)throw Error("subkey is no exist!");
var e=(this.getcookie(b)||"").split("|"),e=$.map(e,function(b){b=b.split("=");if(b[0]===c)return decodeURIComponent(b[1])});return e.length?e[0]:null}},f={DOMAIN_ROOT:".dhgate.com",DOMAIN_WWW:".www.dhgate.com",DOMAIN_SELLER:".seller.dhgate.com",B_U_AU:"b_u_au",B_U_AU_BLMN:"blmn",B_U_AU_BLML:"blml",B_U_AU_ME:"me",B_U_AU_TUID:"tuid",B_U_INF:"b_u_inf",B_U_INF_BID:"bid",B_U_INF_NN:"nn",B_U_INF_DN:"dn",B_U_CC:"b_u_cc",B_U_CC_UCC:"ucc",B_U_CC_IPCC:"ipcc",B_U_CC_CTCC:"ctcc",B_UE:"b_ue",B_UE_ILOGIN:"ilogin",
B_UE_IREG:"ireg",S_UE:"s_ue",S_UE_ETIP:"etip",S_UE_ERD:"erd",S_UE_SRED:"sred",S_UE_KTIP:"ktip",S_UE_COSTIP:"costip",S_UE_P2TIP:"p2tip",S_UE_ORTIP:"ortip",S_UE_PRTIP:"prtip",B_OTH_RD:"b_oth_rd",B_OTH_RD_ICODE:"icode",B_OTHER:"b_other"};window.DHCookieUtil=d;window.DHCookieConts=f;return{DHCookieUtil:d,DHCookieConts:f}});
define("tools/ntalkerim",["common/config","tools/dhgate.cookie"],function(b,c){var d=location.hostname.substring(0,location.hostname.indexOf(".")).toLowerCase(),f=c.DHCookieUtil;return{init:function(b){this.opts=$.extend(this.opts,b||{});this.link=location.href;b=d;switch(b){case "www":b="en";break;case "ru":b="ru";break;case "de":b="de";break;case "fr":b="fr";break;case "es":b="es";break;case "it":b="it";break;case "pt":b="pt";break;default:b="en"}this.hostCode=b;this.type=this.opts.type||"dh";this.version=
this.opts.version||"1708211600";b="en"==this.hostCode?"en_us":this.hostCode;this.url="dh"==this.type?(this.opts.url||"//www.dhresource.com/dhs/thirdparty/ntalker/ntkfstat.js?siteid=dh_1000&lan=")+b+"&v="+this.version:(this.opts.url||"//download.ntalker.com/dhgate3/ntkfstat_")+b+".js?v="+this.version;this.$dRoot=this.opts.dRoot||$("body");this.cBtn=this.opts.cBtn||".j-onlinechat";this.nAttrSettingid=this.opts.nAttrSettingid||"data-settingid";this.nAttrProductid=this.opts.nAttrProductid||"data-productid";
this.nAttrItemcode=this.opts.nAttrItemcode||"data-itemcode";this.nAttrSupplierid=this.opts.nAttrSupplierid||"data-supplierid";this.siteid=this.opts.siteid||"dh_1000";this.sellerid=this.opts.sellerid||"dh_1000";this.settingid=this.opts.settingid||"dh_1000_9999";this.productid=this.opts.productid||"";this.itemcode=this.opts.itemcode||null;this.supplierid=this.opts.supplierid||"";this.uid=this.opts.uid||f.getcookie("b2b_buyerid");this.uname=this.opts.uname||f.getcookie("buyerusername");this.userlevel=
this.opts.userlevel||"0";this.nAttrSystemid=this.opts.nAttrSystemid||"data-systemid";this.ufromtype=this.opts.pageType||"106";this.isLogIn=this.opts.isLogIn||f.getcookie("b2b_b_t_v2")||!1;this.setNtkfParam({siteid:this.siteid,sellerid:this.sellerid,settingid:this.settingid,uid:this.uid,uname:this.uname,userlevel:this.userlevel,itemid:this.productid});this.initDHIM();window.NTKF?this.initEvents():this.loadScript(this.url,$.proxy(this.initEvents,this))},openIM:function(b,c,f,d,m,n){var e=f+"-DH-"+d+
"-DH-"+c;this.isLogIn?(n.toid?this.openDHIMWindow(n):"dh"==m?NTKF&&NTKF.im_openInPageChat(b,c,null,null,e):"kf"==m&&NTKF&&NTKF.t2d&&NTKF.t2d.openChatWindow(),this.clearParams()):(m=encodeURIComponent(location.href),!n.toid&&this.setParams(m,b,f,d,c),location.href="https://secure.dhgate.com/usr/signin.do?returnURL="+m)},openDHIMWindow:function(b){var e=function(b,e){var c="",f,d,h;for(h in b)b[h]&&(b.hasOwnProperty(h)&&(f=h),d=b[h],c+="&"+f+"="+(e?encodeURIComponent(d):d));return c.substring(1,c.length)};
window.stringify=e;window.open("//www.dhgate.com/global/webim/index.html?"+e(b),"newwindow","top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no")},initDHIM:function(){$.ajax({type:"GET",url:"https://js.dhresource.com/webim/core/package.js?v="+b.version,context:window,async:!0,cache:!0,dataType:"script",success:function(){(function(){DHCookieUtil.getcookie("b2b_buyerid");var b=DHCookieUtil.getcookie("b2b_b_t_v2"),b=new IMSocket({_protocol:"https:"==location.protocol?"wss://":
"ws://",ip:"www.dhtalker.com",port:"",uri:"/alert",param:{},handler:function(){},healthTime:3E4,token:b,utype:"buyer.dhgate"});if(b.events){var c,f=$("title").html();b.events.on("ws::string:message",function(b){c&&clearInterval(c);"ping"==b&&"pong"==b||"new"!=b||(c=setInterval(function(){var b=(new Date).getSeconds()%2;$("title").html(1==b?$L("common_im_newmsg"):f);$(".t-imHaves span:eq(1)").html(1==b?"New":"Chat")},1E3),setTimeout(function(){clearInterval(c);$("title").html(f)},6E4))});b.events.on("ws:message",
function(b){});b.connect()}})()}})},loadScript:function(b,c){$.ajax({type:"GET",url:b,async:!0,cache:!0,dataType:"script",success:c})},initEvents:function(){this.autoOpen();this.$dRoot.delegate(this.cBtn,"click",$.proxy(this.fnChatClick,this))},setNtkfParam:function(b){window.NTKF_PARAM=$.extend(!0,{},b)},autoOpen:function(){try{var b=encodeURIComponent(this.link),c=this.hashCode(b),d=f.getcookies("b2b_im_params","o"),h=f.getcookies("b2b_im_params","curl"),m=f.getcookies("b2b_im_params","s"),n=f.getcookies("b2b_im_params",
"p"),p=f.getcookies("b2b_im_params","b"),r=f.getcookies("b2b_im_params","t");window.NTKF_PARAM&&this.isLogIn&&"1"===d&&h==c&&this.openIM(m,n,p,r,this.type)}catch(q){void 0!==window.console&&console.log&&console.log(q),f.rmcookie("b2b_im_params",{domain:".dhgate.com",expires:0,path:"/"})}},fnChatClick:function(c){var e=$(c.currentTarget||c.target);c=this.type;var f=e.attr(this.nAttrSettingid)||this.settingid;f.replace(/(.*)_9999/,"$1");var d=e.attr(this.nAttrProductid)||this.productid||null,m=e.attr(this.nAttrItemcode)||
this.itemcode||_itemcode||null,n=e.attr(this.nAttrSupplierid)||this.supplierid,e=e.attr(this.nAttrSystemid);paramObj={lang:b.countryCur||"en",supplierid:n,toid:e,productid:m||d,ufromtype:this.ufromtype,ufromurl:encodeURIComponent(location.href),utype:1};this.openIM(f,d,this.uid,n,c,paramObj)},setParams:function(b,c,d,h,m){f.addcookie("b2b_im_params","o=1|curl="+this.hashCode(b)+"|s="+c+"|b="+d+"|t="+h+"|p="+m+"|",{domain:".dhgate.com",expires:1,path:"/"})},getParams:function(){},clearParams:function(){f.rmcookie("b2b_im_params",
{domain:".dhgate.com",expires:0,path:"/"})},hashCode:function(b){var c=0,e;b=b?b+"":"";if(0<b.length)for(var f=0;f<b.length;f++)e=b.charCodeAt(f),c=(c<<5)-c+e,c&=c;return c}}});
define("tools/template",[],function(){(function(){function b(d,f){var e=/[^a-z0-9A-Z_-]+/.test(d)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+d.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):c[d]=c[d]||b(document.getElementById(d).innerHTML);return f?e(f):e}var c={};return b})();
return function(b,c){return b=_.template(b)(c)}});"use strict";
define("common/tools/request",["common/config"],function(b){var c={};return c={request:function(){var c=b.countryCur||"en",f=arguments,e=f.length,g;1==e&&(g="string"===$.type(f[0])?{url:f[0]}:f[0]);2==e&&(g=f[1],g.url=f[0]);g.data=g.data||{};"string"===$.type(g.data)?g.data=g.data+"&lang="+c:g.data.lang=c;return $.ajax(g)},$L:function(b,c){c=c||{};return void 0===DH.I18N[b]?"":DH.I18N[b].replace(/\$\{(\w+)\}/ig,function(b,f){return void 0!==c[f]?c[f]:""})}}});
(function(b){"function"===typeof define&&define.amd?(b(jQuery),define("tools/jquery.xdomainrequest",["lib/jquery"],b)):"object"===typeof exports?module.exports=b(require("jquery")):b(jQuery)})(function(b){if(b.support.cors||!b.ajaxTransport||!window.XDomainRequest)return b;var c=/^(https?:)?\/\//i,d=/^get|post$/i,f=new RegExp("^(//|"+location.protocol+")","i");b.ajaxTransport("* text html xml json",function(e,g,l){if(e.crossDomain&&e.async&&d.test(e.type)&&c.test(e.url)&&f.test(e.url)){var h=null;
return{send:function(c,f,d){c="";var m=(g.dataType||"").toLowerCase();h=new XDomainRequest;/^\d+$/.test(g.timeout)&&(h.timeout=g.timeout);h.ontimeout=function(){f(500,"timeout")};h.onload=function(){var c="Content-Length: "+h.responseText.length+"\r\nContent-Type: "+h.contentType,e=200,d="success",g={text:h.responseText};try{if("html"===m||/text\/html/i.test(h.contentType))g.html=h.responseText;else if("json"===m||"text"!==m&&/\/json/i.test(h.contentType))try{g.json=b.parseJSON(h.responseText)}catch(y){e=
500,d="parseerror"}else if("xml"===m||"text"!==m&&/\/xml/i.test(h.contentType)){var l=new ActiveXObject("Microsoft.XMLDOM");l.async=!1;try{l.loadXML(h.responseText)}catch(y){l=void 0}if(!l||!l.documentElement||l.getElementsByTagName("parsererror").length)throw e=500,d="parseerror","Invalid XML: "+h.responseText;g.xml=l}}catch(y){throw y;}finally{f(e,d,g,c)}};h.onprogress=function(){};h.onerror=function(){f(500,"error",{text:h.responseText});console.log("error")};g.data&&(c="string"===b.type(g.data)?
g.data:b.param(g.data));h.open(e.type,e.url);h.send(c)},abort:function(){h&&(console.log("abort"),h.abort())}}}});return b});
(function(b,c){"undefined"!==typeof module&&module.exports?module.exports=c():"function"===typeof define&&define.amd?define("tools/clipBoard",c):this[b]=c()})("clipBoard",function(){function b(b){this.options=b||{};this.tar=b.tar?b.tar[0]:document.createElement("input");this.options.copy&&this.copyd();this.options.cut&&this.cut();this.options.paste&&this.paste()}b.prototype.copyd=function(b){this.options.beforeCopy&&this.options.beforeCopy();b=b||this.tar.value||this.tar.innerText;this.options.copy&&
(b=this.options.copy());if(document.execCommand){var c=document.createElement("SPAN");c.textContent=b;document.body.appendChild(c);if(document.selection){var f;document.body.createTextRange()}else window.getSelection&&(f=document.createRange(),f.selectNode(c),window.getSelection().removeAllRanges(),window.getSelection().addRange(f));document.execCommand("copy");c.remove?c.remove():c.removeNode(!0)}window.clipboardData&&window.clipboardData.setData("text",b);this.options.afterCopy&&this.options.afterCopy()};
b.prototype.cut=function(){if("text"===this.tar.type||"textarea"===this.tar.type){this.options.beforeCut&&this.options.beforeCut();if(document.execCommand){var b=this.tar;if(document.selection){var d=document.body.createTextRange();d.moveToElementText(b);d.select()}else window.getSelection&&b.select();document.execCommand("cut")}window.clipboardData&&(window.clipboardData.setData("text",this.tar.value),this.tar.value="");this.options.afterCut&&this.options.afterCut()}};b.prototype.paste=function(){if("text"===
this.tar.type||"textarea"===this.tar.type){this.options.beforePaste&&this.options.beforePaste();if(document.execCommand){var b=this.tar;if(b.setSelectionRange)b.focus(),b.setSelectionRange(b.value.length,b.value.length);else if(b.createTextRange){var d=b.createTextRange();d.collapse(!0);d.moveEnd("character",b.value.length);d.moveStart("character",b.value.length);d.select()}document.execCommand("paste")}!document.execCommand&&window.clipboardData&&(this.tar.value+=window.clipboardData.getData("text"));
this.options.afterPaste&&this.options.afterPaste()}};return b});
(function(b){b.fn.extend({autocomplete:function(c,d){var f="string"==typeof c;d=b.extend({},b.Autocompleter.defaults,{url:f?c:null,data:f?null:c,delay:f?b.Autocompleter.defaults.delay:10,max:d&&!d.scroll?10:150},d);d.highlight=d.highlight||function(b){return b};d.formatMatch=d.formatMatch||d.formatItem;return this.each(function(){new b.Autocompleter(this,d)})},result:function(b){return this.bind("result",b)},search:function(b){return this.trigger("search",[b])},flushCache:function(){return this.trigger("flushCache")},
setOptions:function(b){return this.trigger("setOptions",[b])},unautocomplete:function(){return this.trigger("unautocomplete")}});b.Autocompleter=function(c,d){function f(){var c=w.selected();if(!c)return!1;var e=c.result;t=e;if(d.multiple){var f=l(q.val());1<f.length&&(e=f.slice(0,f.length-1).join(d.multipleSeparator)+d.multipleSeparator+e);e+=d.multipleSeparator}q.val(e);b("#suggestsearch").val("1");m();q.trigger("result",[c.data,c.value]);return!0}function e(){var c=w.selected2(),e=c.result,c=c.data;
if(d.multiple){var f=l(q.val());1<f.length&&(e=f.slice(0,f.length-1).join(d.multipleSeparator)+d.multipleSeparator+e);e+=d.multipleSeparator}d.filled&&d.filled.call(this,c,e);q.val(e);b("#suggestsearch").val("1")}function g(b,c){if(y==r.DEL)w.hide();else{var e=q.val();if(c||e!=t)t=e,e=h(e),e.length>=d.minChars?(q.addClass(d.loadingClass),d.matchCase||(e=e.toLowerCase()),p(e,n,m)):(q.removeClass(d.loadingClass),w.hide())}}function l(c){if(!c)return[""];c=c.split(d.multipleSeparator);var e=[];b.each(c,
function(c,f){b.trim(f)&&(e[c]=b.trim(f))});return e}function h(b){if(!d.multiple)return b;b=l(b);return b[b.length-1]}function m(){var e=w.visible();w.hide();clearTimeout(v);q.removeClass(d.loadingClass);d.mustMatch&&q.search(function(b){b||(d.multiple?(b=l(q.val()).slice(0,-1),q.val(b.join(d.multipleSeparator)+(b.length?d.multipleSeparator:""))):q.val(""))});e&&b.Autocompleter.Selection(c,c.value.length,c.value.length)}function n(e,f){if(f&&f.length&&x){q.removeClass(d.loadingClass);w.display(f,
e);var g=f[0].value;d.autoFill&&h(q.val()).toLowerCase()==e.toLowerCase()&&y!=r.BACKSPACE&&(q.val(q.val()+g.substring(h(t).length)),b.Autocompleter.Selection(c,t.length,t.length+g.length));w.show()}else m()}function p(e,f,g){d.matchCase||(e=e.toLowerCase());var m=b("#catalogId").val(),l=u.load(e+m);if(l&&l.length)f(e,l);else if("string"==typeof d.url&&0<d.url.length){var n={timestamp:+new Date};b.each(d.extraParams,function(b,e){n[b]="function"==typeof e?e():e});DH.request({mode:"abort",port:"autocomplete"+
c.name,dataType:d.dataType,url:d.url,data:b.extend({q:h(e),c:m,limit:d.max},n),success:function(c){var h;if(!(h=d.parse&&d.parse(c))){h=[];c=c.split("\n");for(var g=0;g<c.length;g++){var l=b.trim(c[g]);l&&(l=l.split("|"),h[h.length]={data:l,value:l[0],result:d.formatResult&&d.formatResult(l,l[0])||l[0]})}}u.add(e+m,h);f(e,h)}})}else w.emptyList(),g(e)}var r={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},q=b(c).attr("autocomplete","off").addClass(d.inputClass),
v,t="",u=b.Autocompleter.Cache(d),x=0,y,A={mouseDownOnSelect:!1},w=b.Autocompleter.Select(d,c,f,A),z;b.browser.opera&&b(c.form).bind("submit.autocomplete",function(){if(z)return z=!1});q.bind((b.browser.opera?"keypress":"keydown")+".autocomplete",function(c){y=c.keyCode;switch(c.keyCode){case r.UP:c.preventDefault();w.visible()?-1==w.prev()?q.val(t):e():g(0,!0);break;case r.DOWN:c.preventDefault();w.visible()?-1==w.next()?q.val(t):e():g(0,!0);break;case r.PAGEUP:c.preventDefault();w.visible()?w.pageUp()?
q.val(t):e():g(0,!0);break;case r.PAGEDOWN:c.preventDefault();w.visible()?-1==w.pageDown()?q.val(t):e():g(0,!0);break;case d.multiple&&","==b.trim(d.multipleSeparator)&&r.COMMA:case r.TAB:case r.RETURN:if(f())return c.preventDefault(),z=!0,!1;break;case r.ESC:w.hide();break;default:clearTimeout(v),v=setTimeout(g,d.delay)}}).focus(function(){x++}).blur(function(){x=0;A.mouseDownOnSelect||(clearTimeout(v),v=setTimeout(m,200))}).click(function(){1<x++&&!w.visible()&&g(0,!0)}).bind("search",function(){function c(b,
c){var f;if(c&&c.length)for(var d=0;d<c.length;d++)if(c[d].result.toLowerCase()==b.toLowerCase()){f=c[d];break}"function"==typeof e?e(f):q.trigger("result",f&&[f.data,f.value])}var e=1<arguments.length?arguments[1]:null;b.each(l(q.val()),function(b,e){p(e,c,c)})}).bind("flushCache",function(){u.flush()}).bind("setOptions",function(c,e){b.extend(d,e);"data"in e&&u.populate()}).bind("unautocomplete",function(){w.unbind();q.unbind();b(c.form).unbind(".autocomplete")})};b.Autocompleter.defaults={inputClass:"ac_input",
resultsClass:"head-related-search",loadingClass:"ac_loading",appendBox:!1,minChars:1,delay:400,matchCase:!1,matchSubset:!0,matchContains:!1,cacheLength:10,max:100,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(b){return b[0]},formatMatch:null,autoFill:!1,width:0,multiple:!1,multipleSeparator:", ",highlight:function(b,d){return b.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+d.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},
filled:!1,scroll:!0,scrollHeight:180};b.Autocompleter.Cache=function(c){function d(b,e){c.matchCase||(b=b.toLowerCase());var f=b.indexOf(e);return-1==f?!1:0==f||c.matchContains}function f(b,e){h>c.cacheLength&&g();l[b]||h++;l[b]=e}function e(){if(!c.data)return!1;var e={},d=0;c.url||(c.cacheLength=1);e[""]=[];for(var h=0,g=c.data.length;h<g;h++){var l=c.data[h],l="string"==typeof l?[l]:l,v=c.formatMatch(l,h+1,c.data.length);if(!1!==v){var t=v.charAt(0).toLowerCase();e[t]||(e[t]=[]);l={value:v,data:l,
result:c.formatResult&&c.formatResult(l)||v};e[t].push(l);d++<c.max&&e[""].push(l)}}b.each(e,function(b,e){c.cacheLength++;f(b,e)})}function g(){l={};h=0}var l={},h=0;setTimeout(e,25);return{flush:g,add:f,populate:e,load:function(e){if(!c.cacheLength||!h)return null;if(!c.url&&c.matchContains){var f=[],g;for(g in l)if(0<g.length){var m=l[g];b.each(m,function(b,c){d(c.value,e)&&f.push(c)})}return f}if(l[e])return l[e];if(c.matchSubset)for(g=e.length-1;g>=c.minChars;g--)if(m=l[e.substr(0,g)])return f=
[],b.each(m,function(b,c){d(c.value,e)&&(f[f.length]=c)}),f;return null}}};b.Autocompleter.Select=function(c,d,f,e){function g(){v&&(t=b("<div/>").hide().addClass(c.resultsClass).css("position","absolute").appendTo(c.appendTo||document.body),u=b("<ul/>").appendTo(t).mouseover(function(e){l(e).nodeName&&"LI"==l(e).nodeName.toUpperCase()&&(p=b("li",u).removeClass(m.ACTIVE).index(l(e)),b(l(e)).addClass(m.ACTIVE))}).click(function(e){b(l(e)).addClass(m.ACTIVE);f();d.focus();return!1}).mousedown(function(){e.mouseDownOnSelect=
!0}).mouseup(function(){e.mouseDownOnSelect=!1}).mouseleave(function(){b("li",u).removeClass(m.ACTIVE)}),x=b("<div/>").hide().addClass("relatedmore").appendTo(t),0<c.width&&t.css("width",c.width),v=!1)}function l(b){for(b=b.target;b&&"LI"!=b.tagName;)b=b.parentNode;return b?b:[]}function h(b){n.slice(p,p+1).removeClass(m.ACTIVE);p+=b;-1>p?p=n.size()-1:p>=n.size()&&(p=-1);b=n.slice(p,p+1).addClass(m.ACTIVE);if(c.scroll){var e=0;n.slice(0,p).each(function(){e+=this.offsetHeight});e+b[0].offsetHeight-
u.scrollTop()>u[0].clientHeight?u.scrollTop(e+b[0].offsetHeight-u.innerHeight()):e<u.scrollTop()&&u.scrollTop(e)}}var m={ACTIVE:"ac_over"},n,p=-1,r,q="",v=!0,t,u,x;return{display:function(e,f){g();r=e;q=f;u.empty();var d;d=r.length;d=c.max&&c.max<d?c.max:d;for(var h=!0,l=0;l<d;l++)if(r[l]){var t=c.formatItem(r[l].data,l+1,d,r[l].value,q);!1!==t&&(h&&!r[l].data[2]&&(b('<p class="head-related-borders"></p>').appendTo(u),h=!1),t=b("<li/>").html(c.highlight(t,q)).addClass(0==l%2?"ac_even":"ac_odd").appendTo(u)[0],
r[l].result=r[l].result.replace("<strong>","").replace("</strong>",""),b.data(t,"ac_data",r[l]))}q&&0<q.length?x.html('<p class="head-related-borders"></p><a href="//www.dhgate.com/wholesale/sellerlist.do?keyword='+q+'" >'+$L("header_search_store")+" <strong>"+q+"</strong></a>"):x.empty();x.hide();n=u.find("li");c.selectFirst&&(n.slice(0,1).addClass(m.ACTIVE),p=0);b.fn.bgiframe&&u.bgiframe()},next:function(){h(1);return p},prev:function(){h(-1);return p},pageUp:function(){0!=p&&0>p-8?h(-p):h(-8);
return p},pageDown:function(){p!=n.size()-1&&p+8>n.size()?h(n.size()-1-p):h(8);return p},hide:function(){t&&t.hide();n&&n.removeClass(m.ACTIVE);p=-1},visible:function(){return t&&t.is(":visible")},current:function(){return this.visible()&&(n.filter("."+m.ACTIVE)[0]||c.selectFirst&&n[0])},show:function(){var e=b(d).offset();c.width=b(".head-Search-keywords").width();"ar"==DH.lang?t.css({width:"string"==typeof c.width||0<c.width?c.width+30:b(d).outerWidth(!0),top:e.top+d.offsetHeight,left:e.left-15,
margin:"0px",zIndex:999}).show():t.css({width:"string"==typeof c.width||0<c.width?c.width+7:b(d).outerWidth(!0),top:e.top+d.offsetHeight,left:e.left-7,margin:"0px",zIndex:999}).show();if(c.scroll&&(u.scrollTop(0),u.css({maxHeight:c.scrollHeight,overflow:"auto"}),b.browser.msie&&"undefined"===typeof document.body.style.maxHeight)){var f=0;n.each(function(){f+=this.offsetHeight});e=f>c.scrollHeight;u.css("height",e?c.scrollHeight:f);e||n.width(u.width()-parseInt(n.css("padding-left"))-parseInt(n.css("padding-right")))}},
selected:function(){var e=n&&n.filter("."+m.ACTIVE).removeClass(m.ACTIVE);return e&&e.length&&b.data(e[0],"ac_data")},selected2:function(){var e=n&&n.filter("."+m.ACTIVE);return e&&e.length&&b.data(e[0],"ac_data")},emptyList:function(){u&&u.empty()},unbind:function(){t&&t.remove()}}};b.Autocompleter.Selection=function(b,d,f){if(b.createTextRange){var e=b.createTextRange();e.collapse(!0);e.moveStart("character",d);e.moveEnd("character",f);e.select()}else!b.setSelectionRange&&b.selectionStart&&(b.selectionStart=
d,b.selectionEnd=f);b.focus()}})(jQuery);
define("tools/customdate",["common/config"],function(b){b=function(b){function c(b){var e={};e.day=~~(b/864E5);e.hours=~~(b/36E5)%24;e.minutes=~~(b/6E4)%60;e.seconds=60==Math.floor(~~(b%6E4)/1E3)||-60==Math.floor(~~(b%6E4)/1E3)?0:Math.floor(~~(b%6E4)/1E3);return e}this.version=1;this.st=0;this.timeout=null;this.diff=function(b,e){b=this.parseDate(b);e=this.parseDate(e);return null==b||null==e?null:c(e-b)};this.resetTimes=function(b,e){this.st=this.parseDate(e)-this.parseDate(b)};this.timer=function(b){var e=
this,f;e.st=0;if(2<arguments.length)try{e.st=this.parseDate(arguments[1])-this.parseDate(arguments[0]),f=arguments[2]||function(){},e.timeout=setInterval(function(){f.call(e,c(e.st),e.st-1E3);e.st-=1E3;0>e.st&&clearInterval(e.timeout)},1E3)}catch(l){}else return c(arguments[0]||0)}};b.prototype={parseDate:function(b){if(b instanceof Date)return b;if("string"==typeof b){var c=new Date(b.replace(/\-/g,"/"));if(c.getTime())return c;if((c=b.match(/^ *(\d{4})-(\d{1,2})-(\d{1,2}) *$/))&&3<c.length)return new Date(parseInt(c[1]),
parseInt(c[2])-1,parseInt(c[3]));if((c=b.match(/^ *(\d{4})-(\d{1,2})-(\d{1,2}) +(\d{1,2}):(\d{1,2}):(\d{1,2}) *$/))&&6<c.length)return new Date(parseInt(c[1]),parseInt(c[2])-1,parseInt(c[3]),parseInt(c[4]),parseInt(c[5]),parseInt(c[6]));if((c=b.match(/^ *(\d{4})-(\d{1,2})-(\d{1,2}) +(\d{1,2}):(\d{1,2}):(\d{1,2})\.(\d{1,9}) *$/))&&7<c.length)return new Date(parseInt(c[1]),parseInt(c[2])-1,parseInt(c[3]),parseInt(c[4]),parseInt(c[5]),parseInt(c[6]),parseInt(c[7]))}else return this.numberToDate(b);return null},
format:function(b,d){b=this.parseDate(b);if(null==b)return null;if(b){var c={"M+":b.getMonth()+1,"d+":b.getDate(),"h+":b.getHours(),"m+":b.getMinutes(),"s+":b.getSeconds(),"q+":Math.floor((b.getMonth()+3)/3),S:b.getMilliseconds()};/(y+)/.test(d)&&(d=d.replace(RegExp.$1,(b.getFullYear()+"").substr(4-RegExp.$1.length)))}for(var e in c)(new RegExp("("+e+")")).test(d)&&(d=d.replace(RegExp.$1,1==RegExp.$1.length?c[e]:("00"+c[e]).substr((""+c[e]).length)));return d},stringToDate:function(b){var c=Date.parse(b),
c=new Date(c);isNaN(c)&&(b=b.split("-"),c=new Date(b[0],b[1],b[2]));return c},numberToDate:function(b){b=new Date(b);return isNaN(b)?null:b}};return b});
define("tools/countdown",["common/config","tools/customdate"],function(b,c){var d=function(b){this.config={panle:"#J-promo-11 span",endTime:null,callback:function(b,c){b.html((0<c.day?c.day+"d ":"")+c.hours+":"+c.minutes+":"+c.seconds)},timer:900};this.event=this.constructor.event=$({});this.config=$.extend(!0,this.config,b);this.$panle=$(this.config.panle);this.endTime=this.$panle.attr("endTime")||this.config.endTime;0<this.$panle.length&&this.endTime&&this.initiliaze()};d.prototype={constructor:d,
initiliaze:function(){this.countdown=new c;this.getStartTime()},getStartTime:function(){var b=this;$.ajax({url:"//www.dhgate.com/common/buyertime.do",dataType:"jsonp",success:function(e){b.serverTime=e.time;b.handerMain(e.time)}})},handerMain:function(b){var e=this;e._init?e.resetTimes(e.handlerTime(b)):(e._init=!0,e.initTimes(e.handlerTime(b)));e._timer=this.config.timer;e.timer=setInterval(function(){0>=e._timer?(clearInterval(e.timer),e.timer=null,e.getStartTime()):e._timer--},1E3)},initTimes:function(b,
e){var c=this,f=this.config.callback||function(){};this.countdown.timer(b,e||this.endTime,function(b,e){var d=parseInt(b.day),h=parseInt(b.hours),g=parseInt(b.minutes),m=parseInt(b.seconds);c.serverTime=parseInt(c.serverTime);c.serverTime+=1E3;f.call(c,c.$panle,{day:0>d?0:d,hours:9>=h?0>h?"00":"0"+h:h,minutes:9>=g?0>g?"00":"0"+g:g,seconds:9>=m?0>m?"00":"0"+m:m});c.$panle.show()})},resetTimes:function(b,e){this.countdown.resetTimes(b,e||this.endTime)},handlerTime:function(b){b=parseInt(b);b=new Date(b);
var e=b.getTimezoneOffset();b.setTime(b.getTime()+6E4*e+288E5);return b}};return d});
define("common/feedback",["common/config","tools/dhgate.cookie"],function(b){b=function(b){this.options=$.extend({el:"#J_FeedBack",$main:".main-content",$goTop:"#J_GoTop",$survey:"#J_Survey",selector:{hover:"-j-fui-fbar"},hpx:10,html:!1},b||{});this.el=$(this.options.el);this.$main=$(this.options.$main);this.$goTop=$(this.options.$goTop);this.$survey=$(this.options.$survey);this.isIE6=$.browser.msie&&"6.0"==$.browser.version&&!$.support.style;this.init()};b.prototype={init:function(){this.bind()},
bind:function(){var b=$(window);b.height();b.width();this.el.css("z-index",99999);this.$goTop.live("click",this.goTopHandler);b.bind("scroll",$.proxy(this.scroll,this));this.el.find("."+this.options.selector.hover+"-hover").bind("mouseenter",$.proxy(this.mouseEnter,this)).bind("mouseleave",$.proxy(this.mouseLeave,this)).bind("click",$.proxy(this.mobileClick,this));this.resetPosition();this.el.show();this.QRCode()},scroll:function(b){b=$(window);var c=b.height();b.width();b.scrollTop()>c?this.$goTop.show():
this.$goTop.hide();this.isIE6?this.el.addClass("fixed-ie6"):this.el.removeClass("fixed-ie6")},mobileClick:function(b){b=$(b.target);var c=this.options.selector.hover+"-hover",f=b.attr("data-link");b.hasClass(c)&&f&&window.open(b.attr("data-link"))},mouseEnter:function(b){this.el.find("."+(this.options.selector.hover+"-tip")).show()},mouseLeave:function(b){this.el.find("."+(this.options.selector.hover+"-tip")).hide()},QRCode:function(){try{var b=$(".layerQROut");DHCookieUtil.getcookies("b_oth_b","qrcode")?
b.remove():(b.show(),b.find(".icon-sclose").bind("click",function(){DHCookieUtil.addcookies("b_oth_b","qrcode","1",{domain:".www.dhgate.com",expires:30,path:"/"});b.remove()}))}catch(d){}},resetPosition:function(){this.el.css("right",this.options.hpx||10)},goTopHandler:function(){$("html, body").animate({scrollTop:0},500,function(){$("html, body").unbind("DOMMouseScroll mousewheel")}).one("DOMMouseScroll mousewheel",function(){$("html, body").stop()})}};return b});
define("common/share/webLinkShare",["common/config"],function(b){function c(b,c,e){var f="",d=window.location.href,h=$("#canonicalUrl").attr("href");void 0==h?0<d.indexOf("#")&&(d=d.substring(0,d.indexOf("#"))):d=h;var m="";"pinterest"==b&&(m=$("#firstBImage >span >img").attr("src"));""!=m&&void 0!=m&&(m=encodeURIComponent(m));h=encodeURIComponent(d);f=encodeURIComponent(c||f);e=encodeURIComponent(e);var n,p=!0;if("email"==b)b=document.createElement("a"),b.setAttribute("href","mailto:?subject=Your friend recommends this product (via DHgate.com)&body="+
c.replace(/\&+|\@+|\'+|"+/g,"")+h),b.setAttribute("style","display:none;"),b.innerHTML="email",document.body.appendChild(b),b.click();else{switch(b){case "del.icio.us":n="https://delicious.com/post?title="+f+"&url="+h;break;case "digg":n="http://digg.com/submit?phase=2&url="+h+"&title="+f+"&bodytext="+e+"&topic=tech_deals";break;case "reddit":n="http://reddit.com/submit?url="+h+"&title="+f;break;case "furl":n="http://www.furl.net/savedialog.jsp?t="+f+"&u="+h;break;case "rawsugar":n="http://www.rawsugar.com/home/extensiontagit/?turl="+
h+"&tttl="+f;break;case "stumbleupon":n="http://www.stumbleupon.com/submit?url="+h+"&title="+f;break;case "facebook":n="http://www.facebook.com/share.php?src=bm&v=4&u="+h+"&t="+f;break;case "technorati":n="http://technorati.com/faves?sub=favthis&add="+h;break;case "spurl":n="http://www.spurl.net/spurl.php?v=3&title="+f+"&url="+h;break;case "simpy":n="http://www.simpy.com/simpy/LinkAdd.do?title="+f+"&href="+h;break;case "google":n="http://www.google.com/bookmarks/mark?op=edit&output=popup&bkmk="+h+
"&title="+f;break;case "netscape":n="http://www.netscape.com/submit/?U="+h+"&T="+f+"&C="+e;break;case "slashdot":n="http://slashdot.org/bookmark.pl?url="+d+"&title="+f;break;case "backflip":n="http://www.backflip.com/add_page_pop.ihtml?title="+f+"&url="+h;break;case "bluedot":n="http://bluedot.us/Authoring.aspx?u="+h+"&t="+f;break;case "kaboodle":n="http://www.kaboodle.com/za/selectpage?p_pop=false&pa=url&u="+h;break;case "squidoo":n="http://www.squidoo.com/lensmaster/bookmark?"+h;break;case "twitter":n=
"https://twitter.com/intent/tweet?status="+f+":+"+h;break;case "pinterest":n="http://pinterest.com/pin/create/button/?url="+h+"&media="+m+"&description="+f;break;case "vk":n="http://vk.com/share.php?url="+d;break;case "bluedot":n="http://blinkbits.com/bookmarklets/save.php?v=1&source_url="+h+"&title="+f;break;case "blinkList":n="http://blinkbits.com/bookmarklets/save.php?v=1&source_url="+h+"&title="+f;break;case "linkedin":n="http://www.linkedin.com/cws/share?url="+h+"&title="+f;break;case "googleplus":n=
"https://plus.google.com/share?url="+h;break;case "browser":bookmarksite(c,d),p=!1}1==p&&window.open(n,"bookmarkWindow")}}window.description="";window.title=window.document.title;return window.loadPage=c});
define("common/share/CPSwebLinkShare",["common/config","tools/clipBoard","common/tools/request","tools/jquery.cookie"],function(b,c,d,f){function e(b){d.request({url:"//www.dhgate.com/product/api/shareAddr.json",type:"GET",data:{itemcode:b},dataType:"json",timeout:1E4,success:function(b){b.result&&(l=b.result.tw,h=b.result.fb,m=b.result.ot)},error:function(){window.console&&console.log("\u8bf7\u6c42\u5931\u8d25")}})}function g(b,e){n=encodeURIComponent(e||n);var c,f=$("h1").html(),f=encodeURIComponent(f),
d=encodeURIComponent("Use my link and you'll get money off! Shop now before the promo ends!");if($.cookie("b2b_b_t_v2")){switch(b){case "twitter":c=-1<r.indexOf("shareToken")?r:-1<r.indexOf("?")?r+"&shareToken="+l:r+"?shareToken="+l;c="https://twitter.com/intent/tweet?status="+d+f+":+"+c;gtag("event","CPS",{event_category:"Checkout-product",event_label:"twitter"});break;case "facebook":c=-1<r.indexOf("shareToken")?r:-1<r.indexOf("?")?r+"&shareToken="+h:r+"?shareToken="+h,c="http://www.facebook.com/share.php?src=bm&v=4&t="+
d+"&title="+f+"&u="+c,gtag("event","CPS",{event_category:"Checkout-product",event_label:"facebook"})}window.open(c)}else location.href="https://secure.dhgate.com/usr/signin.do?returnURL="+p}window.description="";window.title=window.document.title;var l="",h="",m="";b=$("#itemcode").val();var n="",p=window.location.href;f=$("#canonicalUrl").attr("href");void 0==f?0<p.indexOf("#")&&(p=p.substring(0,p.indexOf("#"))):p=f;var r=encodeURIComponent(p);if($(".CPSshare-box").length){e(b);var q=new c({beforeCopy:function(){},
afterCopy:function(){$(".shareopen").append('<div class="copy-success">Copy Success !</div>');setTimeout(function(){$(".copy-success").remove()},2E3)}});document.getElementById("CPScopy").onclick=function(){gtag("event","CPS",{event_category:"Checkout-product",event_label:p});$.cookie("b2b_b_t_v2")?-1<p.indexOf("shareToken")?q.copyd(p):-1<p.indexOf("?")?q.copyd(p+"&shareToken="+m):q.copyd(p+"?shareToken="+m):location.href="https://secure.dhgate.com/usr/signin.do?returnURL="+p}}return window.CPSloadPage=
g});
define("common/googletranslate",["common/config"],function(b){var c=function(b){this.config={wrap:"#t-Language",trigger:"#t-Language a",panle:"#t-Language-List",activeClass:"t-active"};this.setoptions(b);this.events=this.constructor.events=$({});this.initialize();this.flag=!1};c.prototype={constructor:c,initialize:function(){this.$wrap=$(this.config.wrap);this.$trigger=$(this.config.trigger);this.$panle=$(this.config.panle);this.initEvents();this.initTranslate()},initTranslate:function(b){b=document.createElement("script");var c=
document.getElementsByTagName("script")[0];window.googleTranslateElementInit=this.translateElement;b.type="text/javascript";b.async=!0;b.src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit";c.parentNode.insertBefore(b,c)},translateElement:function(){this.flag||(new google.translate.TranslateElement({pageLanguage:b.countryCur||"en",autoDisplay:!1,layout:google.translate.TranslateElement.InlineLayout.SIMPLE},"google_translate_element"),this.flag=!0)},setoptions:function(b){this.config=
$.extend(!0,this.config,b||{})},initEvents:function(){var b=this;this.events.on("translate:show",$.proxy(this.show,this));this.events.on("translate:hide",$.proxy(this.hide,this));this.$trigger.on("click",$.proxy(this.click,this));$(document).click(function(c){$(c.target).closest("[translate-type]").length||b.events.trigger("translate:hide")})},click:function(b){this.events.trigger("translate:show")},show:function(){this.$panle.show();this.addStyle()},hide:function(){this.$panle.hide();this.removeStyle()},
addStyle:function(){var b=this.$wrap.attr("page-type");b&&"1"==b&&this.$wrap.addClass(this.config.activeClass)},removeStyle:function(){var b=this.$wrap.attr("page-type");b&&"1"==b&&this.$wrap.removeClass(this.config.activeClass)}};return c});
define("common/recommends/recommends",["common/config","lib/backbone"],function(b){function c(b,e){var c,f,d,m,n=b.match(/(\$\{\w+\})/g);if(null!=n)for(c=0,f=n.length;c<f;c++)d=n[c],m=d.replace(/(\$\{|\})/g,""),m=void 0!==e[m]?e[m]:"",b=b.replace(d,m);return b}function d(b,e){this._cache={};this.opt=$.extend(!0,{hide:1,cycle:0,api:"",per:7,total:28,disableClass:"disable",prevClass:".j-prev",nextClass:".j-next",pageClass:".j-page",listClass:".j-list",tpl:{},param:{},el:{},onFail:function(){},onSucc:function(){},
ajaxFlag:!0},b);this.formatData=b.formatData||function(b){return b};this.currentPage=0;this.pageTotal=Math.ceil(this.opt.total/this.opt.per);this.tpl=b.tpl;this.initElement();this.initEvent()}d.init=function(c){var e=b.getVisitorType();myopt=$.extend(!0,{param:e,tpl:{item:'<li><div class="viewed-img2"><a href="${link}" title="${title}"><img src="${imgSrc}" alt="${title}" /><div class="viewed-transparent"></div><p class="viewed-text">${title}</p></a></div>${a}</li>',page:"<span>${page}</span>/${total}"}},
c);req=new d(myopt);req.page(1)};$.extend(d.prototype,{initElement:function(){var b=$(this.opt.el.box),e=this.opt;this.el={box:b,list:e.el.list?$(e.el.list):b.find(e.listClass),prev:e.el.prev?$(e.el.prev):b.find(e.prevClass),next:e.el.next?$(e.el.next):b.find(e.nextClass),page:e.el.page?$(e.el.page):b.find(e.pageClass)}},initEvent:function(){var b=this;this.el.prev.click(function(){$(this);b.page(b.currentPage-1);return!1});this.el.next.click(function(){$(this);b.page(b.currentPage+1);return!1});
this.el.box.bind("mouseenter",function(){b.el.prev.show();b.el.next.show()}).bind("mouseleave",function(){b.el.prev.hide();b.el.next.hide()})},loadData:function(b){var e=this;this.cache(b)?this.loadSuccess(b,this.cache(b)):this.opt.ajaxFlag?$.get(this.opt.api,this.getParam(b),function(c){c&&200==c.code?(e.cache(b,c.result),e.loadSuccess.apply(e,[b,c.result])):e.loadFail(b)},"json"):DH.request({url:this.opt.api,type:"get",data:this.getParam(b),dataType:"json",cache:!1,success:function(c){c&&200==c.code?
(e.cache(b,c.result),e.loadSuccess.apply(e,[b,c.result])):e.loadFail(b)},error:function(){}})},getParam:function(b){return $.extend({pagenum:b,pagesize:this.opt.per,productnum:this.opt.total,_r:(new Date).getTime()},this.opt.param)},loadSuccess:function(b,e){if(1==b&&this.opt.hide){if(!e||1>e.length){this.el.box.hide();this.opt.onFail();return}this.opt.onSucc();this.el.box.show()}this.currentPage=b;this.render(b,e)},loadFail:function(b){1==b&&(this.opt.onFail(),this.el.box.hide())},cache:function(b,
e){if(b&&e)this._cache[b]=e;else if(b)return this._cache[b]},setData:function(b){var e=Math.ceil(b.length/this.opt.per);this.pageTotal=e;for(var c=0;c<e;c++)this._cache[c+1]=b.slice(c*this.opt.per,(c+1)*this.opt.per)},page:function(b){this.opt.cycle?(1>b&&(b=this.pageTotal),b>this.pageTotal&&(b=1)):(1>=b&&(b=1),b>this.pageTotal&&(b=this.pageTotal));b!=this.currentPage&&(this.currentPage=b,this.loadData(b))},render:function(b,e){1==b&&1>e.length&&this.el.box.hide();this.showPage(b);this.renderPageContent(b,
e)},showPage:function(b){this.opt.cycle||(1==b?this.setPageButton("prev",2):this.setPageButton("prev",1),b==this.pageTotal?this.setPageButton("next",2):this.setPageButton("next",1));this.el.page.html(c(this.tpl.page,{page:b,total:this.pageTotal}))},renderPageContent:function(b,e){for(var f=[],d=0;d<e.length;d++){var h=this.formatData(e[d]);h.index=(b-1)*this.opt.per+d+1;f.push(c(this.tpl.item,h))}this.el.list.html(f.join(""))},setPageButton:function(b,e){var c="prev"==b?this.el.prev:this.el.next,
f=this.opt.disableClass;1===e&&c.removeClass(f);2===e&&c.addClass(f)}});return d});
define("common/recommends/youviewed",["common/config","lib/backbone"],function(b){return{tpl:'<li><a href="${link}" title="${title}"><img src="${imgSrc}" alt="${title}" /></a></li>',api:"/dhrec/getRecentViewsList.action",trackPre:window.tversion||"hp1504",el:{box:$("#j-youViewed"),list:$("#j-youViewed .j-viewedList")},render:function(b){var c=[];if(b&&0<b.length){this.el.box.show();for(var f=0;f<b.length;f++){var e=b[f];e.link=e.link+"#"+this.trackPre+"-viewed-"+(f+1);e=this.tpl.replace(/\$\{title\}/g,
e.title).replace(/\$\{link\}/g,e.link).replace(/\$\{imgSrc\}/g,e.imgSrc);c.push(e)}this.el.list.html(c.join(""))}else this.el.box.hide()},loadData:function(b){var c=this;0<this.el.box.length&&$.get(c.api,b,function(b){b&&c.render(b.result)},"json")},init:function(b){b=$.extend({productnum:15,rurl:location.href,_r:(new Date).getTime()},b||{});this.loadData(b)}}});
define("favorite/favorites",["common/config"],function(b){var c=b.hostWrite,d=function(b){this.SetOptions(b);this.productid=$("#"+this.options.productid);this.selectors=this.options.selectors;this.isIE6=$.browser.msie&&"6.0"==$.browser.version;this.Init()};d.prototype={SetOptions:function(b){this.options={productid:"productid",selectors:{addfavbtn:".j-add-fav",addtostore:".j-addto-store",listbtn:".j-add-detail ul li",addnewbtn:".j-addnew-btn",radiobtn:".j-radio",confirmadd:".j-confirm-add",notebox:".j-add-note"}};
$.extend(this.options,b||{})},Init:function(){var b=$("body");b.delegate(this.selectors.addfavbtn,"click",$.proxy(this.addFav,this));b.delegate(this.selectors.listbtn,"click",$.proxy(this.selectList,this));b.delegate(this.selectors.addnewbtn,"click",$.proxy(this.addNew,this));b.delegate(this.selectors.radiobtn,"click",$.proxy(this.radioSelect,this));b.delegate(this.selectors.confirmadd,"click",$.proxy(this.confirmAdd,this));b.delegate(this.selectors.addtostore,"click",$.proxy(this.addToStore,this));
b.delegate(this.selectors.notebox,"keyup",$.proxy(this.textLimit,this));this.addNum();this.isAdd()},addNum:function(){var b=this.productid.val(),e=$(".j-favnum");$.ajax({url:c+"/favorite/getprodfavocount.do",data:{productid:b},type:"GET",cache:!1,dataType:"jsonp",success:function(b){"0"==b.data&&e.text(b.count)},error:function(){}})},isAdd:function(){var f=this.productid.val(),e=location.hostname.split(".",1).join(""),d=this;$.ajax({url:c+"/favorite/isprodfavorite.do",data:{productid:f,site:e},type:"GET",
cache:!1,dataType:"jsonp",success:function(e){"0"==e.data&&1==e.isprofor&&($(d.selectors.addfavbtn).addClass("have-add-fav"),"en"==b.countryCur&&$(d.selectors.addfavbtn).find(".add-btn-main").text("Added to Favorites"))},error:function(){}})},addFav:function(f){var e=$(f.currentTarget),d=location.hostname;if("en"==b.countryCur){var l=$(".j-addnew-btn"),h=e.next(".j-add-detail"),m=h.find("ul");e.hasClass("have-add-fav")||$.ajax({url:c+"/favorite/getgrouplist.do",type:"GET",cache:!1,dataType:"jsonp",
success:function(b){if(0==b.islogin){var e=encodeURIComponent(location.href);location.href="https://secure.dhgate.com/usr/signin.do?returnURL="+e}else if(m.html(""),m.append('<li groupid="0" grouplink="//dg.dhgate.com/favorite/proddetaillist.do#mydh-head-favitem"><span>Default List</span></li>'),h.show(),e=b.data){b="";for(var c=0;c<e.length;c++)b="1"==e[c].grouptype?b+('<li groupid="'+e[c].favoritegroupid+'" grouplink="//dg.dhgate.com/favorite/prodcustomlist.do?groupid='+e[c].favoritegroupid+'#mydh-head-favitem"><span>'+
e[c].favoritegroupname+"</span> (Pubilc)</li>"):b+('<li groupid="'+e[c].favoritegroupid+'" grouplink="//dg.dhgate.com/favorite/prodcustomlist.do?groupid='+e[c].favoritegroupid+'#mydh-head-favitem"><span>'+e[c].favoritegroupname+"</span> (Private)</li>");m.append(b);11<=m.find("li").length&&l.hide()}},error:function(){}})}else if(!e.hasClass("have-add-fav")){var n=e.find(".j-favnum"),p=parseInt(n.text()),r=$("#productid").val(),q=$("#itemcode").val(),v=$("#supplierid").val(),t=$("#productname").val(),
u=$("#firstBImage").find("img").attr("src"),x=$("#isstore").val(),d=location.hostname,d=d.split(".",1).join(""),y=this;$.ajax({url:c+"/favorite/addprodfavorite.do",data:{productid:r,itemcode:q,supplierid:v,productname:t,prodimgurl:u,site:d,accesssource:"0"==x?"pc-1":"pc-2"},type:"POST",cache:!1,dataType:"jsonp",success:function(c){if(0==c.islogin)c=encodeURIComponent(location.href),location.href="https://secure.dhgate.com/usr/signin.do?returnURL="+c;else{if("en"==b.countryCur||"au"==b.countryCur||
"ca"==b.countryCur||"nz"==b.countryCur||"hk"==b.countryCur||"uk"==b.countryCur||"in"==b.countryCur){c='<div class="newpopcon coupopbox favorites-popup j-favorite-dialog"><div class="newpopcon-bt alignc"><span class="icon-bigcorrect"></span>Added to <a class="favorites-link" href="//dg.dhgate.com/favorite/proddetaillist.do#mydh-head-favitem">Favorite Items</a></div><div class="coupop-btn alignc"><a class="n-yellow-button" href="//dg.dhgate.com/favorite/proddetaillist.do#mydh-head-favitem">'+$L("goto_favitems")+
'</a><span class="n-grey-button j-close-dialog">'+$L("continue_shopping")+'</span></div><span class="icon-bclose j-close-dialog"></span></div>';var f='<div class="favorite-mask j-favorite-mask"><iframe class="j-mask-iframe"></iframe></div>'}else c='<div class="newpopcon coupopbox favorites-popup j-favorite-dialog"><div class="newpopcon-bt alignc"><span class="icon-bigcorrect"></span>'+$L("addedto_favitems")+'</div><div class="coupop-btn alignc"><a class="n-yellow-button" href="//dg.dhgate.com/favorite/proddetaillist.do#mydh-head-favitem">'+
$L("goto_favitems")+'</a><span class="n-grey-button j-close-dialog">'+$L("continue_shopping")+'</span></div><span class="icon-bclose j-close-dialog"></span></div>',f='<div class="favorite-mask j-favorite-mask"><iframe class="j-mask-iframe"></iframe></div>';$("body").append(c);$("body").append(f);y.popShow();y.closePop();e.addClass("have-add-fav");p++;n.text(p)}},error:function(){}})}f.stopPropagation();this.documentClick()},selectList:function(b){var e=this,f=$(b.currentTarget),d=f.parents(".j-add-detail"),
h=f.parents(".j-add-detail").siblings(".j-add-fav"),m=h.find(".j-favnum"),n=parseInt(m.text());b=f.attr("groupid");var p=f.attr("grouplink"),r=f.html(),f=$("#productid").val(),q=$("#itemcode").val(),v=$("#supplierid").val(),t=$.trim($("#productname").val()),u=$("#firstBImage").find("img").attr("src"),x=$("#isStore").val(),y=location.hostname.split(".",1).join("");$.ajax({url:c+"/favorite/addprodfavorite.do",data:{productid:f,itemcode:q,supplierid:v,productname:t,prodimgurl:u,site:y,groupid:b,accesssource:0==
x?"pc-1":"pc-2"},type:"POST",cache:!1,dataType:"jsonp",success:function(b){0==b.data&&(b='<div class="newpopcon coupopbox favorites-popup j-favorite-dialog"><div class="newpopcon-bt alignc"><span class="icon-bigcorrect"></span>Added to <a class="favorites-link" href="'+p+'">'+r+'</a></div><div class="coupop-btn alignc"><a class="n-yellow-button" href="'+p+'">Go to my Favorite Items</a><span class="n-grey-button j-close-dialog">Continue Shopping</span></div><span class="icon-bclose j-close-dialog"></span></div>',
$("body").append(b),$("body").append('<div class="favorite-mask j-favorite-mask"><iframe class="j-mask-iframe"></iframe></div>'),e.popShow(),e.closePop(),d.hide(),h.addClass("have-add-fav"),h.find(".add-btn-main").text("Added to Favorites"),n++,m.text(n))},error:function(){}})},addNew:function(b){$("body").append('<div class="newpopcon coupopbox addfavorite-popup j-favorite-dialog"><h4 class="addfavorite-title">Add a New List</h4><div class="addfavorite-con"><dl class="write-add-info"><dt>List Name</dt><dd><input type="text" class="write-add-input j-add-name" maxlength="50"><p class="error-text j-error" style="display:none;"></p></dd><dd><span class="add-type j-radio active" data-type="1">Public ( Anyone can search for and see this list. You can also share this list with friends )</span><span class="add-type j-radio" data-type="0">Private (Only you can see this list)</span><input type="hidden" value="1" class="j-add-type"></dd></dl><dl class="write-add-info"><dt>Note</dt><dd><textarea name="" maxlength="1000" class="write-add-note j-add-note"></textarea><p class="write-add-num"><span class="num-box"><span class="j-number">0</span>/1000</span></p></dd></dl></div><div class="coupop-btn alignc"><span class="n-yellow-button j-confirm-add">Confirm</span><span class="n-grey-button j-close-dialog">Cancel</span></div><span class="icon-bclose j-close-dialog"></span></div>');
$("body").append('<div class="favorite-mask j-favorite-mask"><iframe class="j-mask-iframe"></iframe></div>');this.popShow();this.closePop()},confirmAdd:function(b){var e=$(b.target).parent(".coupop-btn").siblings(".addfavorite-con"),f=e.find(".j-add-name").val();b=e.find(".j-add-note").val();var d=e.find(".j-add-type").val(),h=e.find(".j-error"),e=$(".j-add-detail").find("ul").find("li");$(".j-addnew-btn");var m=this,n=!0;""==f?h.show().html("Please enter a new list name."):(e.each(function(b,e){var c=
$(e).find("span").text();$.trim(c)==$.trim(f)&&(n=!1,h.show().html("This list name already exists."))}),n&&$.ajax({url:c+"/favorite/addgroup.do",data:{groupname:f,grouptype:d,groupnote:b},type:"POST",cache:!1,dataType:"jsonp",success:function(b){0==b.data&&($(".j-favorite-dialog").remove(),$(".j-favorite-mask").remove(),m.newAddFav(b.groupid,f,"1"==d?"Pubilc":"Private"))},error:function(){}}))},newAddFav:function(b,e,d){var f=this,h=$("#productid").val(),g=$("#itemcode").val(),n=$("#supplierid").val(),
p=$.trim($("#productname").val()),r=$("#firstBImage").find("img").attr("src"),q=$("#isstore").val(),v=$(".j-add-detail"),t=v.siblings(".j-add-fav"),u=t.find(".j-favnum"),x=parseInt(u.text()),y=location.hostname.split(".",1).join("");$.ajax({url:c+"/favorite/addprodfavorite.do",data:{productid:h,itemcode:g,supplierid:n,productname:p,prodimgurl:r,site:y,groupid:b,accesssource:0==q?"pc-1":"pc-2"},type:"POST",cache:!1,dataType:"jsonp",success:function(c){0==c.data&&(c='<div class="newpopcon coupopbox favorites-popup j-favorite-dialog"><div class="newpopcon-bt alignc"><span class="icon-bigcorrect"></span>Added to <a class="favorites-link" href="//dg.dhgate.com/favorite/prodcustomlist.do?groupid='+
b+'#mydh-head-favitem">'+e+"("+d+')</a></div><div class="coupop-btn alignc"><a class="n-yellow-button" href="//dg.dhgate.com/favorite/prodcustomlist.do?groupid='+b+'#mydh-head-favitem">Go to my Favorite Items</a><span class="n-grey-button j-close-dialog">Continue Shopping</span></div><span class="icon-bclose j-close-dialog"></span></div>',$("body").append(c),$("body").append('<div class="favorite-mask j-favorite-mask"><iframe class="j-mask-iframe"></iframe></div>'),f.popShow(),f.closePop(),v.hide(),
t.addClass("have-add-fav"),t.find(".add-btn-main").text("Added to Favorites"),x++,u.text(x))},error:function(){}})},addToStore:function(b){$(b.target);var e=$(".selle-name").find("a").text();b=$("#supplierid").val();var f=$("#supplierno").val(),d=location.hostname.split(".",1).join(""),h=this,e=""!=e?e:$(".selle-name").find("b").text();$.ajax({url:c+"/favorite/addsellerfavorite.do",data:{supplierid:b,suppliernum:f,suppliername:e,site:d},type:"GET",cache:!1,dataType:"jsonp",success:function(b){0==
b.islogin?(b=encodeURIComponent(location.href),location.href="https://secure.dhgate.com/usr/signin.do?returnURL="+b):($("body").append('<div class="newpopcon coupopbox favorites-popup j-favorite-dialog"><div class="newpopcon-bt alignc"><span class="icon-bigcorrect"></span>Added to <a class="favorites-link" href="//dg.dhgate.com/favorite/storeList.do#mydh-head-favstore">Favorite Stores</a></div><div class="coupop-btn alignc"><a class="n-yellow-button" href="//dg.dhgate.com/favorite/storeList.do#mydh-head-favstore">Go to my Favorite Stores</a><span class="n-grey-button j-close-dialog">Continue Shopping</span></div><span class="icon-bclose j-close-dialog"></span></div>'),
$("body").append('<div class="favorite-mask j-favorite-mask"><iframe class="j-mask-iframe"></iframe></div>'),h.popShow(),h.closePop())},error:function(){}})},textLimit:function(b){var e=$(b.target);b=e.siblings(".write-add-num").find(".j-number");e=e.val().length;1E3>e?b.text(e):b.text(1E3)},radioSelect:function(b){b=$(b.currentTarget);var e=b.attr("data-type");b.addClass("active").siblings(".j-radio").removeClass("active");b.siblings(".j-add-type").val(e)},popShow:function(){var b=this;b.SetPosition();
$(window).bind("scroll resize",function(){b.SetPosition()})},closePop:function(){var b=$(".j-favorite-dialog"),e=$(".j-favorite-mask");$("body").delegate(".j-close-dialog","click",function(){b.remove();e.remove()})},SetPosition:function(){var b,e,c,d,h,m,n,p=$(".j-favorite-dialog"),r=$(".j-favorite-mask"),q=$(".j-mask-iframe");b=$(document).height();e=Math.min($(document).width(),$("body").outerWidth(!0));c=p.outerHeight(!0);d=p.outerWidth(!0);h=$(window).height();m=$(window).width();n=$(window).scrollTop();
lScroll=$(window).scrollLeft();this.isIE6?(d=parseInt((m-d)/2+lScroll),c=parseInt((h-c)/2+n)):(d=parseInt((m-d)/2),c=parseInt((h-c)/2));p.css({top:c,left:d});r.css({width:e,height:b});q.css({width:e,height:b})},documentClick:function(){$(document).click(function(b){$(b.target).closest("[data-addnew]").length?$(".j-add-detail").show():$(".j-add-detail").hide()})}};return d});
var maskMagnifier=function(b){this.SetOptions(b);this.bimgContainer=$("#"+this.options.bimgContainer);this.bimgDetails=$("#"+this.options.bimgDetails);this.bimgBlockMaskWarp=$("#"+this.options.bimgBlockMaskWarp);this.bimgBlockMask=$("#"+this.options.bimgBlockMask);this.bimgWidth=this.options.bimgWidth;this.bimgHeight=this.options.bimgHeight;this.simgList=$("#"+this.options.simgList);this.simgListItem=$("#"+this.options.simgList+" > li");this.simgListItemWidth=$(this.simgListItem[0]).outerWidth(!0);
this.simgWidth=this.options.simgWidth;this.simgHeigth=this.options.simgHeigth;this.showNum=this.options.showNum;this.simgLeft=$("#"+this.options.simgLeft);this.simgRight=$("#"+this.options.simgRight);this.OWH=[];this.WH=[];this.XY=[];this.Init()};
maskMagnifier.prototype={SetOptions:function(b){this.options={bimgContainer:"bimgContainer",bimgDetails:"bimgDetails",bimgBlockMaskWarp:"bimgBlockMaskWarp",bimgBlockMask:"bimgBlockMask",simgList:"simgList",simgWidth:36,simgHeigth:36,showNum:6,simgLeft:"simgLeft",simgRight:"simgRight",bimgWidth:308,bimgHeight:308,eventType:"click"};$.extend(this.options,b||{})},Init:function(){$(this.simgListItem[0]).addClass("current");this.bimgBlockMask.css({opacity:.5});for(var b=0;b<this.simgListItem.length;b++)this.XY.push([]),
this.WH.push([]),this.OWH.push([]);this.GetSImage();this.GetBImage();this.InitLoading();this.ClickSImage();this.LeftSliding();this.RightSliding()},ClickSImage:function(){for(var b=this,c=0;c<this.simgListItem.length;c++)(function(){var d=c;"click"==b.options.eventType?$(b.simgListItem[d]).click(function(){b.CurrentSelectedStatus(d);b.LoadingBImage(d)}):$(b.simgListItem[d]).bind("mouseenter",function(){b.CurrentSelectedStatus(d);b.LoadingBImage(d)})})()},CurrentSelectedStatus:function(b){for(var c=
0;c<this.simgListItem.length;c++)b==c?$(this.simgListItem[b]).addClass("current"):$(this.simgListItem[c]).removeClass("current")},ReturnSImageLocation:function(){for(var b=0;b<this.simgListItem.length;b++)if($(this.simgListItem[b]).hasClass("current"))return b},GetSImage:function(){this.sImageSrc=[];this.sImage=[];for(var b=0;b<this.simgListItem.length;b++)this.sImageSrc.push($(this.simgListItem[b]).attr("s-init")),this.sImage.push(new Image)},LoadingSImage:function(b){if($(this.simgListItem[b]).attr("s-init")){$(this.simgListItem[b]).removeAttr("s-init");
var c=this,d=[];$(c.sImage[b]).load(function(){d.push(c.AutoScaling(c.sImage[b],c.simgWidth,c.simgHeigth));$(c.simgListItem[b]).append("<span><img src="+c.sImageSrc[b]+" width="+d[0][0]+" height="+d[0][1]+" /></span>");c.sImage[b]=new Image;c.sImageSrc[b]=null;d=[]});c.sImage[b].src=c.sImageSrc[b]}},InitLoading:function(){var b;this.LoadingBImage(0);b=this.simgListItem.length<=this.showNum?this.simgListItem.length:this.showNum;for(var c=0;c<b;c++)this.LoadingSImage(c)},GetSImgScrollValue:function(){return parseInt(this.simgList.css("margin-left"))},
CurrentSImgLoad:function(){var b=Math.abs(parseInt(this.GetSImgScrollValue()/this.simgListItemWidth));this.LoadingSImage(b+this.showNum)},AutoScaling:function(b,c,d){var f,e;0<b.width&&0<b.height&&(b.width/b.height>=c/d?b.width>c?(f=c,e=b.height*c/b.width):(f=b.width,e=b.height):b.height>d?(e=d,f=b.width*d/b.height):(f=b.width,e=b.height));new Image;return[parseInt(f),parseInt(e)]},LeftSliding:function(){var b=this;this.GetSImgScrollValue();this.simgListItem.length<=this.showNum||(this.simgListItem.length>
this.showNum&&this.simgLeft.mouseenter(function(){0<=b.GetSImgScrollValue()||$(this).removeClass("simg-lg-arrow").addClass("simg-lh-arrow")}).mouseleave(function(){$(this).removeClass("simg-lh-arrow").addClass("simg-lg-arrow")}),this.simgLeft.click(function(){0<=b.GetSImgScrollValue()||$("#"+b.options.simgList+":not(:animated)").animate({"margin-left":"+="+b.simgListItemWidth},{duration:100,complete:function(){0<=b.GetSImgScrollValue()&&b.simgLeft.removeClass("simg-lh-arrow").addClass("simg-lg-arrow")}})}))},
RightSliding:function(){var b=this;this.GetSImgScrollValue();this.simgListItem.length<=this.showNum||(this.simgRight.mouseenter(function(){b.GetSImgScrollValue()<=(b.simgListItem.length-b.showNum)*-b.simgListItemWidth||$(this).removeClass("simg-rg-arrow").addClass("simg-rh-arrow")}).mouseleave(function(){$(this).removeClass("simg-rh-arrow").addClass("simg-rg-arrow")}),this.simgRight.click(function(){b.GetSImgScrollValue()<=(b.simgListItem.length-b.showNum)*-b.simgListItemWidth||(b.CurrentSImgLoad(),
$("#"+b.options.simgList+":not(:animated)").animate({"margin-left":"-="+b.simgListItemWidth},{duration:100,complete:function(){b.GetSImgScrollValue()<=(b.simgListItem.length-b.showNum)*-b.simgListItemWidth&&b.simgRight.removeClass("simg-rh-arrow").addClass("simg-rg-arrow")}}))}))},GetBImage:function(){this.bImageSrc=[];this.bImage=[];for(var b=0;b<this.simgListItem.length;b++)this.bImageSrc.push($(this.simgListItem[b]).attr("b-init")),this.bImage.push(new Image)},LoadingBImage:function(b){if($(this.simgListItem[b]).attr("b-init")){$(this.simgListItem[b]).removeAttr("b-init");
this.HideAllBImage();var c=this,d=[],f=this.bimgContainer.find("img:last");0===b?(this.OWH[b].push(firstBImageWidth,firstBImageHeight),this.ControlBImageDisplay(b),0!=f.offset().left&&(this.WH[b]=this.GetBlockMaskWarpSize(f,this.OWH[b][0],this.OWH[b][1]),this.XY[b]=this.GetXY(f,b)),this.BImageOver(f,b,this.OWH[b][0],this.OWH[b][1]),this.BlockMaskWarpMove(f,b),this.bImage[b]=new Image,this.bImageSrc[b]=null):($(c.bImage[b]).load(function(){d.push(c.AutoScaling(c.bImage[b],c.bimgWidth,c.bimgHeight));
c.bimgContainer.append("<div class='bimg-inner' index="+b+"><span><img src="+c.bImageSrc[b]+" width="+d[0][0]+" height="+d[0][1]+" /></span></div>");var e=c.bimgContainer.find("img:last");c.bimgDetails.append("<img index="+b+" src="+e.attr("src")+" />");c.OWH[b].push(c.bImage[b].width,c.bImage[b].height);c.ControlBImageDisplay(b);0!=e.offset().left&&(c.WH[b]=c.GetBlockMaskWarpSize(e,c.OWH[b][0],c.OWH[b][1]),c.XY[b]=c.GetXY(e,b));c.BImageOver(e,b,c.OWH[b][0],c.OWH[b][1]);c.BlockMaskWarpMove(e,b);c.bImage[b]=
new Image;c.bImageSrc[b]=null;d=[]}),c.bImage[b].src=c.bImageSrc[b])}else this.ControlBImageDisplay(b)},ControlBImageDisplay:function(b){var c=this.ReturnSImageLocation(),d=this.bimgContainer.children("div.bimg-inner");if(c==b)for(b=0;b<d.length;b++)$(d[b]).attr("index")==c?$(d[b]).css({display:"block"}):$(d[b]).css({display:"none"})},HideAllBImage:function(){var b=this.bimgContainer.children("div.bimg-inner");for(k=0;k<b.length;k++)$(b[k]).css({display:"none"})},BImageOver:function(b,c,d,f){var e=
this;b.mouseenter(function(g){var l;0==e.WH[c].length&&(e.WH[c]=e.GetBlockMaskWarpSize(b,d,f));e.XY[c]=e.GetXY(b,c);l=e.GetFinalXY(g,c);e.bimgBlockMaskWarp.css({display:"block",left:l[0],top:l[1],width:e.WH[c][0],height:e.WH[c][1]});e.bimgDetails.css({display:"block"});e.ControlBimgDetailsDisplay(c);e.BImageDetailsShift(g,c,l)}).mouseleave(function(b){$(b.relatedTarget).attr("id")!=e.options.bimgBlockMask&&(e.bimgBlockMaskWarp.css({display:"none"}),e.bimgDetails.css({display:"none"}))})},GetBlockMaskWarpSize:function(b,
c,d){var f;f=parseInt(b.attr("width"));b=parseInt(b.attr("height"));c/=this.bimgWidth;d/=this.bimgHeight;return[f<=Math.floor(f/c)?f-2:Math.floor(f/c),b<=Math.floor(b/d)?b-2:Math.floor(b/d),f,b]},BlockMaskWarpMove:function(b,c){var d=this;this.bimgBlockMaskWarp.mousemove(function(b){var e;e=d.ReturnSImageLocation();c==e&&0!=d.WH[c].length&&(e=d.GetFinalXY(b,c),d.bimgBlockMaskWarp.css({left:e[0],top:e[1]}),d.BImageDetailsShift(b,c,e))}).mouseleave(function(){d.bimgBlockMaskWarp.css({display:"none"});
d.bimgDetails.css({display:"none"})})},GetXY:function(b,c){var d=[],f,e,g,l,h,m;f=this.bimgContainer.offset().left;e=b.offset().left;g=e+parseInt(b.attr("width"));f=e-f-1;l=Math.floor((this.WH[c][0]+2)/2);h=parseInt(b.attr("width"));m=this.WH[c][0]+2;var n=[],p,r,q,v,t,u;p=this.bimgContainer.offset().top;r=b.offset().top;q=r+parseInt(b.attr("height"));p=r-p-1;v=Math.floor((this.WH[c][1]+2)/2);t=parseInt(b.attr("height"));u=this.WH[c][1]+2;d.push(e,g,f,l,h,m);n.push(r,q,p,v,t,u);return[d,n]},GetFinalXY:function(b,
c){final_x=b.pageX<=this.XY[c][0][0]+this.XY[c][0][3]?this.XY[c][0][2]:b.pageX>this.XY[c][0][0]+this.XY[c][0][3]&&b.pageX<this.XY[c][0][1]-this.XY[c][0][3]?b.pageX-(this.XY[c][0][0]+this.XY[c][0][3])+this.XY[c][0][2]:this.XY[c][0][4]-this.XY[c][0][5]+this.XY[c][0][2];final_y=b.pageY<=this.XY[c][1][0]+this.XY[c][1][3]?this.XY[c][1][2]:b.pageY>this.XY[c][1][0]+this.XY[c][1][3]&&b.pageY<this.XY[c][1][1]-this.XY[c][1][3]?b.pageY-(this.XY[c][1][0]+this.XY[c][1][3])+this.XY[c][1][2]:this.XY[c][1][4]-this.XY[c][1][5]+
this.XY[c][1][2];return[final_x,final_y]},ControlBimgDetailsDisplay:function(b){for(var c=this.bimgDetails.find("img"),d=0;d<c.length;d++)$(c[d]).attr("index")==b?$(c[d]).css({display:"block"}):$(c[d]).css({display:"none"})},BImageDetailsShift:function(b,c,d){var f,e,g,l;f=this.bimgDetails.find("img:visible");dWidth=f.width();dHeight=f.height();e=this.WH[c][2];g=this.WH[c][3];l=d[0];d=d[1];wScale=dWidth/e;hScale=dHeight/g;l=e<this.bimgWidth?Math.ceil((l-(this.bimgWidth-e)/2)*wScale):Math.ceil(l*wScale);
d=g<this.bimgHeight?Math.ceil((d-(this.bimgHeight-g)/2)*hScale):Math.ceil(d*hScale);dWidth<this.bimgWidth&&(l=-(this.bimgWidth-dWidth)/2);dHeight<this.bimgHeight&&(d=-(this.bimgHeight-dHeight)/2);dWidth>this.bimgWidth&&(e=e-this.WH[c][0]+(this.XY[c][0][0]+Math.floor(this.WH[c][0]/2)),b.pageX>e&&(l=dWidth-this.bimgWidth));dHeight>this.bimgHeight&&(c=g-this.WH[c][1]+(this.XY[c][1][0]+Math.floor(this.WH[c][1]/2)),b.pageY>c&&(d=dHeight-this.bimgHeight));f.css({left:-l,top:-d})}};
(function(b,c,d,f){d=function(b){this.config=$.extend({container:"#container",list:"#listBuy_1 >li",reference:null,imgWrap:"#bimgContainer",imgdetails:"#bimgDetails",customClass:".js-attr-linkage",smallImg:"#simgList li"},b);this._cache={smallImg:[]};this.flag=0;this.init()};d.prototype={init:function(){this.setOptions();this._cacheSmallImg();this.events()},_cacheSmallImg:function(){var b=this;$(b.config.smallImg).each(function(c,e){var d=$(e).attr("b-init");d&&1<d.length&&b._cache.smallImg.push(d)})},
events:function(){var b=this.config;$(document).delegate(b.list,"click",$.proxy(this.linkage,this))},setOptions:function(b){this.config=$.extend(!0,this.config,b||{});this.container=$(this.config.container)},linkage:function(b){var c;b.stopPropagation();c=$(b.target);switch(c[0].nodeName){case "SPAN":c=c.parent();break;case "IMG":c=c.parent().parent()}b=c.attr("data-simg");c=c.attr("data-bimg");b&&0<b.length&&this.insertHtml(b,c)},insertHtml:function(b,c){var e=this.config,d=$(e.imgWrap);this.flag--;
this.getImgInfo();e=$(e.customClass,d);0<e.length?(e.html('<span><img src="'+b+'" style="max-width:358px;max-height:358px"></span>'),d.find(".bimg-inner").hide()):(e=$('<div class="bimg-inner js-attr-linkage" index="'+this.flag+'" style="display: none;"><span><img  src="'+b+'" style="max-width:358px;max-height:358px"></span></div>'),d.find(".bimg-inner").hide(),d.append(e));e.css({display:"table"})},getImgInfo:function(b){var c=[],e;e=new Image;e.src=b;e.complete?c.push(e.width,e.height):e.load=function(){c.push(e.width,
e.height)};return c}};c[b]=$.extend(!0,{},c[b]||{});c[b].Detail=c[b].Detail||{};c[b].Detail.attributeLinkage=d})("DH",window,document);
(function(b,c,d,f){d=function(b){this.config=$.extend({container:"#container",wrap:".wrap",reference:null,direction:"top",className:"tab-toolbar"},b);this.init()};d.prototype={init:function(){this.setOptions();this.events()},events:function(){$(c).bind("scroll",$.proxy(this.scroll,this))},scroll:function(b,d){var e=this.config,f=$(c).scrollTop();(e.reference?$(e.reference).offset():this.container.offset()).top<=f?this.wrap.addClass(e.className):this.wrap.removeClass(e.className)},setOptions:function(b){this.config=
$.extend(!0,this.config,b||{});this.container=$(this.config.container);this.wrap=$(this.config.wrap,this.container)}};c[b]=$.extend(!0,{},c[b]||{});c[b].Detail=c[b].Detail||{};c[b].Detail.shortcut=d})("DH",window,document);
(function(b,c,d){b.DH=$.extend(!0,{},b.DH||{});DH.Store=DH.Store||{};DH.Store.StoreCoupon=function(b){this.config=$.extend(!0,{container:"#container",cList:".lsit",cBtn:".cBtn",disabledCls:"disabled",curNum:".js-num",supplierid:null,buyerid:null,ajax:{uri:"//dg.dhgate.com/myaccount/coupon/seller_coupon.do",params:{}},isLogin:!1,zIndex:900},b||{});this.init()};$.extend(DH.Store.StoreCoupon.prototype,{init:function(){var b=this.config;this.container=$(b.container);this.isLogin=b.isLogin||!!DHCookieUtil.getcookie("b2b_b_t_v2")||
!1;this.events();this.autoCoupon()},events:function(){var c=this.config;this.container.delegate(c.cList+" "+c.cBtn,"click",$.proxy(this._getCoupun,this));$(document).delegate(".js-couponLayer-close","click",$.proxy(this.colseLayer,this));$(b).bind("resize",$.proxy(this.setCSS,this));this.container.bind("events_coupon",$.proxy(this.getCoupon,this))},getQueryString:function(c){c=new RegExp("(^|&)"+c+"=([^&]*)(&|$)","i");c=b.location.search.substr(1).match(c);return null!=c?unescape(c[2]):null},_f5:function(){var b=
this.getQueryString("getcoupon");b&&1<b.length&&(location.href=location.href.replace(location.search,""))},_getCoupun:function(b){this.container.trigger("events_coupon",{target:$(b.target).parents(this.config.cList)})},autoCoupon:function(){var b=this.config,c=this.getQueryString("getcoupon");c&&1<c.length&&(b=$(b.cList+"[couponcode="+c+"]",this.container),this.container.trigger("events_coupon",{target:b,couponcode:c}))},getCoupon:function(b,c){var e=this,d=this.config,h=$(c.target),f,n;b.stopPropagation();
b.preventDefault();f=h.attr("couponcode");n=h.attr("supplierid");n=$.extend(!0,d.ajax.params,{couponCode:f||c.couponcode,supplierId:n||d.supplierid||"",buyerId:d.buyerId||$.cookie("b2b_buyerid")});if(!n.couponCode)return!1;if(!this.isLogin)return d=location.href,d=d.replace(/\#.*/ig,"").replace(/\?getcoupon=.*/ig,"").replace(/getcoupon=.*/ig,""),d=d+(-1==d.indexOf("?")?"?":"&")+"getcoupon="+f,location.href="https://secure.dhgate.com/usr/signin.do?returnURL="+encodeURIComponent(d),!1;this.request(d.ajax.uri,
n,function(b){b?(200==b.code&&(e.changeNum(b.usedNumber,b.totalNumber,h),e.changeStatus(b.totalNumber>b.usedNumber?1:0,h)),e.showResult(b)):e.showResult({code:500,msg:$L("store_tips_coupon_error_title")})})},changeNum:function(b,c,d){$(this.config.curNum,d).text(b)},changeStatus:function(b,c){var e=$(this.config.cBtn,c),d=e.parent();switch(b){case 0:e.remove();d.append('<span class="frt">'+$L("store_tips_coupon_outOf_button")+"</span>");c.addClass("coup-out");break;case 1:e.remove(),d.append('<input type="button" class="coupbtn n-unclick-button" disabled="disabled" value="'+
$L("store_tips_coupon_received_button")+'">')}},changeLogin:function(){this.isLogin=!!DHCookieUtil.getcookie("b2b_b_t_v2")},showResult:function(b){var c=['<div class="newpopcon coupopbox clearfix  js-couponLayer-container" style="display:block; visibility: hidden;">',"<% if(data.code == 200) {%>","<% if(data.couponStatus ==2){ %>",'<div class="newpopcon-bt alignc"><span class="icon-bigcorrect"></span><%= $L("store_tips_coupon_successAlready_title") %></div>','<p class="alignc"><%= $L("store_tips_coupon_successAlready_content",{amount: data.couponAmount,expires: data.expireDateFormat}) %></p>',
"<% }else if(data.couponStatus ==4){ %>",'<div class="newpopcon-bt alignc"><span class="icon-bigcorrect"></span><%= $L("store_tips_coupon_success_title") %></div>','<% if(typeof data.isappcoupon != "undefined" && data.isappcoupon == 1){ %>','<p class="alignc"><%= $L("store_tips_app_coupon_success_content",{amount: data.couponAmount,expires: data.expireDateFormat}) %></p>',"<% }else{ %>",'<p class="alignc"><%= $L("store_tips_coupon_success_content",{amount: data.couponAmount,expires: data.expireDateFormat}) %></p>',
"<% } %>","<% } else if(data.couponStatus == 1){%>",'<div class="newpopcon-bt alignc orange"><span class="icon-big-warning"></span><%= $L("store_tips_coupon_outOf_content") %> </div>',"<%}%>","<% } else { %>",'<div class="newpopcon-bt alignc orange"><span class="icon-big-warning"></span><%= data.msg || $L("store_tips_coupon_successAlready_title") %> </div>',"<% } %>",'<div class="coupop-btn alignc">','<% if(data.isappcoupon == 0 || typeof data.isappcoupon == "undefined"){ %>','<input type="button" value="<% if(data.code == 200) {%>',
"<% if(data.couponStatus ==1 ||data.couponStatus ==5){ %>",'<%= $L("store_tips_coupon_error_button")%>',"<% }else{ %>",'<%= $L("store_tips_coupon_success_button")%>',"<% } %>","<% }else{ %>",'<%= $L("store_tips_coupon_error_button")%>','<% } %>"',' class="n-yellow-button js-couponLayer-close">',"<% } %>",'<a href="//dg.dhgate.com/myaccount/coupon/coupon.do#mydh-summ-cou" class="n-grey-button"><%= $L("store_tips_coupon_view_button") %></a>',"</div>",'<% if(typeof data.isappcoupon != "undefined" && data.isappcoupon == 1){ %>',
'<div class="download">','<p class="downloadtext"><%= $L("store_tips_app_coupon_download_content")%></p>','<ul class="downloadlist">','<li class="tdcode"></li>','<li class="googleplay"><a href="//m.dhgate.com/activities/promotion/googlePlay-Android.html?type=appcoupon" style="height:54px;width:200px;display:block;"></a></li>','<li class="appstore"><a href="https://app.appsflyer.com/id905869418?pid=AppSCP&c=itempage" style="height:54px;width:200px;display:block;"></a></li>',"</ul>","</div>","<% } %>",
'<span class="icon-bclose js-couponLayer-close"></span>',"</div>"],c=c.join(""),c=this.tmpl(c,{data:b});this._layer={HTML:$(c),MASK:$('<div style="display:none"></div>')};$("body").append(this._layer.HTML).append(this._layer.MASK);this.setCSS()},setCSS:function(){if(!this._layer)return!1;var c=$(b),e=$("body"),d=c.height(),l=c.width(),h=this._layer.HTML.outerHeight(1),m=this._layer.HTML.outerWidth(1),l=l-m,d=d-h;this._layer.HTML.css({left:(0>l?0:l/2)+c.scrollLeft(),top:(0>d?0:d/2)+c.scrollTop(),visibility:"visible",
position:"absolute",zIndex:this.config.zIndex});this._layer.MASK.css({width:e.width(),height:e.height(),top:0,left:0,position:"absolute",display:"block",background:"#ccc",opacity:.5,zIndex:this.config.zIndex-1})},colseLayer:function(){this._layer.HTML.remove();this._layer.MASK.remove();this._f5()},request:function(b,c,d){var e=this;if(e.flag)return!1;e.flag=!0;$.ajax({url:b,dataType:"jsonp",cache:!1,data:c,success:function(b){e.flag=!1;"function"===typeof d?d.call(e,b):""},error:function(){e.flag=
!1;"function"===typeof d?d.call(e):""}})},tmpl:function(){function b(e,d){var h=/[^a-z0-9A-Z_-]+/.test(e)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):c[e]=c[e]||b(document.getElementById(e).innerHTML);return d?h(d):h}var c={};return b}()})})(window,
document);
(function(b,c,d,f){d=function(b){this.config=$.extend(!0,{container:"#container",goUp:".up",top:500,selectAttr:".js-attribute-wrap",selectClass:"buyinfo-wrap",tabTrigger:".tab-toolbar ul > li"},b||{});this.init()};d.prototype={init:function(){this.setOptions();this.events()},events:function(){var b=this.config;this.container.delegate(b.goUp,"click",$.proxy(this._up,this));this.container.delegate(b.tabTrigger,"click",$.proxy(this.changeTab,this))},_up:function(){var b=this,c=$(b.config.selectAttr);$("html, body").animate({scrollTop:b.config.top},
500,function(){$("html, body").unbind("DOMMouseScroll mousewheel")}).one("DOMMouseScroll mousewheel",function(){$("html, body").stop()});c.addClass(b.config.selectClass);setTimeout(function(){c.removeClass(b.config.selectClass)},3E3)},changeTab:function(){$(window).scrollTop($("#ctabBox").parent().offset().top-2)},setOptions:function(b){this.config=$.extend(!0,this.config,b||{});this.container=$(this.config.container);this.wrap=$(this.config.wrap,this.container)}};c[b]=$.extend(!0,{},c[b]||{});c[b].Detail=
c[b].Detail||{};c[b].Detail.toolbar=d})("DH",window,document);
var sizechartMap={"014032001003":"womenunderwear","014032001004":"womenunderwear","014032001013":"ladypanty","014032001002":"ladypanty","014032002001":"menpanty","014032002007":"menpanty","014031004":"womenclothes","014031006":"womenclothes","014031005":"womenclothes","014031003":"womenclothes","014031008":"womenclothes","014031007":"womenclothes","014031009":"womenclothes","014031010":"pants","014031015":"pants","014031011":"pants","014031013":"pants","014031014":"pants","014031001":"pants","014031016":"dress",
14031012:"dress","014030008008":"menclothes","014030008006":"menclothes","014030008001":"menclothes","014030010":"menclothes","014030001001":"menclothes","014030009":"menclothes","014030002":"menclothes","014030003":"menclothes","014030001002":"menclothes","014030008005":"menclothes","014030004":"menclothes","014030008002":"menclothes","014030007":"menclothes","014030008004":"menclothes","014030008003":"menclothes","014030003002":"menclothes","014030005":"menpants",111003:"kids",109002001:"belt",
141001:"shoes",141002:"shoes",141003:"shoes",141004:"shoes",141005:"shoes",141006:"shoes",141007:"shoes",141111:"shoes",111006:"childshoes","002002":"dresssizechart","002009":"dresssizechart","002013":"dresssizechart","002011":"dresssizechart","002015":"dresssizechart","002016":"dresssizechart","002014001":"childdresssize","002014002":"childdresssize","002007001":"jacketsizechart"};
function sizechart(b){var c=null;$.each(sizechartMap,function(d,f){if(-1<b.indexOf(d))return c=f,!1});null!=c&&$.ajax({url:"//ru.dhgate.com/catesize/"+c+".html",type:"GET",dataType:"html",cache:!1,success:function(b){if(null!=b&&""!=b){var c=$('<div id="checkSizeLayer" style="left:-1000px"></div>'),e=$(window),d=e.height(),e=e.width();c.append(b);$("body").append(c);$("body").append('<div id="checkSizeLayerMask"><iframe id="checkSizeLayerMaskIframe"></iframe></div>');b=c.outerHeight(!0);c.css({top:1<
d-b?(d-b)/2:0,left:1<e-880?(e-880)/2:0});$("#checkSizeLayerMask").css({width:e,height:d,left:0,top:0,opacity:.5});$("#checkSizeLayerMaskIframe").css({width:e,height:d,left:0,top:0,opacity:0})}}})}$("body").delegate("#checkSizeLayer .icon-bclose","click",function(){$(this).parents("#checkSizeLayer").remove();$("#checkSizeLayerMask").remove()});
$(window).bind("resize",function(){var b=$("#checkSizeLayer"),c=b.find(".checkSizeLayer"),d=$(window),f=$("#checkSizeLayerMask"),e=$("#checkSizeLayerMaskIframe");0<b.length&&(_wh=d.height(),_ww=d.width(),SW=880,SH=c.outerHeight(),b.css({top:1<_wh-SH?(_wh-SH)/2:0,left:1<_ww-SW?(_ww-SW)/2:0}),f.css({width:_ww,height:_wh,opacity:.5}),e.css({width:_ww,height:_wh,opacity:0}))});jQuery.each(sizechartMap,function(b,c){if(-1<_catelogID.indexOf(b))return $("#sizechartId").show(),!1});
function getCookie(b){var c;c=b+"=";if(0<document.cookie.length)return b=document.cookie.indexOf(c),-1!=b?(b+=c.length,c=document.cookie.indexOf(";",b),-1==c&&(c=document.cookie.length),document.cookie.substring(b,c)):""}
var selectUnitPriceCountry=function(b){this.SetOptions(b);$("#"+this.options.unitPriceCountryContent)[0]&&(this.unitPriceCountryContent=$("#"+this.options.unitPriceCountryContent),this.unitPriceConuntryList=this.options.unitPriceConuntryList,this.unitPriceWrapper=$("."+this.options.unitPriceWrapper),this.unitPriceButton=$("."+this.options.unitPriceButton),this.unitPriceCountryTextarea=$("#"+this.options.unitPriceCountryTextarea),this.unitPriceConuntryClose=this.options.unitPriceConuntryClose,this.Init())};
selectUnitPriceCountry.prototype={SetOptions:function(b){this.options={unitPriceWrapper:"key-info",unitPriceButton:"unit-Price-country",unitPriceConuntryList:"unitPriceConuntryListUl",unitPriceCountryContent:"unitPriceCountryContent",unitPriceCountryTextarea:"unitPriceCountryTextarea",unitPriceConuntryClose:["unitPriceConuntryClose","unitPriceConuntryClose1"]};$.extend(this.options,b||{})},Init:function(){this.Click()},Click:function(){var b=this;this.unitPriceButton.mouseenter(function(){b.unitPriceWrapper.addClass("zIndex7");
$("#"+b.options.unitPriceCountryTextarea)[0]?(b.unitPriceCountryContent.html(b.unitPriceCountryTextarea.html()).css({display:"block"}),b.unitPriceCountryTextarea.remove(),b.LoadingNationLogo(),b.Close()):"none"==b.unitPriceCountryContent.css("display")?b.unitPriceCountryContent.css({display:"block"}):b.unitPriceCountryContent.css({display:"none"})}).mouseleave(function(){"block"==b.unitPriceCountryContent.css("display")&&b.unitPriceCountryContent.css({display:"none"});b.unitPriceWrapper.removeClass("zIndex7")});
this.unitPriceButton.click(function(c){c.stopPropagation();$("#"+b.options.unitPriceCountryTextarea)[0]?(b.unitPriceCountryContent.html(b.unitPriceCountryTextarea.html()).css({display:"block"}),b.unitPriceCountryTextarea.remove(),b.LoadingNationLogo(),b.Close()):"none"==b.unitPriceCountryContent.css("display")?b.unitPriceCountryContent.css({display:"block"}):b.unitPriceCountryContent.css({display:"none"})});this.unitPriceCountryContent.click(function(b){b.stopPropagation()})},HighlightDefaultStatus:function(){$(this.unitPriceConuntryList[0]).addClass("hover");
for(var b=1;b<this.unitPriceConuntryList.length;b++)$(this.unitPriceConuntryList[b]).removeClass("hover")},Close:function(){var b=this;$(document).click(function(){"block"==b.unitPriceCountryContent.css("display")&&b.unitPriceCountryContent.css({display:"none"})});for(var c=0;c<this.unitPriceConuntryClose.length;c++)$("#"+this.unitPriceConuntryClose[c]).click(function(){"block"==b.unitPriceCountryContent.css("display")&&b.unitPriceCountryContent.css({display:"none"})})},LoadingNationLogo:function(){var b=
$("#"+this.unitPriceConuntryList+"> li");for(i=0;i<b.length;i++){var c=$(b[i]).attr("init-src");$(b[i]).removeAttr("init-src");$(b[i]).prepend('<img src="'+c+'" width="16" height="11" />')}}};var loadTransactionHistory=function(b){this.SetOptions(b);document.getElementById(this.options.transactionHistoryWarp)&&(this.transactionHistoryWarp=$("#"+this.options.transactionHistoryWarp),this.timer1=this.timer=null,this.Init())};
loadTransactionHistory.prototype={SetOptions:function(b){this.options={transactionHistoryWarp:"transactionHistoryWarp"};$.extend(this.options,b||{})},Init:function(){this.Monitor()},Load:function(){if("true"!=this.Load.flag){var b=this;DH.request({url:this.transactionHistoryWarp.attr("init-src"),type:"GET",dataType:"html",cache:!1,success:function(c){b.transactionHistoryWarp.removeAttr("init-src");b.transactionHistoryWarp.find("div").remove();b.transactionHistoryWarp.append(c);$(window).unbind("scroll.TransactionHistory").unbind("resize.TransactionHistory");
new historyTurnPage({historyParent:"transactionHistoryWarp"})}});this.Load.flag="true"}},Monitor:function(){var b=this;$(window).bind("scroll.TransactionHistory",function(){b.timer&&clearTimeout(b.timer);b.timer=setTimeout(function(){b.Compare()},5)}).bind("resize.TransactionHistory",function(){b.timer1&&clearTimeout(b.timer1);b.timer1=setTimeout(function(){b.Compare()},5)})},Compare:function(){var b=$(window).scrollTop(),c=$(window).height();this.transactionHistoryWarp.offset().top<=b+c&&this.Load()}};
var loadTransactionFeedback=function(b){this.SetOptions(b);document.getElementById(this.options.transactionFeedbackWarp)&&(this.transactionFeedbackWarp=$("#"+this.options.transactionFeedbackWarp),this.timer1=this.timer=null,this.Init())};
loadTransactionFeedback.prototype={SetOptions:function(b){this.options={transactionFeedbackWarp:"transactionFeedbackWarp"};$.extend(this.options,b||{})},Init:function(){this.Monitor()},Load:function(){if("true"!=this.Load.flag){var b=this;DH.request({url:this.transactionFeedbackWarp.attr("init-src"),type:"GET",dataType:"html",cache:!1,success:function(c){b.transactionFeedbackWarp.removeAttr("init-src");b.transactionFeedbackWarp.find("div").remove();b.transactionFeedbackWarp.append(c);$(window).unbind("scroll.TransactionFeedback").unbind("resize.TransactionFeedback");
new feedbackTurnPage({feedbackParent:"transactionFeedbackWarp"})}});this.Load.flag="true"}},Monitor:function(){var b=this;$(window).bind("scroll.TransactionFeedback",function(){b.timer&&clearTimeout(b.timer);b.timer=setTimeout(function(){b.Compare()},5)}).bind("resize.TransactionFeedback",function(){b.timer1&&clearTimeout(b.timer1);b.timer1=setTimeout(function(){b.Compare()},5)})},Compare:function(){var b=$(window).scrollTop(),c=$(window).height();this.transactionFeedbackWarp.offset().top<=b+c&&this.Load()}};
var loadProductReviews=function(b){this.SetOptions(b);document.getElementById(this.options.productReviewsWarp)&&(this.productReviewsWarp=$("#"+this.options.productReviewsWarp),this.timer1=this.timer=null,this.Init())};
loadProductReviews.prototype={SetOptions:function(b){this.options={productReviewsWarp:"productReviewsWarp"};$.extend(this.options,b||{})},Init:function(){this.Monitor()},Load:function(){$(window).unbind("scroll.ProductReviews").unbind("resize.ProductReviews");window.DH_Product_Reviews_Sign_PopUp||(window.DH_Product_Reviews_Sign_PopUp=new productReviewsSignPopUp);new PRScaling;window.DH_PR_IM_Popup||(window.DH_PR_IM_Popup=new PRIMPopup);officialReviewInfo()},Monitor:function(){var b=this;$(window).bind("scroll.ProductReviews",
function(){b.timer&&clearTimeout(b.timer);b.timer=setTimeout(function(){b.Compare()},5)}).bind("resize.ProductReviews",function(){b.timer1&&clearTimeout(b.timer1);b.timer1=setTimeout(function(){b.Compare()},5)})},Compare:function(){var b=$(window).scrollTop(),c=$(window).height();this.productReviewsWarp.offset().top<=b+c&&this.Load()}};function writeReview(b){window.location.replace(b)}
var loadOtherItems=function(b){this.SetOptions(b);document.getElementById(this.options.otherItemsWarp)&&(this.otherItemsWarp=$("#"+this.options.otherItemsWarp),this.timer1=this.timer=null,this.Init())};
loadOtherItems.prototype={SetOptions:function(b){this.options={otherItemsWarp:"otherItemsWarp"};$.extend(this.options,b||{})},Init:function(){this.Monitor()},Load:function(){if("true"!=this.Load.flag){var b=this;DH.request({url:this.otherItemsWarp.attr("init-src"),type:"GET",dataType:"html",cache:!1,success:function(c){b.otherItemsWarp.removeAttr("init-src");b.otherItemsWarp.find("div").remove();b.otherItemsWarp.append(c);$(window).unbind("scroll.OtherItems").unbind("resize.OtherItems")}});this.Load.flag=
"true"}},Monitor:function(){var b=this;$(window).bind("scroll.OtherItems",function(){b.timer&&clearTimeout(b.timer);b.timer=setTimeout(function(){b.Compare()},5)}).bind("resize.OtherItems",function(){b.timer1&&clearTimeout(b.timer1);b.timer1=setTimeout(function(){b.Compare()},5)})},Compare:function(){var b=$(window).scrollTop(),c=$(window).height();this.otherItemsWarp.offset().top<=b+c&&this.Load()}};
var cTab=function(b){this.SetOptions(b);this.ctabBoxItems=$("#"+this.options.ctabBoxItems);this.cItemDescription=this.options.cItemDescription;this.cShippingAndPayment=this.options.cShippingAndPayment;this.cTransactionHistory=this.options.cTransactionHistory;this.cProductReviews=this.options.cProductReviews;this.itemDescription=$("#"+this.options.itemDescription);this.shippingAndPayment=$("#"+this.options.shippingAndPayment);this.transactionHistory=$("#"+this.options.transactionHistory);this.productReviews=
$("#"+this.options.productReviews);this.anchorProductReviews=this.options.anchorProductReviews;this.anchorTransactionHistory=this.options.anchorTransactionHistory;this.Init()};
cTab.prototype={SetOptions:function(b){this.options={ctabBoxItems:"ctabBox  ul > li",cItemDescription:"ctab-itemDescription",cShippingAndPayment:"ctab-shippingAndPayment",cTransactionHistory:"ctab-transactionHistory",cProductReviews:"ctab-productReviews",itemDescription:"itemDescription",shippingAndPayment:"shippingAndPayment",transactionHistory:"transactionHistory",productReviews:"productReviews",anchorProductReviews:"anchor-productReviews",anchorTransactionHistory:"anchor-transactionHistory"};$.extend(this.options,
b||{})},Init:function(){this.Open();this.OpenProductReviews();this.AnchorPoint()},Open:function(){for(var b=this,c=0;c<this.ctabBoxItems.length;c++)(function(){var d=c;$(b.ctabBoxItems[d]).click(function(){b.Open.__index||(b.Open.__index=b.RetrunCurrentIndex(),b.Open.__id=$(b.ctabBoxItems[b.Open.__index]).attr("id").split("ctab-")[1]);if(b.Open.__index!=d){$(b.ctabBoxItems[d]).addClass("current");$(b.ctabBoxItems[b.Open.__index]).removeClass("current");switch($(b.ctabBoxItems[d]).attr("id")){case b.cItemDescription:b.itemDescription.css({display:"block"});
new loadScroll({container:"CorssPromotion1",nextButton:"js-corss-next",backButton:"js-corss-pre",commonCpBoxWarp:"js-corss-warp",commonCpBox:"js-corss-box",commonCpList:"js-corss-box > li",itemWidth:193,pageNum:"js-corss-pageNum",pageTotal:"js-corss-pageTotal",showFirst:"js-corss-showFirst"});$(".description-more").show();break;case b.cShippingAndPayment:b.shippingAndPayment.css({display:"block"});b.LoadShippingAndPayment();b.hideDescriptionMore();break;case b.cTransactionHistory:b.transactionHistory.css({display:"block"});
b.LoadTransactionHistory();b.hideDescriptionMore();break;case b.cProductReviews:b.productReviews.css({display:"block"}),b.LoadProductReviews(),b.hideDescriptionMore()}$("#"+b.Open.__id).css({display:"none"});b.Open.__index=d;b.Open.__id=$(b.ctabBoxItems[d]).attr("id").split("ctab-")[1]}})})()},hideDescriptionMore:function(){$(".description-more").hide();$(".description-more").hasClass("view-more-i")&&$(".description-more").removeClass("view-more-i").addClass("fewer-i").html("Fewer<i></i>")},AnchorPoint:function(){var b=
this;document.getElementById(this.anchorProductReviews)&&$("#"+this.anchorProductReviews).click(function(){var c=b.RetrunCurrentIndex(),d=$(b.ctabBoxItems[c]).attr("id").split("ctab-")[1];$(b.ctabBoxItems[c]).removeClass("current");$("#"+d).css({display:"none"});$("#"+b.cProductReviews).addClass("current");$("#"+b.cProductReviews.split("ctab-")[1]).css({display:"block"});b.productReviews.css({display:"block"});b.LoadProductReviews();b.Open.__index=b.RetrunCurrentIndex();b.Open.__id=$(b.ctabBoxItems[b.Open.__index]).attr("id").split("ctab-")[1];
gtag("event","pd-tab",{event_category:"Checkout-product",event_label:"customer review-top"})});document.getElementById(this.anchorTransactionHistory)&&$("#"+this.anchorTransactionHistory).click(function(){var c=b.RetrunCurrentIndex(),d=$(b.ctabBoxItems[c]).attr("id").split("ctab-")[1];$(b.ctabBoxItems[c]).removeClass("current");$("#"+d).css({display:"none"});$("#"+b.cTransactionHistory).addClass("current");$("#"+b.cTransactionHistory.split("ctab-")[1]).css({display:"block"});b.transactionHistory.css({display:"block"});
b.LoadTransactionHistory();b.Open.__index=b.RetrunCurrentIndex();b.Open.__id=$(b.ctabBoxItems[b.Open.__index]).attr("id").split("ctab-")[1];gtag("event","pd-tab",{event_category:"Checkout-product",event_label:"transaction-top"})})},RetrunCurrentIndex:function(){for(var b=0;b<this.ctabBoxItems.length;b++)if($(this.ctabBoxItems[b]).hasClass("current"))return b},LoadShippingAndPayment:function(){if("true"!=this.LoadShippingAndPayment.flag){var b=this;DH.request({url:b.shippingAndPayment.attr("init-src"),
type:"GET",dataType:"html",cache:!1,success:function(c){b.shippingAndPayment.removeAttr("init-src");b.shippingAndPayment.find("div").remove();b.shippingAndPayment.append(c);new interpret({openId:["stacQaIcon"],closeId:["stacQaClose"],contentId:["stacQa"]});new imitationSelect({selectWarp:["shippingSelect"],hiddenInput:["shippingSelectHiddenInput"],textInput:["shippingSelectInput"],arrow:["shippingSelectArrow"],list:["shippingSelectList"]})}});this.LoadShippingAndPayment.flag="true"}},LoadTransactionHistory:function(){if("true"!=
this.LoadTransactionHistory.flag){var b=this;DH.request({url:b.transactionHistory.attr("init-src"),type:"GET",dataType:"html",cache:!1,success:function(c){b.transactionHistory.removeAttr("init-src");b.transactionHistory.find("div").remove();b.transactionHistory.append(c);new historyTurnPage({historyParent:"transactionHistory"})}});this.LoadTransactionHistory.flag="true";gtag("event","pd-tab",{event_category:"Checkout-product",event_label:"transactionhis"})}},LoadProductReviews:function(){if("true"!=
this.LoadProductReviews.flag){gtag("event","pd-tab",{event_category:"Checkout-product",event_label:"customer review"});var b=this;DH.request({url:b.productReviews.attr("init-src"),type:"GET",dataType:"html",cache:!1,success:function(c){b.productReviews.removeAttr("init-src");b.productReviews.find("div").remove();b.productReviews.append(c);window.DH_Product_Reviews_Sign_PopUp||(window.DH_Product_Reviews_Sign_PopUp=new productReviewsSignPopUp);new PRScaling;window.DH_PR_IM_Popup||(window.DH_PR_IM_Popup=
new PRIMPopup);officialReviewInfo()}});this.LoadProductReviews.flag="true"}},OpenProductReviews:function(){if("yes"==this.QueryString("productreviews")&&document.getElementById(this.cProductReviews)){$(window).scrollTop($("#"+this.cProductReviews).offset().top);var b=this.RetrunCurrentIndex(),c=$(this.ctabBoxItems[b]).attr("id").split("ctab-")[1];$(this.ctabBoxItems[b]).removeClass("current");$("#"+c).css({display:"none"});$("#"+this.cProductReviews).addClass("current");$("#"+this.cProductReviews.split("ctab-")[1]).css({display:"block"});
this.productReviews.css({display:"block"});this.LoadProductReviews();this.Open.__index=this.RetrunCurrentIndex();this.Open.__id=$(this.ctabBoxItems[this.Open.__index]).attr("id").split("ctab-")[1]}},QueryString:function(b){return(b=location.search.match(new RegExp("[?&]"+b+"=([^&]*)(&?)","i")))?b[1]:b}};
var historyTurnPage=function(b){this.SetOptions(b);document.getElementById(this.options.historyParent)&&(this.historyParent=$("#"+this.options.historyParent),this.historyPage=$(this.options.historyPage),this.pageUrl=this.options.pageUrl,this._window=$(window),this.Init())};
historyTurnPage.prototype={SetOptions:function(b){this.options={historyParent:null,historyPage:".transaction-page",pageUrl:"/product/displayorder.do"};$.extend(this.options,b||{})},Init:function(){this.historyParent.data("history1",this.historyParent.html());this.Page()},Page:function(){var b=this;this.historyPage.live("click",function(c){switch(c.target.nodeName){case "A":b._window.scrollTop(b.historyParent.offset().top);b.Load($(c.target).attr("page"));break;case "EM":b._window.scrollTop(b.historyParent.offset().top),
b.Load($(c.target).parent("a").attr("page"))}})},Load:function(b){var c=this;c.historyParent.data("history"+b)?c.historyParent.html(c.historyParent.data("history"+b)):DH.request({url:this.pageUrl,type:"GET",dataType:"html",cache:!1,data:{act:"pageload",appid:"dh",page:b,prodLineId:_productlineid,productid:_pid,supplierid:_toid,itemcode:_itemcode},success:function(d){c.historyParent.data("history"+b,d);c.historyParent.html(c.historyParent.data("history"+b))}})}};
var feedbackTurnPage=function(b){this.SetOptions(b);document.getElementById(this.options.feedbackParent)&&(this.feedbackParent=$("#"+this.options.feedbackParent),this.feedbackPage=$(this.options.feedbackPage),this.pageUrl=this.options.pageUrl,this._window=$(window),this.Init())};
feedbackTurnPage.prototype={SetOptions:function(b){this.options={feedbackParent:null,feedbackPage:".transaction-feedback-page",pageUrl:"/product/displayfeedback.do"};$.extend(this.options,b||{})},Init:function(){this.feedbackParent.data("feedback1",this.feedbackParent.html());this.Page()},Page:function(){var b=this;this.feedbackPage.live("click",function(c){switch(c.target.nodeName){case "A":b._window.scrollTop(b.feedbackParent.offset().top);b.Load($(c.target).attr("page"));break;case "EM":b._window.scrollTop(b.feedbackParent.offset().top),
b.Load($(c.target).parent("a").attr("page"))}})},Load:function(b){var c=this;c.feedbackParent.data("feedback"+b)?c.feedbackParent.html(c.feedbackParent.data("feedback"+b)):DH.request({url:this.pageUrl,type:"GET",dataType:"html",cache:!1,data:{productid:_pid,supplierid:_toid,page:b},success:function(d){c.feedbackParent.data("feedback"+b,d);c.feedbackParent.html(c.feedbackParent.data("feedback"+b))}})}};
var productReviewsSignPopUp=function(b){this.SetOptions(b);document.getElementById(this.options.productReviewsSign)&&(this.productReviewsSign=$("#"+this.options.productReviewsSign),this.productReviewsSignContent=$("#"+this.options.productReviewsSignContent),this.productReviewsMask=$("#"+this.options.productReviewsMask),this.productReviewsMaskIframe=$("#"+this.options.productReviewsMaskIframe),this.productreviewsYesButton=$(this.options.productreviewsYesButton),this.productreviewsNoButton=$(this.options.productreviewsNoButton),
this.productReviewsSigncClose=this.options.productReviewsSigncClose,this.timer=null,this.isIE6=$.browser.msie&&"6.0"==$.browser.version,this.Init())};
productReviewsSignPopUp.prototype={SetOptions:function(b){this.options={productreviewsYesButton:".productreviews-yes",productreviewsNoButton:".productreviews-no",productReviewsSign:"productReviewsSign",productReviewsSignContent:"productReviewsSignContent",productReviewsMask:"productReviewsMask",productReviewsMaskIframe:"productReviewsMaskIframe",productReviewsSigncClose:"productReviewsSigncClose"};$.extend(this.options,b||{})},Init:function(){this.Load()},Load:function(){var b=this;this.productreviewsYesButton.live("click",
function(){b.ButtonFunction(this)});this.productreviewsNoButton.live("click",function(){b.ButtonFunction(this)})},ButtonFunction:function(b){var c=this;c.productReviewsSign.css({display:"block"});c.productReviewsMask.css({display:"block"});var d=$(b).attr("reviewid"),f=$(b).attr("reviewvalue"),e="<li class='li5 yes'>"+$L("detail_msg_productReviewsSignPopUp_successText_No")+"</li>",g="<li class='li5 yes'>"+$L("detail_msg_productReviewsSignPopUp_ownText")+"</li>",l="<li class='li5 yes'>"+$L("detail_msg_productReviewsSignPopUp_repeatedText")+
"</li>",h="<li class='li5 yes'>"+$L("detail_msg_productReviewsSignPopUp_successText_No")+"</li>";b="//"+_wwwURL+location.pathname+"?helpclick=yes&productreviews=yes";"true"!=$("#islogin").val()&&c.Resize();"true"!=$("#islogin").val()?DH.request({url:"/product/turnForSignin.do?returnURL="+escape(b),type:"GET",dataType:"html",cache:!1,success:function(b){c.productReviewsSignContent.html(b);c.productReviewsSign.css({visibility:"hidden"});$("#productReviewsSignButton").click(function(){c.checkSigninForm()});
c.Close();c.Load.first="true"}}):(DH.request({url:"//dg.dhgate.com/reviewweb/savereviewhelp.do",data:{act:"saveHelpfulInfo",reviewid:d,ishelpful:f},cache:!1,type:"get",dataType:"jsonp",success:function(b){b=b?b.result:null;var c="",m=b[0];0==m?(c=1==f?h:e,0<b[1]&&$(".yes_result_"+d).html("(<b>"+b[1]+"</b>)"),0<b[2]&&$(".no_result_"+d).html("(<b>"+b[2]+"</b>)")):-1==m?c=g:-2==m?c=l:-3==m&&(c=h);$(".result_div_"+d).html(c)}}),$("#productReviewsMask").css({display:"none"}))},checkSigninForm:function(){var b=
$L("detail_valid_singninFormName"),c=$L("detail_valid_signinFormPassword"),d=$L("detail_valid_signinFormSecurityCode"),f=$("#username").val(),e=$("#password").val(),g="",l="";$("#code_input").is(":visible")&&(g=$("#checkcode").val());if(0==f.length)return $("#errorBox").html(b),!1;if(0==e.length)return $("#errorBox").html(c),!1;if($("#code_input").is(":visible")&&0==g.length)return $("#errorBox").html(d),!1;DH.request({type:"post",async:!1,url:"/product/favorite.do?act=signinAndAdd",data:"username="+
f+"&password="+e+"&checkcode="+g,success:function(b){b&&""!=b&&(l=b)}});if(""!=l)return $("#errorBox").html(l),$("#MzImgExpPwd")&&$("#MzImgExpPwd").attr("src","/verifycode.jsp?width=205&height=45&fontsize=42&charlength=4&temp="+(new Date).getTime().toString(36)),$("#code_img").show(),$("#code_input").show(),!1;setTimeout(function(){document.productreviewsigninForm.submit()},1)},Resize:function(){var b=this;this.timer&&clearTimeout(this.timer);this.SetPosition();this.timer=setTimeout(function(){b.Resize()},
100)},SetPosition:function(){if("none"!=this.productReviewsSign.css("display")){var b,c,d,f,e,g,l;b=Math.min($(document).height(),$("body").outerHeight(!0));c=Math.min($(document).width(),$("body").outerWidth(!0));d=this.productReviewsSign.children("table").height();f=this.productReviewsSign.children("table").width();e=$(window).height();g=$(window).width();l=$(window).scrollTop();lScroll=$(window).scrollLeft();this.isIE6?(g=parseInt((g-f)/2+lScroll),e=parseInt((e-d)/2+l)):(g=parseInt((g-f)/2),e=
parseInt((e-d)/2));this.productReviewsSign.css({top:e,left:g,width:f,height:d});this.productReviewsMask.css({width:c,height:b,opacity:.5});this.productReviewsMaskIframe.css({width:c,height:b,opacity:0});"true"==this.Load.first&&this.productReviewsSign.css({visibility:"visible"})}},Close:function(){var b=this;$("."+this.productReviewsSigncClose).click(function(){b.productReviewsSignContent.html('<div class="popup-loading"></div>');b.productReviewsSign.css({display:"none"});b.productReviewsMask.css({display:"none"})})}};
var customOptionsPopUp=function(b){this.SetOptions(b);document.getElementById(this.options.customSizeWarp)&&(this.customSizeInfo=$("#"+this.options.customSizeInfo),this.customSizeWarp=$("#"+this.options.customSizeWarp),this.customOptions=$("#"+this.options.customOptions),this.customOptionsContent=$("#"+this.options.customOptionsContent),this.customOptionsMask=$("#"+this.options.customOptionsMask),this.hiddenAttrvalcm=$("#"+this.options.hiddenAttrvalcm),this.customOptionsMaskIframe=$("#"+this.options.customOptionsMaskIframe),
this.customOptionsYesButton=$(this.options.customOptionsYesButton),this.customOptionsSubmitButton=this.options.customOptionsSubmitButton,this.customOptionsClose=this.options.customOptionsClose,this.hiddenBuycustomSize=$("#"+this.options.hiddenBuycustomSize),this.customOptionsCancelButton=this.options.customOptionsCancelButton,this.timer=null,this.isIE6=$.browser.msie&&"6.0"==$.browser.version,this.colorListObject=this.options.colorListObject,this.Init())};
customOptionsPopUp.prototype={SetOptions:function(b){this.options={customSizeInfo:"customSizeInfo",customSizeWarp:"customSizeWarp",customOptionsYesButton:".customOptionsYesButton",customOptionsSubmitButton:"customOptionsSubmitButton",customOptions:"customOptions",hiddenAttrvalcm:"hiddenAttrvalcm",customOptionsContent:"customOptionsContent",customOptionsMask:"customOptionsMask",customOptionsMaskIframe:"customOptionsMaskIframe",customOptionsClose:"customOptionsClose",hiddenBuycustomSize:"hiddenBuycustomSize",
customOptionsCancelButton:"customOptionsCancelButton",colorListObject:null};$.extend(this.options,b||{})},Init:function(){for(var b=0;b<DH_Product_Properties_Color_Object.colorList.length;b++)if(DH_Product_Properties_Color_Object.colorList[b]==_customSize){this._index=DH_Product_Properties_Color_Object.colorList.length;break}this.Load();this.ControlList()},Load:function(){var b=this,c="";this.customOptionsYesButton.live("click",function(d){if("LI"!=d.target.nodeName||$(d.target).hasClass("color-selected"))if(b.customOptions.css({display:"block"}),
b.customOptionsMask.css({display:"block"}),b.Resize(),"true"!=b.Load.flag){c=$.trim(b.hiddenBuycustomSize.attr("attrvalid"));if(null!=$("#hiddenIamgeUrl").val()||""!=$("#hiddenIamgeUrl").val())imageUrl=escape($("#hiddenIamgeUrl").val());DH.request({url:"/product/turnForProdCm.do",type:"GET",dataType:"html",cache:!1,data:{attrValId:c,iamgeUrl:imageUrl,catePubId:_pro_catepubid},success:function(c){b.customOptions.find("div").remove();b.customOptionsContent.html(c);b.customOptions.css({visibility:"hidden"});
b.CheckInput();b.checkRemarkLength();b.Submit();b.Close();b.Load.first="true";new imitationSelect({selectWarp:["customSizeUnitWarp"],hiddenInput:["customSizeHiddenInput"],textInput:["customSizeInput"],arrow:["customSizeSelectArrow"],list:["customSizeUnitSelectList"]});b.ChangeUnit()}});b.Load.flag="true"}})},Resize:function(){var b=this;this.timer&&clearTimeout(this.timer);this.SetPosition();this.timer=setTimeout(function(){b.Resize()},100)},SetPosition:function(){if("none"!=this.customOptions.css("display")){var b,
c,d,f,e,g,l;b=Math.min($(document).height(),$("body").outerHeight(!0));c=Math.min($(document).width(),$("body").outerWidth(!0));d=this.customOptions.children("table").height();f=this.customOptions.children("table").width();e=$(window).height();g=$(window).width();l=$(window).scrollTop();lScroll=$(window).scrollLeft();this.isIE6?(g=parseInt((g-f)/2+lScroll),e=parseInt((e-d)/2+l)):(g=parseInt((g-f)/2),e=parseInt((e-d)/2));this.customOptions.css({top:e,left:g,width:f,height:d});this.customOptionsMask.css({width:c,
height:b,opacity:.5});this.customOptionsMaskIframe.css({width:c,height:b,opacity:0});"true"==this.Load.first&&this.customOptions.css({visibility:"visible"})}},ControlList:function(){var b=this;this.customSizeWarp.click(function(c){"LI"==c.target.nodeName&&void 0!=b.colorListObject.ClickItems.__index[b._index-1]&&($(b.customOptionsYesButton[1]).css({display:"none"}),b.customSizeInfo.css({display:"none"}))})},Submit:function(){var b=this,c,d="",f="",e="";$("#"+this.customOptionsSubmitButton).click(function(){var g=
!0;c=$("input[name='textinput']");c.each(function(b){""==$.trim($(c[b]).val())&&(g=!1)});g&&(b.customOptions.css({display:"none"}),b.customOptionsMask.css({display:"none"}),b.customSizeInfo.css({display:"block"}),d=b.hiddenBuycustomSize.attr("attrvalid")+",",c.each(function(b){f=""==f?$(c[b]).attr("attrvalcmid")+"_"+$(c[b]).val():f+"-"+$(c[b]).attr("attrvalcmid")+"_"+$(c[b]).val();e=""==e?"<span>"+$(c[b]).attr("attrvalcmName")+": <b>"+$(c[b]).val()+"</b> "+$("#customSizeInput").val()+"</span>":e+
",<span>"+$(c[b]).attr("attrvalcmName")+": <b>"+$(c[b]).val()+"</b> "+$("#customSizeInput").val()+"</span>"}),d+=f,b.hiddenAttrvalcm.val(d),b.customSizeInfo.html(e),$("#hiddenunit").val($("#customSizeInput").val()),$("#customattr").val(d),$("#hiddenRemark").val($("#remarksText").val()),$(b.customOptionsYesButton[1]).css({display:"block"}),e=f=d="")})},CheckInput:function(){var b,c=/^(\+|-)?\d+($|\.\d+$)/;b=$("input[name='textinput']");b.each(function(d){$(b[d]).blur(function(f){c.test($(b[d]).val())||
$(b[d]).val("")})})},getsubString:function(b,c){var d=b.replace(/[^\x00-\xff]|[\r\n]/g,"xx").length,f,e=0,g="";if(d<=c)return b;for(var l=0;l<d;l++){f=b.charAt(l).toString();null!=f.match(/[^\x00-\xff]|[\r\n]/g)?e+=2:e++;if(e>c)break;g+=f}return g},checkRemarkLength:function(){var b=this;$("#remarksText").blur(function(c){c=$("#remarksText").val();2E3<c.replace(/[^\x00-\xff]|[\r\n]/g,"xx").length&&($("#remarksText").val(b.getsubString(c,2E3)),$("#remarksText").focus())})},Close:function(){var b=this;
$("#"+this.customOptionsClose).click(function(){"none"==b.customSizeInfo.css("display")&&($(b.customOptionsYesButton[0]).removeClass("color-selected").children("i").remove(),b.colorListObject.ClickItems.__index[b._index-1]=void 0);b.customOptions.css({display:"none"});b.customOptionsMask.css({display:"none"})});$("#"+this.customOptionsCancelButton).click(function(){"none"==b.customSizeInfo.css("display")&&($(b.customOptionsYesButton[0]).removeClass("color-selected").children("i").remove(),b.colorListObject.ClickItems.__index[b._index-
1]=void 0);b.customSizeWarp.find("ul li").eq(0).click();b.customOptions.css({display:"none"});b.customOptionsMask.css({display:"none"})})},ChangeUnit:function(){$("#customSizeUnitSelectList").click(function(b){"LI"==b.target.nodeName&&(b=$(b.target).text(),$(".wedding-unit").text(b))})}};
var favoriteItemsPopup=function(b){this.SetOptions(b);document.getElementById(this.options.favoriteItemsButton)&&(this.favoriteItemsButton=$("#"+this.options.favoriteItemsButton),this.favoriteItemsInfo=$("#"+this.options.favoriteItemsInfo),this.favoriteItemsInfoContent=$("#"+this.options.favoriteItemsInfoContent),this.favoriteItemsInfoMask=$("#"+this.options.favoriteItemsInfoMask),this.favoriteItemsInfoMaskIframe=$("#"+this.options.favoriteItemsInfoMaskIframe),this.favoriteInner=this.options.favoriteInner,
this.timer=null,this.isIE6=$.browser.msie&&"6.0"==$.browser.version,this.Init(),this.favoriteItemsInfoMask.css({"z-index":999}),this.favoriteItemsInfoMaskIframe.css({"z-index":998}))};
favoriteItemsPopup.prototype={SetOptions:function(b){this.options={favoriteItemsButton:"favoriteItemsButton",favoriteItemsInfo:"favoriteItemsInfo",favoriteItemsInfoContent:"favoriteItemsInfoContent",favoriteItemsInfoMask:"favoriteItemsInfoMask",favoriteItemsInfoMaskIframe:"favoriteItemsInfoMaskIframe",favoriteItemsSignButton:"favoriteItemsSignButton",favoriteInner:"wish-list-popup-inner",favoriteItemsClose:"favoriteItemsClose",favoriteFacebook:"favoriteFacebook",favoriteGoogle:"favoriteGoogle"};$.extend(this.options,
b||{})},Init:function(){this.Load()},Load:function(){var b=this;b.favoriteItemsButton.click(function(){b.favoriteItemsInfo.css({display:"block"});b.favoriteItemsInfoMask.css({display:"block"});b.GetUserStatus()?b.Favorite():b.SignIn();b.Resize()})},SignIn:function(){var b=this,c=location.hash;""!=c&&null!=c&&(c=c.substr(1));DH.request({url:$("#favorite-wrap").attr("init-src")+"&impressionInfo="+c,type:"GET",dataType:"html",cache:!1,success:function(c){b.favoriteItemsInfoContent.find("div").remove();
b.favoriteItemsInfoContent.append(c);b.favoriteItemsInfo.css({visibility:"hidden"});b.favoriteItemsSignButton=$("#"+b.options.favoriteItemsSignButton);b.favoriteItemsSignButton.click(function(){var b=$("#favorUsername").val(),c=$("#favorPassword").val(),d="";$("#codeInput").is(":visible")&&(d=$("#favorCheckcode").val());var l="";if(""==b)return $("#wish-list-sign-notice").show(),$("#wish-list-sign-notice").html($L("detail_valid_singninFormName")),!1;if(""==c)return $("#wish-list-sign-notice").show(),
$("#wish-list-sign-notice").html($L("detail_valid_signinFormPassword")),!1;if($("#codeInput").is(":visible")&&""==d)return $("#wish-list-sign-notice").show(),$("#wish-list-sign-notice").html($L("detail_valid_signinFormSecurityCode")),!1;DH.request({type:"post",async:!1,url:"/product/favorite.do?act=signinAndAdd",data:"username="+b+"&password="+c+"&checkcode="+d,success:function(b){b&&""!=b&&(l=b)}});if(""!=l)return $("#wish-list-sign-notice").show(),$("#wish-list-sign-notice").html(l),$("#favorMzImgExpPwd")&&
$("#favorMzImgExpPwd").attr("src","/verifycode.jsp?width=205&height=45&fontsize=42&charlength=4&temp="+(new Date).getTime().toString(36)),$("#codeImg").show(),$("#codeInput").show(),!1;-1==document.location.href.indexOf("actionOnload=addFavor")?0<document.location.href.indexOf("?")?$("#favorSigninReturnURL").val(document.location.href+"&actionOnload=addFavor"):$("#favorSigninReturnURL").val(document.location.href+"?actionOnload=addFavor"):$("#favorSigninReturnURL").val(document.location.href);$("#favorSigninReturnURL").val(document.location.href+
"?actionOnload=addFavor");$("#favorSigninForm").submit()});b.favoriteItemsClose=b.options.favoriteItemsClose;b.GetUserStatus();b.Close();b.favoriteFacebook=$("#"+b.options.favoriteFacebook);b.favoriteGoogle=$("#"+b.options.favoriteGoogle);b.favoriteFacebook.bind("click",function(){window.signIn&&signIn.paltformLogin("facebook",{onSuccess:function(b,c,d){b=location.href;b=b.replace(/\#.*/,"");b=b+(/\?/.test(b)?"&":"?")+"actionOnload=addFavor";location.href=b}});b.favoriteItemsInfo.css({display:"none"});
b.favoriteItemsInfoContent.html('<div class="popup-loading"></div>');b.favoriteItemsInfoMask.css({display:"none"})});b.favoriteGoogle.bind("click",function(){window.signIn&&signIn.paltformLogin("google+",{onSuccess:function(b,c,d){b=location.href;b=b.replace(/\#.*/,"");b=b+(/\?/.test(b)?"&":"?")+"actionOnload=addFavor";location.href=b}});b.favoriteItemsInfo.css({display:"none"});b.favoriteItemsInfoContent.html('<div class="popup-loading"></div>');b.favoriteItemsInfoMask.css({display:"none"})})}})},
GetUserStatus:function(){return"true"==$("#islogin").val()},Favorite:function(){"N"==this.favoriteCollection&&(this.favoriteInner.html(this.haveFavorite+this.recommedPro),this.favoriteCollection="y",delete this.noFavorite,delete this.haveFavorite,delete this.recommedPro);if("y"!=this.favoriteCollection){var b=this;DH.request({url:$("#favorite-wrap").attr("init-src"),type:"GET",dataType:"html",cache:!1,success:function(c){b.favoriteItemsInfoContent.html(c);b.favoriteItemsClose=b.options.favoriteItemsClose;
b.favoriteItemsInfo.css({visibility:"hidden"});b.Close();$("#favor-recommend-product").load($("#favoriteCommandInfo").attr("init-src"))}})}},Resize:function(){var b=this;this.timer&&clearTimeout(this.timer);this.SetPosition();this.timer=setTimeout(function(){b.Resize()},100)},SetPosition:function(){if("none"!=this.favoriteItemsInfo.css("display")){var b,c,d,f,e,g,l;b=$(document).height();c=Math.min($(document).width(),$("body").outerWidth(!0));d=this.favoriteItemsInfo.children("table").height();f=
this.favoriteItemsInfo.children("table").width();e=$(window).height();g=$(window).width();l=$(window).scrollTop();lScroll=$(window).scrollLeft();this.isIE6?(g=parseInt((g-f)/2+lScroll),e=parseInt((e-d)/2+l)):(g=parseInt((g-f)/2),e=parseInt((e-d)/2));this.favoriteItemsInfo.css({top:e,left:g,width:f,height:d});this.favoriteItemsInfoMask.css({width:c,height:b,opacity:.5});this.favoriteItemsInfoMaskIframe.css({width:c,height:b,opacity:0});this.favoriteItemsInfo.css({visibility:"visible"})}},Close:function(){var b=
this;$("#"+this.favoriteItemsClose).click(function(){b.favoriteItemsInfo.css({display:"none"});b.favoriteItemsInfoContent.html('<div class="popup-loading"></div>');b.favoriteItemsInfoMask.css({display:"none"})});$("#favorContinueShopping").click(function(){b.favoriteItemsInfo.css({display:"none"});b.favoriteItemsInfoContent.html('<div class="popup-loading"></div>');b.favoriteItemsInfoMask.css({display:"none"})})}};
function firstBImageLoad(){firstBImageLoad.firstBImageTime&&clearTimeout(firstBImageLoad.firstBImageTime);window.firstBImageReady?new maskMagnifier({eventType:"hover"}):firstBImageLoad.firstBImageTime=setTimeout(firstBImageLoad,50)}var EmbedFeedBackLoad=function(b){this.SetOptions(b);document.getElementById(this.options.iframeFeedBack)&&(this.iframeFeedBack=$("#"+this.options.iframeFeedBack),this.feedBackControl=$("#"+this.options.feedBackControl),this.FBTimer2=this.FBTimer1=null,this.Init())};
EmbedFeedBackLoad.prototype={SetOptions:function(b){this.options={iframeFeedBack:"iframeFeedBack",feedBackControl:"feedBackControl"};$.extend(this.options,b||{})},Init:function(){this.Load()},Load:function(){var b=this;$(document).click(function(c){c=$(c.target);"yesfeedback"==c.attr("rel")&&(c.parent().addClass("current").siblings().removeClass("current"),b.showFeedBackInfo("yesfeedback"));"nofeedback"==c.attr("rel")&&(c.parent().addClass("current").siblings().removeClass("current"),b.showFeedBackInfo("nofeedback"))})},
showFeedBackInfo:function(b){var c=this;this.FBTimer1&&clearTimeout(this.FBTimer1);var d=this.iframeFeedBack.attr("init-src");d&&this.iframeFeedBack.removeAttr("init-src").attr("src",d);if((d=c.getFeedBackData())&&d.getElementById("question2105")){var f=d.getElementById("question2105").getElementsByTagName("label");if("yesfeedback"==b){var e=d.getElementById(f[0].getAttribute("for"));e||(e=d.getElementById(f[0].getAttribute("htmlFor")));e.click()}"nofeedback"==b&&((e=d.getElementById(f[1].getAttribute("for")))||
(e=d.getElementById(f[1].getAttribute("htmlFor"))),e.click());this.getFeedBackHeight()}else this.FBTimer1=setTimeout(function(){c.showFeedBackInfo(b)},500)},getFeedBackHeight:function(){var b=this;this.FBTimer2&&clearTimeout(this.FBTimer2);var c=b.getFeedBackData();$$height=$(c.body).height();this.iframeFeedBack.css({height:$$height});this.FBTimer2=setTimeout(function(){b.getFeedBackHeight()},500)},getFeedBackData:function(){try{return FBDocument=(document.frames?document.frames.iframeFeedBack:document.getElementById("iframeFeedBack").contentWindow).document}catch(b){}}};
function pageviewevent(){try{var b=location.hash,c="",d="",f="",e=$("#displaypriceAB").val();if(""!=b&&null!=b)var b=b.substr(1),g=b.split("-"),f=g[0],c=g[1],d=g[2];_dhq.push(["setVar","pic",_itemcode]);_dhq.push(["setVar","clkloc",f]);_dhq.push(["setVar","pos",c]);_dhq.push(["setVar","type",d]);_dhq.push(["setVar","cid",_catelogID]);_dhq.push(["setVar","supplierid",_toid]);_dhq.push(["setVar","catepubid",_pro_catepubid]);_dhq.push(["setVar","version",e]);_dhq.push(["event","Item_U0001"])}catch(l){}}
function initDetailedSellerRatings(){$("#loadSellerInformation_new").delegate("#detailedSellerRatings","mouseover",function(){$("#sellerinfoRatingspop").show()})}function initCloseSellerinfoRatingspop(){$("#loadSellerInformation_new").delegate("#detailedSellerRatings","mouseout",function(){$("#sellerinfoRatingspop").hide()})}
function initStLiClick(){$("#planchoosebox li").click(function(){0<=($(this).attr("class")||"").indexOf("this")?$(this).removeClass("this"):($("#oneYearSt").removeClass("this"),$("#twoYearSt").removeClass("this"),$(this).addClass("this"))})}
function initbuyStLiClick(){$("#buyplanchoosebox li").click(function(){0<=($(this).attr("class")||"").indexOf("this")?($(this).removeClass("this"),$("#buyStYesBtnSpan").removeClass("n-yellow-button"),$("#buyStYesBtnSpan").addClass("n-unclick-button"),$("#buyStYesBtn").attr("disabled",!0),$("#buyStYesBtn").unbind("click",buyStYesBtnClick)):($("#buyoneYearSt").removeClass("this"),$("#buytwoYearSt").removeClass("this"),$(this).addClass("this"),$("#buyStYesBtnSpan").removeClass("n-unclick-button"),$("#buyStYesBtnSpan").addClass("n-yellow-button"),
$("#buyStYesBtn").attr("disabled",!1),$("#buyStYesBtn").bind("click",buyStYesBtnClick))})}function stockIn(){}
function buyStYesBtnClick(){var b=$("#hiddenCountry").val();$("#shipCoutry").val(b);var b=$("#buyplanchoosebox .this"),c="";0<b.length&&(b=$(b[0]).attr("id"),c=$("#"+b+"AddCart").val());if(""!=c)for(b=c.split("&"),c=0;c<b.length;c++){var d=b[c].split("=");"stSkuId"==d[0]&&$("#stSkuId").val(d[1]);"stSkuMd5"==d[0]&&$("#stSkuMd5").val(d[1]);"stItemCode"==d[0]&&$("#stItemCode").val(d[1]);"stSupplierid"==d[0]&&$("#stSupplierid").val(d[1])}b=$("#selectedSkuVal").val();b=$("[vhidden="+b+"]");c="";0<b.length&&
(c=$(b[0]).attr("prominfooldprice"),c=""==c?$(b[0]).attr("price"):c,b=$("#radixUnit").val(),c/=b);$("#productToSTPrice").val(c);dhgateBtnTrackST("pdbn");document.productdisplayForm.submit()}function buyStNoBtnClick(){$("#stSkuId").val("");$("#stSkuMd5").val("");$("#stItemCode").val("");var b=$("#hiddenCountry").val();$("#shipCoutry").val(b);dhgateBtnTrackST("pdbn");document.productdisplayForm.submit()}
function dhgateBtnTrackST(b){_dhq=_dhq||[];_dhq.push(["setVar","itemcode",_itemcode]);_dhq.push(["setVar","cid",_pro_catalogid]);_dhq.push(["setVar","pid",_pid]);_dhq.push(["pageview",b])}var PRScaling=function(b){this.SetOptions(b);this.imgs=$(this.options.warp+" img");this.sSize=this.options.smallSize.split("|");this.bSize=this.options.bigSize.split("|");this.Init()};
PRScaling.prototype={SetOptions:function(b){this.options={warp:".picture-review",smallSize:"100|100",bigSize:"500|450"};$.extend(this.options,b||{})},Init:function(){this.Scaling()},Scaling:function(){for(var b=this,c,d,f=0;f<this.imgs.length;f++)(function(){var e=f,g=new Image;$(g).load(function(){c=b.AutoScalingIMG(this,b.sSize[0],b.sSize[1]);d=b.AutoScalingIMG(this,b.bSize[0],b.bSize[1]);b.imgs[e].width=c[0];b.imgs[e].height=c[1];b.imgs[e].style.visibility="visible";$(b.imgs[e]).attr({bigSize:d.join("|")});
g=new Image});g.src=b.imgs[e].src})()},AutoScalingIMG:function(b,c,d){var f,e;0<b.width&&0<b.height&&(b.width/b.height>=c/d?b.width>c?(f=c,e=b.height*c/b.width):(f=b.width,e=b.height):b.height>d?(e=d,f=b.width*d/b.height):(f=b.width,e=b.height));new Image;return[parseInt(f),parseInt(e)]}};var PRIMPopup=function(b){this.SetOptions(b);this.sSize=this.options.smallSize.split("|");this.bSize=this.options.bigSize.split("|");this.timer=null;this.isIE6=$.browser.msie&&"6.0"==$.browser.version;this.Init()};
PRIMPopup.prototype={SetOptions:function(){this.options={warp:".picture-review",productReviewMedia:"productReviewMedia",productReviewMediaContent:"productReviewMediaContent",productReviewMediaMask:"productReviewMediaMask",productReviewMediaMaskIframe:"productReviewMediaMaskIframe",reviewMediaBig:"reviewMediaBig",reviewMediaSmall:"reviewMediaSmall",smallSize:"70|70",bigSize:"500|450"}},Init:function(){document.getElementById(this.options.productReviewMedia)||$("body").append('<div id="productReviewMedia" style="display:none;"><table class="popup-frame"><tr><td class="tLt"></td><td class="tMid"></td><td class="tRi"></td></tr><tr><td class="mLt"></td><td id="productReviewMediaContent" class="mMid"><div class="popup-loading"></div></td><td class="mRi"></td></tr><tr><td class="bLt"></td><td class="bMid"></td><td class="bRi"></td></tr></table></div><div id="productReviewMediaMask" style="display:none;"><iframe id="productReviewMediaMaskIframe"></iframe></div>');
this.productReviewMedia=$("#"+this.options.productReviewMedia);this.productReviewMediaContent=$("#"+this.options.productReviewMediaContent);this.productReviewMediaMask=$("#"+this.options.productReviewMediaMask);this.productReviewMediaMaskIframe=$("#"+this.options.productReviewMediaMaskIframe);this.Open()},Open:function(){var b=this;$(document).click(function(c){var d=c.target;c=$(d);if("pictureplayer"==c.attr("rel")){for(var f=$(b.options.warp),e={},g=0;g<f.length;g++)if(parseInt($(f[g]).css("width"))&&
parseInt($(f[g]).css("height"))){e[g]=[];for(var l=$(f[g]).find("img"),h=0;h<l.length;h++)$(l[h]).attr({pindex:g}),e[g].push(l[h])}for(var m=h="",n,p,f=[],l=[],g=c.attr("pindex"),e=e[g],h=h+('<ul id="'+b.options.reviewMediaSmall+'">'),m=m+('<ul id="'+b.options.reviewMediaBig+'">'),g=0;g<e.length;g++)"visible"==$(e[g]).css("visibility")?(n=$(e[g]).attr("bigsize").split("|"),p=n[0],n=n[1],d!=e[g]?(m+='<li><span><img width="'+p+'" height="'+n+'" src="'+e[g].src+'"></span></li>',h+='<li><span><img cindex="'+
g+'" width="'+e[g].width+'" height="'+e[g].height+'" rel="prSwitching" src="'+e[g].src+'"></span></li>'):(m+='<li style="z-index:2;"><span><img width="'+p+'" height="'+n+'" src="'+e[g].src+'" bigsize="250|250"></span></li>',h+='<li class="current"><span><img cindex="'+g+'" width="'+e[g].width+'" height="'+e[g].height+'" rel="prSwitching" src="'+e[g].src+'"></span></li>',b.cIndex=g)):"hidden"==$(e[g]).css("visibility")&&(m+="<li><span></span></li>",h+="<li><span></span></li>",f.push(e[g]),l.push(g));
d='<div class="mMid-inner"><div class="product-review-picture-inner"><div class="reviewMediaStage">'+(m+"</ul>")+(h+"</ul>")+'<span id="productReviewMediaClose" rel="close"></span></div></div></div>';gtag("event","customer reviews",{event_category:"Checkout-product",event_label:"pic"});b.Insert(d);b.Control();f.length&&b.Scaling(f,l)}"videoplayer"==c.attr("rel")&&(d='<div class="mMid-inner"><div class="product-review-video-inner"><iframe width="600" height="480" src="'+c.attr("init-src")+'" frameborder="0" allowfullscreen></iframe><span id="productReviewMediaClose" rel="close"></span></div></div>',
gtag("event","customer reviews",{event_category:"Checkout-product",event_label:"video"}),b.Insert(d),b.Control())})},Insert:function(b){this.productReviewMedia.css({display:"block"});this.productReviewMediaMask.css({display:"block"});this.productReviewMedia.find("div").remove();this.productReviewMediaContent.html(b);this.productReviewMedia.css({visibility:"hidden"});this.reviewMediaBigList=$("#"+this.options.reviewMediaBig+" li");this.reviewMediaSmallList=$("#"+this.options.reviewMediaSmall+" li");
this.Open.first="true";this.Resize()},Control:function(){var b=this;b.Control.flag||this.productReviewMedia.click(function(c){c.stopPropagation();c=c.target;var d=$(c);switch(!0){case "SPAN"==c.nodeName&&"close"==d.attr("rel"):b.productReviewMedia.css({display:"none"});b.productReviewMediaMask.css({display:"none"});b.productReviewMediaContent.html('<div class="popup-loading"></div>');break;case "IMG"==c.nodeName&&"prSwitching"==d.attr("rel"):c=d.attr("cindex");if(c==b.cIndex)return;$(b.reviewMediaBigList[b.cIndex]).css({"z-index":1});
$(b.reviewMediaSmallList[b.cIndex]).removeClass("current");$(b.reviewMediaBigList[c]).css({"z-index":2});$(b.reviewMediaSmallList[c]).addClass("current");b.cIndex=c}b.Control.flag=!0})},Resize:function(){var b=this;this.timer&&clearTimeout(this.timer);this.SetPosition();this.timer=setTimeout(function(){b.Resize()},100)},SetPosition:function(){if("none"!=this.productReviewMedia.css("display")){var b,c,d,f,e,g,l;b=Math.min($(document).height(),$("body").outerHeight(!0));c=Math.min($(document).width(),
$("body").outerWidth(!0));d=this.productReviewMedia.children("table").height();f=this.productReviewMedia.children("table").width();e=$(window).height();g=$(window).width();l=$(window).scrollTop();lScroll=$(window).scrollLeft();this.isIE6?(g=parseInt((g-f)/2+lScroll),e=parseInt((e-d)/2+l)):(g=parseInt((g-f)/2),e=parseInt((e-d)/2));this.productReviewMedia.css({top:e,left:g,width:f,height:d});this.productReviewMediaMask.css({width:c,height:b,opacity:.5});this.productReviewMediaMaskIframe.css({width:c,
height:b,opacity:0});"true"==this.Open.first&&this.productReviewMedia.css({visibility:"visible"})}},Scaling:function(b,c){for(var d=this,f,e,g=0;g<b.length;g++)(function(){var l=g,h=new Image;$(h).load(function(){f=d.AutoScalingIMG(this,d.sSize[0],d.sSize[1]);e=d.AutoScalingIMG(this,d.bSize[0],d.bSize[1]);$(d.reviewMediaBigList[c[l]]).html('<span><img width="'+e[0]+'" height="'+e[1]+'" src="'+this.src+'"></span>');$(d.reviewMediaSmallList[c[l]]).html('<span><img cindex="'+c[l]+'" width="'+f[0]+'" height="'+
f[1]+'" rel="prSwitching" src="'+this.src+'"></span>');h=new Image});h.src=b[l].src})()},AutoScalingIMG:function(b,c,d){var f,e;0<b.width&&0<b.height&&(b.width/b.height>=c/d?b.width>c?(f=c,e=b.height*c/b.width):(f=b.width,e=b.height):b.height>d?(e=d,f=b.width*d/b.height):(f=b.width,e=b.height));new Image;return[parseInt(f),parseInt(e)]}};
function officialReviewInfo(){for(var b=$(".official-review-warp"),c=0;c<b.length;c++)$(b[c]).mouseenter(function(){$(this).children(".official-review-content").css({display:"block"})}).mouseleave(function(){$(this).children(".official-review-content").css({display:"none"})})}var ShowActivityPrompt=function(b){this.SetOptions(b);this.activityPrompts=$("#"+this.options.activityPrompts);this.Init()};
ShowActivityPrompt.prototype={SetOptions:function(b){this.options={activityPrompts:"activityPrompts"};$.extend(this.options,b||{})},Init:function(){var b=this;DH.request({url:"/common/buyertime.do?act=getPromotionBannerInfo",type:"GET",dataType:"json",cache:!1,success:function(c){if(null!=c)try{if(""!=c.imgsrc&&"null"!=c.imgsrc&&null!=c.imgsrc&&""!=c.url&&"null"!=c.url&&null!=c.url){var d="",d=d+('<div class="activitywrapper"><a rel="nofollow" target="_blank" href="'+c.url+'"><img src="'+c.imgsrc+
'" /></a></div>');b.activityPrompts.html(d);b.activityPrompts.css({background:c.bgcolor})}}catch(f){void 0!==window.console&&console.log&&console.log(f)}}})}};var countDownInterface=function(){this.getServerTime()};countDownInterface.prototype.getServerTime=function(){var b=this;$.ajax({url:"/common/buyertime.do",type:"GET",dataType:"jsonp",cache:!1,success:function(c){b.serverTime=1*c.time}})};
countDownInterface.prototype.setRemainingTime=function(b,c,d){for(var f,e,g,l=0,h=c.length;l<h;l++)_related=c[l],$related=$(c[l]),f=$related.attr(d).split("|"),e=(new Date(f[1])).getTime(),g=(new Date(f[2])).getTime(),_related.discount=f[0],_related.dname=f[3],b<g?_related.active=Math.floor((g-b)/1E3):b<e?_related.ready=Math.floor((e-b)/1E3):b>g&&(_related.end=!0)};var DH_CountDownInterface=new countDownInterface;
function salesPromotionCountDown(b,c){salesPromotionCountDown.timer&&clearTimeout(salesPromotionCountDown.timer);var d,f;if(d=DH_CountDownInterface.serverTime){f=$(b+"["+c+"]");if(!f[0])return;DH_CountDownInterface.setRemainingTime(d,f,c);d=0;for(var e=f.length;d<e;d++)salesPromotionCountDown.run(f[d]);salesPromotionCountDown.sum=0;salesPromotionCountDown.checkTime();if(DH_CountDownInterface.serverTime){delete DH_CountDownInterface.serverTime;return}}salesPromotionCountDown.timer=setTimeout(function(){salesPromotionCountDown(b,
c)},300)}salesPromotionCountDown.run=function(b){b.discount=b.discount;b.active&&(b.curTimeout=salesPromotionCountDown.createSingleTimeout(b),b.curTimeout())};
salesPromotionCountDown.createSingleTimeout=function(b){return function(){b.timer&&clearTimeout(b.timer);var c=$(b),d,f,e;d=Math.floor(b.active/86400);f=Math.floor(b.active/3600)%24;e=Math.floor(b.active/60)%60;if(1<parseInt(d,10))d="<span>"+d+" days </span>left!";else if(0<parseInt(f,10)||0<parseInt(e,10))d="<span>"+f+" hours "+e+" mins</span> left!";else return;b.active--;b.dname?c.html('<span class="discountnum"><span>$'+b.discount+'</span> OFF,</span><span class="discountime">'+d+"</span>"):c.html('<span class="discountnum"><span>'+
b.discount+'% </span> OFF,</span><span class="discountime">'+d+"</span>");b.timer=setTimeout(function(){b.curTimeout()},1E3)}};salesPromotionCountDown.checkTime=function(){180==salesPromotionCountDown.sum&&(DH_CountDownInterface.getServerTime(),salesPromotionCountDown("span","discountCountDown"));salesPromotionCountDown.time1&&clearTimeout(salesPromotionCountDown.time1);salesPromotionCountDown.time1=setTimeout(function(){salesPromotionCountDown.sum++;salesPromotionCountDown.checkTime()},1E3)};
var IcoHoverOut=function(b){this.SetOptions(b);this.hoverIco=this.options.hoverIco;this.hoverContent=this.options.hoverContent;this.closeIco=this.options.closeIco;this.Init()};
IcoHoverOut.prototype={SetOptions:function(b){this.options={hoverIco:["playNoteLink"],hoverContent:["playNoteInfo"],closeIco:["playNoteClose"]};$.extend(this.options,b||{})},Init:function(){this.timer={};this.hovi={};this.hcon={};this.closei={};for(var b=0;b<this.hoverIco.length;b++)document.getElementById(this.hoverIco[b])&&(this.timer[b]={},this.hovi[b]=$("#"+this.hoverIco[b]),this.hcon[b]=$("#"+this.hoverContent[b]),this.closei[b]=$("#"+this.closeIco[b]));this.Active()},Active:function(){var b=
this,c;for(c in this.hovi)this.hovi[c][0].guid=c,this.hcon[c][0].guid=c,this.closei[c][0].guid=c,this.hovi[c].mouseenter(function(){var c=$(this);b.timer[this.guid]&&clearTimeout(b.timer[this.guid]);b.hcon[this.guid].css({display:"block",left:c.offset().left+2*c.width()-b.hcon[this.guid].width(),top:c.offset().top+c.height()+3})}).mouseleave(function(){var c=this;$(this);b.timer[this.guid]=setTimeout(function(){b.hcon[c.guid].css({display:"none"})},50)}),this.hcon[c].mouseenter(function(){b.timer[this.guid]&&
clearTimeout(b.timer[this.guid])}).mouseleave(function(){var c=this;b.timer[this.guid]=setTimeout(function(){b.hcon[c.guid].css({display:"none"})},50)}),this.closei[c].click(function(){b.hcon[this.guid].css({display:"none"})})}};
function toggleCategories(){var b=$("#moreLink"),c=$("#moreMultidimensioncate");b.click(function(){"none"==c.css("display")?($(this).attr("class","moreactive"),$(this).html($L("common_fewer")),c.show()):"block"==c.css("display")&&($(this).attr("class","morebtn"),$(this).html($L("common_more")),c.hide())})}
var GetCouponPopup=function(b){this.SetOptions(b);document.getElementById(this.options.getcouponButton)&&(this.getcouponWrap=$("#"+this.options.getcouponWrap),this.getcouponButton=$("#"+this.options.getcouponButton),this.getCouponInfo=$("#"+this.options.getCouponInfo),this.getCouponInfoContent=$("#"+this.options.getCouponInfoContent),this.getCouponInfoMask=$("#"+this.options.getCouponInfoMask),this.getCouponInfoMaskIframe=$("#"+this.options.getCouponInfoMaskIframe),this.getcouponClose=$("#"+this.options.getcouponClose),
this.timer=null,this.isIE6=$.browser.msie&&"6.0"==$.browser.version,this.Init())};
GetCouponPopup.prototype={SetOptions:function(b){this.options={getcouponWrap:"getcouponWrap",getcouponButton:"getcouponButton",getCouponInfo:"getCouponInfo",getCouponInfoContent:"getCouponInfoContent",getCouponInfoMask:"getCouponInfoMask",getCouponInfoMaskIframe:"getCouponInfoMaskIframe",getcouponSignButton:"getcouponSignButton",getcouponClose:"getcouponClose",getcouponSignPopClose:"getcouponSignPopClose",getCouponURL:"//www.dhgate.com/product/bindCouponWithBuyer.do",getCouponAgain:"getCouponAgain",
getCouponBox:"js-getcouponwrap"};$.extend(this.options,b||{})},Init:function(){this.Load()},Load:function(){function b(){c.getCouponInfo.css({display:"block"});c.getCouponInfoMask.css({display:"block"});c.CouponDo();c.Resize()}var c=this;$("#"+c.options.getCouponAgain).live("click",b);this.getcouponButton.live("click",b);(function(){var b=$("."+c.options.getCouponBox+":hidden");0<b.length&&(b.css({display:"block",height:"0px"}),b.animate({height:"72px"},800))})()},getVerifycode:function(){$("#MzImgExpPwd")&&
$("#MzImgExpPwd").attr("src","/verifycode.jsp?width=205&height=45&fontsize=42&charlength=4&temp="+(new Date).getTime().toString(36));$("#codeImg").show();$("#codeInput").show()},SignIn:function(){var b=this;DH.request({url:b.getcouponWrap.attr("init-src"),type:"GET",dataType:"html",cache:!1,success:function(c){b.getCouponInfoContent.find("div").remove();b.getCouponInfoContent.append(c);b.getCouponInfo.css({visibility:"hidden"});b.getcouponSignButton=$("#"+b.options.getcouponSignButton);b.getcouponSignButton.click(function(){var c=
$("#Usernameinput").val(),f=$("#favorPassword").val(),e="";$("#codeInput").is(":visible")&&(e=$("#Checkcodeinput").val());if(""==c)return $("#SignNotice").html($L("detail_valid_singninFormName")),!1;if(""==f)return $("#SignNotice").html($L("detail_valid_signinFormPassword")),!1;if($("#codeInput").is(":visible")&&""==e)return $("#SignNotice").html($L("detail_valid_signinFormSecurityCode")),!1;b.CouponDo({username:c,password:f,checkcode:e,coupon:"get"},1)});b.getcouponSignPopClose=b.options.getcouponSignPopClose;
b.ClosePop()}})},GetUserStatus:function(){return"true"==$("#islogin").val()?1:0},CouponDo:function(b){function c(b){b.addClass("cannotgetcouponwrap");b.find(".getcoupon-inner").html($L("detail_msg_couponNO",{tryAgain:'<a rel="nofollow" id="getCouponAgain" href="javascript:;">'+$L("common_tryAgain")+"</a>"}))}function d(){f.getCouponInfo.css({display:"none"});f.getCouponInfoMask.css({display:"none"})}var f=this,e=$("#"+f.options.getcouponWrap),g={coupon:"get"},g=b||{};DH.request({url:this.options.getCouponURL,
type:"GET",data:g,dataType:"json",cache:!1,success:function(b){switch(parseInt(b.code)){case 200:f.isSignIn=!0;e.addClass("alreadygetcouponwrap").removeClass("cannotgetcouponwrap");e.find(".getcoupon-inner").html($L("detail_msg_couponOK",{dollar:b.dollar,checkCoupon:"Check Coupons"}));d();break;case 201:f.isSignIn=!1;f.SignIn();b=window.location.href.split("/");var h=b[b.length-1].split(".")[0],m=b[b.length-2],g="0";"store"==b[3]&&(g="1");window.location.href="https://secure.dhgate.com/usr/signin.do?returnURL=//www.dhgate.com/product/bindCouponWithBuyer.do?itemcode_p="+
h+"dhgate"+m+"dhgate"+g;break;case 202:f.isSignIn=!1;$("#SignNotice").html($L("detail_valid_signinFormSecurityCode"));f.getVerifycode();break;case 203:f.isSignIn=!1;$("#SignNotice").html($L("detail_msg_signinError"));break;default:f.isSignIn=!0,c(e),d()}},error:function(){c(e);d()}})},CloseCoupon:function(){},Resize:function(){var b=this;this.timer&&clearTimeout(this.timer);this.SetPosition();this.timer=setTimeout(function(){b.Resize()},100)},SetPosition:function(){if("none"!=this.getCouponInfo.css("display")){var b,
c,d,f,e,g,l;b=$(document).height();c=Math.min($(document).width(),$("body").outerWidth(!0));d=this.getCouponInfo.children("table").height();f=this.getCouponInfo.children("table").width();e=$(window).height();g=$(window).width();l=$(window).scrollTop();lScroll=$(window).scrollLeft();this.isIE6?(g=parseInt((g-f)/2+lScroll),e=parseInt((e-d)/2+l)):(g=parseInt((g-f)/2),e=parseInt((e-d)/2));this.getCouponInfo.css({top:e,left:g,width:f,height:d});this.getCouponInfoMask.css({width:c,height:b,opacity:.5});
this.getCouponInfoMaskIframe.css({width:c,height:b,opacity:0});this.getCouponInfo.css({visibility:"visible"})}},ClosePop:function(){var b=this;$("#"+this.getcouponSignPopClose).click(function(){b.getCouponInfo.css({display:"none"});b.getCouponInfoMask.css({display:"none"});b.getCouponInfoContent.find("div").remove()})}};
(function(b){b.fn.scrollLoading=function(c){var d=b.extend({},{attr:"data-url"},c||{});d.cache=[];b(this).each(function(){var c=this.nodeName.toLowerCase(),e=b(this).attr(d.attr);e&&(c={obj:b(this),tag:c,url:e},d.cache.push(c))});c=function(){var c=b(window).scrollTop(),e=c+b(window).height();b.each(d.cache,function(d,f){var h=f.obj,m=f.url;h&&(post=h.position().top,posb=post+h.height(),post>c&&post<e||posb>c&&posb<e)&&("en"!=DH.lang&&(m=m.replace("txt.dhstatics.com",location.hostname||"www.dhgate.com")),
DH.request({url:m,type:"GET",dataType:"html",cache:!1,success:function(c){b("#specificationInfo").html(c)},error:function(){DH.request({url:m.replace("txt.dhstatics.com",location.hostname||"www.dhgate.com"),type:"GET",dataType:"html",cache:!1,success:function(c){b("#specificationInfo").html(c)}})}}),f.obj=null)});return!1};c();b(window).bind("scroll",c)}})(jQuery);
(function(b){var c=function(c){this.options=b.extend({serverTime:0,endTime:0,type:"weekend",formatDay:!0},c||{});this.init()};c.prototype={init:function(){this.getServerTime(this.getStartTime)},getServerTime:function(c){var d=this;b.ajax({url:"//www.dhgate.com/common/buyertime.do",dataType:"jsonp",success:function(b){d.options.serverTime=parseInt(b.time);"function"===typeof c?c.call(d):""}})},getEndTime:function(){if("daily"===this.options.type)this.setEndTime();else{var b=parseInt(this.options.endTime);
(0>=b||isNaN(b))&&this.setEndTime()}},setEndTime:function(){var b;b=new Date(this.options.serverTime);b=[b.getFullYear(),b.getMonth()+1,b.getDate()].join("/")+" 23:59:59";this.options.endTime=+new Date(b)},getStartTime:function(){var b=1,c=this;c.getEndTime();this._interval=setInterval(function(){1800<=b&&(b=1,c.getServerTime());b++;c.getTimeData();"function"===typeof c.options.returnData&&c.options.returnData(c.data)},1E3)},clearTime:function(){clearInterval(this._interval)},getDifferTime:function(){return(parseInt(this.options.endTime)-
this.options.serverTime)/1E3},getTimeData:function(){var b={},c=this.getDifferTime();1<=c?(this.options.formatDay&&(b.day=parseInt(c/86400),c%=86400),b.hour=parseInt(c/3600),c%=3600,b.minute=parseInt(c/60),b.seconds=parseInt(c%60),10>b.day&&(b.day="0"+b.day),10>b.hour&&(b.hour="0"+b.hour),10>b.minute&&(b.minute="0"+b.minute),10>b.seconds&&(b.seconds="0"+b.seconds),this.options.serverTime+=1E3,this.data=b):this.data={day:"00",hour:"00",minute:"00",seconds:"00"}}};b(document).ready(function(){var d=
b("#dh-discountTime"),f=+new Date(d.data("endtime"));0<d.length&&(window.DownTime=new c({endTime:f,type:"weekend",formatDay:!1,returnData:function(b){d.find("span.dh-time").html(b.hour+"h&nbsp;"+b.minute+"m&nbsp;"+b.seconds+"s").andSelf().show()}}))});window.getCountdownTime=c})(jQuery);
function getStProdFun(b){$("#stProductDiv").hide();if("1"==$("#isCallStProd").val()){var c=$("#hiddenCountry").val();if("US"==c||"us"==c){c=$("#twocatePubCateId").val();$("#selectedSkuVal").val();var d=$(".js-wholesale-list li");if(0>=d.length)return!1;b=b||d.eq(0).attr("price")||0;d=$("#radixUnit").val();DH.request({type:"post",async:!1,cache:!1,dataType:"json",url:"/product/getstprodinfo.do",data:"twoCatePubId="+c+"&price="+b/d,success:function(b){try{0<b.productDTOs.length&&2==b.productDTOs.length?
($("#stProductDiv").show(),$("#oneYearStPrice").html(" US $"+b.productDTOs[0].productSaleSettingDTO.minBuyerPrice),$("#oneYearStName").html("1 Year for"),$("#oneYearStAddCart").val("stSkuId="+b.productDTOs[0].productSkuList[0].skuId+"&stSkuMd5="+b.productDTOs[0].productSkuList[0].skuMd5+"&stItemCode="+b.productDTOs[0].itemcode),$("#twoYearStPrice").html(" US $"+b.productDTOs[1].productSaleSettingDTO.minBuyerPrice),$("#twoYearStName").html("2 Years for"),$("#twoYearStAddCart").val("stSkuId="+b.productDTOs[1].productSkuList[0].skuId+
"&stSkuMd5="+b.productDTOs[1].productSkuList[0].skuMd5+"&stItemCode="+b.productDTOs[1].itemcode),$("#buyoneYearStPrice").html(" US $"+b.productDTOs[0].productSaleSettingDTO.minBuyerPrice),$("#buyoneYearStName").html("1 Year for"),$("#buyoneYearStAddCart").val("stSkuId="+b.productDTOs[0].productSkuList[0].skuId+"&stSkuMd5="+b.productDTOs[0].productSkuList[0].skuMd5+"&stItemCode="+b.productDTOs[0].itemcode),$("#buytwoYearStPrice").html(" US $"+b.productDTOs[1].productSaleSettingDTO.minBuyerPrice),$("#buytwoYearStName").html("2 Years for"),
$("#buytwoYearStAddCart").val("stSkuId="+b.productDTOs[1].productSkuList[0].skuId+"&stSkuMd5="+b.productDTOs[1].productSkuList[0].skuMd5+"&stItemCode="+b.productDTOs[1].itemcode)):$("#stProductDiv").hide().find(".this").removeClass("this")}catch(e){$("#stProductDiv").hide().find(".this").removeClass("this"),window.console&&console.log("%c SquareTrade interface Error: productDTOs is undefined","font-size:26px"),window.console&&console.log("%c "+e,"color:red;font-size:26px")}}})}}}
var buySt=function(b){this.SetOptions(b);document.getElementById(this.options.buyStButton)&&(this.buyStButton=$("#"+this.options.buyStButton),this.buySt=$("#"+this.options.buySt),this.buyStContent=$("#"+this.options.buyStContent),this.buyStMask=$("#"+this.options.buyStMask),this.buyStMaskIframe=$("#"+this.options.buyStMaskIframe),this.buyStNoBtn=this.options.buyStNoBtn,this.timer=null,this.isIE6=$.browser.msie&&"6.0"==$.browser.version,this.Init())};
buySt.prototype={SetOptions:function(b){this.options={buyStButton:"buyItNow",buySt:"buyerstdiv",buyStMask:"ShippingCostMask",buyStMaskIframe:"ShippingCostMaskIframe",buyStNoBtn:"buyStNoBtn",isDisplay:!0};$.extend(this.options,b||{})},Init:function(){this.options.isDisplay?(this.buySt.css({display:"block"}),this.buyStMask.css({display:"block"}),this.Resize(),$("#buyStNoBtn").bind("click",buyStNoBtnClick)):buyStNoBtnClick()},Resize:function(){var b=this;this.timer&&clearTimeout(this.timer);this.SetPosition();
this.timer=setTimeout(function(){b.Resize()},100)},SetPosition:function(){if("none"!=this.buySt.css("display")){var b,c,d,f,e,g,l;b=$(document).height();c=Math.min($(document).width(),$("body").outerWidth(!0));d=this.buySt.height();f=this.buySt.width();e=$(window).height();g=$(window).width();l=$(window).scrollTop();lScroll=$(window).scrollLeft();this.isIE6?(g=parseInt((g-f)/2+lScroll),e=parseInt((e-d)/2+l)):(g=parseInt((g-f)/2),e=parseInt((e-d)/2));this.buySt.css({top:e,left:g,width:f,height:d});
this.buyStMask.css({width:c,height:b,opacity:.5});this.buyStMaskIframe.css({width:c,height:b,opacity:0})}},ClickBuySt:function(){$("#"+this.buyStNoBtn).click(function(){buyStYesBtnClick()})},Close:function(){$("#"+this.buyStNoBtn).click(function(){buyStNoBtnClick()})}};
(function(b,c){c.CheckTopBanner=function(c){c=c?c:"#js-topBanner";var d=b.cookie("b2b_buyer_lv");Array.prototype.indexOf=function(b){for(var c=0,e;e=this[c];c++)if(e==b)return c;return-1};0<=["1"].indexOf(d)?b(c).show():b(c).hide()}})($,window);
(function(b){b.fn.extend({myPlaceholder:function(){if(!("placeholder"in document.createElement("input")))return this.each(function(){var c=b(this),d=c.attr("placeholder"),f=b("<span>");f.attr("class","placeholder");f.text(d);c.before(f);c.val()&&f.addClass("placeholder-hide");f.bind("focus",function(){f.addClass("placeholder-hide");c.focus()});c.bind("focus",function(){f.addClass("placeholder-hide")}).bind("blur",function(){c.val().length||f.removeClass("placeholder-hide")})})}})})(jQuery);
var crossPromotion=function(b){this.SetOptions(b);this.container=$("#"+this.options.container);this.commonCpBoxWarp=$("#"+this.options.commonCpBoxWarp);this.commonCpBox=$("#"+this.options.commonCpBox);this.itemWidth=this.options.itemWidth;this.nextButton=$("#"+this.options.nextButton);this.backButton=$("#"+this.options.backButton);this.pageNum=$("#"+this.options.pageNum);this.pageTotal=$("#"+this.options.pageTotal);this.showFirst=$("#"+this.options.showFirst);this.timer1=this.timer=null;this.Init()};
crossPromotion.prototype={SetOptions:function(b){this.options=$.extend({nextButton:"js-nextButton",backButton:"js-prevButton",commonCpBoxWarp:"js-commonCpBoxWarp",commonCpBox:"js-commonCpBox",commonCpList:"js-commonCpBox > li",itemWidth:193,pageNum:"js-pageNum",pageTotal:"js-pageTotal",showFirst:"js-showFirst",url:"//adcenter.dhgate.com/adapi/showplanadv2"},b)},Init:function(){this.Load()},Load:function(){var b=this,c=!0,d={cid:this.container.attr("categoryid"),itemcode:window._itemcode,device:"PC"};
DH.request({type:"GET",url:this.options.url,dataType:"jsonp",jsonp:"jsoncallback",data:d,beforeSend:function(){b.container.css({display:"none"})},success:function(d){c=!1;if(d&&d["0201"].length){b.container.css({display:"block"});d=d["0201"];for(var e=0;e<d.length;e++)if(""!==d[e]){b.itemWidth=1==d[e].newLayout?234:193;var f=_.template('<li class="<%if(m.newLayout == 1){%>new-po<%}%>"><div class="common-cp-img"><a title="<%=m.title%>" href="<%=m.promotionDetailUrl%>"><img src="<%=m.image%>" alt="<%=m.productName%>"/></a></div><div class="common-cp-title"><a title="<%=m.title%>" href="<%=m.promotionDetailUrl%>"><%=m.productName%></a></div><%if(m.newLayout !=1){%><div class="common-cp-price"><strong><%=m.price%></strong>/<%=m.measure%></div><%if(m.itemsSold!=0){%><div class="common-cp-feedback">Sold: <strong><%=m.itemsSold%></strong></div><%}%><%}else{%><div class="common-cp-feedback"><%if(m.itemsSold !=0){%><span class="order"><%=m.itemsSold%> Orders</span><%}%><%if(m.stars >= 3){%><span class="star"><span style="width:<%=m.stars*20%>%;"></span></span><span class="star-num"><%=m.stars%></span><%}%></div><div class="common-cp-price"><strong><%=m.price%></strong>/<%=m.measure%></div><%if(m.coupon){%><div><span class="common-cp-coupon"><%=m.coupon%></span></div><%}%><%}%></li>')({m:d[e]});
b.commonCpBoxWarp.data("cache"+e,f)}b.dataLength=d.length;b.visualSum=Math.floor(b.commonCpBoxWarp.width()/b.itemWidth);b.cPage=1;b.sPage=Math.ceil(b.dataLength/b.visualSum);b.pageNum.html(b.cPage);b.pageTotal.html(b.sPage);b.commonCpBox.html("");for(d=0;d<b.visualSum;d++)b.commonCpBox.append(b.commonCpBoxWarp.data("cache"+d));b.Monitor();b.Page()}else b.container.css({display:"none"})},error:function(){b.container.css({display:"none"})},complete:function(d){c&&b.container.css({display:"none"})}})},
Monitor:function(){var b=this;this.visualWidth=this.commonCpBoxWarp.width();this.visualWidth!=this.Monitor._visualWidth&&this.Monitor._visualSum&&(this.commonCpList=$("#"+this.options.commonCpList),this.visualSum=Math.floor(this.visualWidth/this.itemWidth),this.sPage=Math.ceil(this.dataLength/this.visualSum),this.cPage=Math.ceil((this.Monitor._visualSum*this.Monitor._cPage-(this.Monitor._visualSum-1))/this.visualSum),this.pageNum.html(this.cPage),this.pageTotal.html(this.sPage),this.DisplayChange(this.visualSum,
this.Monitor._visualSum,this.cPage),this.showFirstPro());this.Monitor._visualWidth=this.visualWidth;this.Monitor._visualSum=this.visualSum;this.Monitor._cPage=this.cPage;this.timer=setTimeout(function(){b.Monitor()},50)},DisplayChange:function(b,c,d){if(b<c)for(;b<c;b++)this.commonCpList[b]&&$(this.commonCpList[b]).remove();else for(this.commonCpBox.html(""),c=b*d,b=b*d-b;b<c;b++)this.commonCpBoxWarp.data("cache"+b)&&this.commonCpBox.append(this.commonCpBoxWarp.data("cache"+b))},Page:function(){var b=
this;this.nextButton.click(function(){b.cPage++;b.cPage>b.sPage&&(b.cPage=1);b.Add("right");b.pageNum.html(b.cPage);b.showFirstPro()});this.backButton.click(function(){b.cPage--;0>=b.cPage&&(b.cPage=b.sPage);b.Add("left");b.pageNum.html(b.cPage);b.showFirstPro()})},showFirstPro:function(){var b=this;1==this.cPage?b.showFirst.html(""):this.showFirst.html('( <a href="javascript:void(0)">Start over</a> )');this.showFirst.click(function(){b.cPage=1;b.commonCpBox.html("");for(var c=0;c<b.visualSum;c++)b.commonCpBox.append(b.commonCpBoxWarp.data("cache"+
c));b.showFirst.html("");b.pageNum.html(b.cPage)})},Add:function(b){var c=this;if("true"!=this.Add.flag)switch(this.commonCpList=$("#"+this.options.commonCpList),b&&(this.Add.direction=b),this.Add.direction){case "left":this.Add.sVar=this.visualSum*this.cPage-this.visualSum;this.Add.eVar=this.visualSum*this.cPage;this.Add.i=0;break;case "right":this.Add.sVar=this.visualSum*this.cPage-1,this.Add.eVar=this.visualSum*this.cPage-this.visualSum,this.Add.i=this.visualSum-1}this.timer1&&clearTimeout(this.timer1);
switch(this.Add.direction){case "left":if(this.Add.i>this.visualSum||this.Add.sVar>=this.Add.eVar){this.Add.flag="false";return}this.commonCpBoxWarp.data("cache"+this.Add.sVar)&&(this.commonCpList[this.Add.i]?$(this.commonCpList[this.Add.i]).before(this.commonCpBoxWarp.data("cache"+this.Add.sVar)):this.commonCpBox.append(this.commonCpBoxWarp.data("cache"+this.Add.sVar)));break;case "right":if(0>this.Add.i||this.Add.sVar<this.Add.eVar){this.Add.flag="false";return}this.commonCpBoxWarp.data("cache"+
this.Add.sVar)&&(this.commonCpList[this.Add.i]?$(this.commonCpList[this.Add.i]).after(this.commonCpBoxWarp.data("cache"+this.Add.sVar)):this.commonCpBox.append(this.commonCpBoxWarp.data("cache"+this.Add.sVar)))}this.commonCpList[this.Add.i]&&$(this.commonCpList[this.Add.i]).remove();switch(this.Add.direction){case "left":this.Add.sVar++;this.Add.i++;break;case "right":this.Add.sVar--,this.Add.i--}this.Add.flag="true";this.timer1=setTimeout(function(){c.Add()},20)},CropSale:function(b,c){try{var d=
_dhta.getTracker();d.setVar("searchcontent",c);d.pageview(b)}catch(f){}},CropSaleSp:function(b,c){try{var d=_dhta.getTracker();d.setVar("vd",c);d.pageview(b)}catch(f){}}};
var sameViewedProd=function(b){this.SetOptions(b);this.commonCpBoxWarp=$("#"+this.options.commonCpBoxWarp);this.commonCpBox=$("#"+this.options.commonCpBox);this.itemWidth=this.options.itemWidth;this.nextButton=$("#"+this.options.nextButton);this.backButton=$("#"+this.options.backButton);this.pageNum=$("#"+this.options.pageNum);this.pageTotal=$("#"+this.options.pageTotal);this.showFirst=$("#"+this.options.showFirst);this.timer1=this.timer=null;this.Init()};
sameViewedProd.prototype={SetOptions:function(b){this.options={nextButton:"js-nextButton",backButton:"js-prevButton",commonCpBoxWarp:"js-commonCpBoxWarp",commonCpBox:"js-commonCpBox",commonCpList:"js-commonCpBox > li",itemWidth:193,pageNum:"js-pageNum",pageTotal:"js-pageTotal",showFirst:"js-showFirst"}},Init:function(){this.Load()},Load:function(){var b=this,c=!0;DH.request({type:"GET",url:"/wholesale/listajax.do",dataType:"json",data:{act:"randomItemcode",num:12,cid:_pro_catalogid},success:function(d){c=
!1;if(d&&d.plist&&d.plist.length){$("#otherItemsWarp").css({display:"block"});d=d.plist;for(var f=0;f<d.length;f++)if(""!==d[f]){var e=["<li>",'<div class="common-cp-img"><a title="'+d[f].productname+'" href="/product/'+d[f].url+"/"+d[f].itemcode+'.html"><img src="'+d[f].imageurl+'" alt="'+d[f].productname+'"/></a></div>','<div class="common-cp-title"><a title="'+d[f].productname+'" href="/product/'+d[f].url+"/"+d[f].itemcode+'.html">'+d[f].productname+"</a></div>",'<div class="common-cp-price"><strong>'+
d[f].unitprice+"</strong></div>","</li>"].join("");b.commonCpBoxWarp.data("cache"+f,e)}b.dataLength=d.length-1;b.visualSum=Math.floor(b.commonCpBoxWarp.width()/b.itemWidth);b.cPage=1;b.sPage=Math.ceil(b.dataLength/b.visualSum);b.pageNum.html(b.cPage);b.pageTotal.html(b.sPage);b.commonCpBox.html("");for(d=0;d<b.visualSum;d++)b.commonCpBox.append(b.commonCpBoxWarp.data("cache"+d));b.Monitor();b.Page()}else $("#otherItemsWarp").css({display:"none"})},complete:function(b){c&&$("#otherItemsWarp").css({display:"none"})}})},
Monitor:function(){var b=this;this.visualWidth=this.commonCpBoxWarp.width();this.visualWidth!=this.Monitor._visualWidth&&this.Monitor._visualSum&&(this.commonCpList=$("#"+this.options.commonCpList),this.visualSum=Math.floor(this.visualWidth/this.itemWidth),this.sPage=Math.ceil(this.dataLength/this.visualSum),this.cPage=Math.ceil((this.Monitor._visualSum*this.Monitor._cPage-(this.Monitor._visualSum-1))/this.visualSum),this.pageNum.html(this.cPage),this.pageTotal.html(this.sPage),this.DisplayChange(this.visualSum,
this.Monitor._visualSum,this.cPage),this.showFirstPro());this.Monitor._visualWidth=this.visualWidth;this.Monitor._visualSum=this.visualSum;this.Monitor._cPage=this.cPage;this.timer=setTimeout(function(){b.Monitor()},50)},DisplayChange:function(b,c,d){if(b<c)for(;b<c;b++)this.commonCpList[b]&&$(this.commonCpList[b]).remove();else for(this.commonCpBox.html(""),c=b*d,b=b*d-b;b<c;b++)this.commonCpBoxWarp.data("cache"+b)&&this.commonCpBox.append(this.commonCpBoxWarp.data("cache"+b))},Page:function(){var b=
this;this.nextButton.click(function(){b.cPage++;b.cPage>b.sPage&&(b.cPage=1);b.Add("right");b.pageNum.html(b.cPage);b.showFirstPro()});this.backButton.click(function(){b.cPage--;0>=b.cPage&&(b.cPage=b.sPage);b.Add("left");b.pageNum.html(b.cPage);b.showFirstPro()})},showFirstPro:function(){var b=this;1==this.cPage?b.showFirst.html(""):this.showFirst.html('( <a href="javascript:void(0)">Start over</a> )');this.showFirst.click(function(){b.cPage=1;b.commonCpBox.html("");for(var c=0;c<b.visualSum;c++)b.commonCpBox.append(b.commonCpBoxWarp.data("cache"+
c));b.showFirst.html("");b.pageNum.html(b.cPage)})},Add:function(b){var c=this;if("true"!=this.Add.flag)switch(this.commonCpList=$("#"+this.options.commonCpList),b&&(this.Add.direction=b),this.Add.direction){case "left":this.Add.sVar=this.visualSum*this.cPage-this.visualSum;this.Add.eVar=this.visualSum*this.cPage;this.Add.i=0;break;case "right":this.Add.sVar=this.visualSum*this.cPage-1,this.Add.eVar=this.visualSum*this.cPage-this.visualSum,this.Add.i=this.visualSum-1}this.timer1&&clearTimeout(this.timer1);
switch(this.Add.direction){case "left":if(this.Add.i>this.visualSum||this.Add.sVar>=this.Add.eVar){this.Add.flag="false";return}this.commonCpBoxWarp.data("cache"+this.Add.sVar)&&(this.commonCpList[this.Add.i]?$(this.commonCpList[this.Add.i]).before(this.commonCpBoxWarp.data("cache"+this.Add.sVar)):this.commonCpBox.append(this.commonCpBoxWarp.data("cache"+this.Add.sVar)));break;case "right":if(0>this.Add.i||this.Add.sVar<this.Add.eVar){this.Add.flag="false";return}this.commonCpBoxWarp.data("cache"+
this.Add.sVar)&&(this.commonCpList[this.Add.i]?$(this.commonCpList[this.Add.i]).after(this.commonCpBoxWarp.data("cache"+this.Add.sVar)):this.commonCpBox.append(this.commonCpBoxWarp.data("cache"+this.Add.sVar)))}this.commonCpList[this.Add.i]&&$(this.commonCpList[this.Add.i]).remove();switch(this.Add.direction){case "left":this.Add.sVar++;this.Add.i++;break;case "right":this.Add.sVar--,this.Add.i--}this.Add.flag="true";this.timer1=setTimeout(function(){c.Add()},20)},CropSale:function(b,c){try{var d=
_dhta.getTracker();d.setVar("searchcontent",c);d.pageview(b)}catch(f){}},CropSaleSp:function(b,c){try{var d=_dhta.getTracker();d.setVar("vd",c);d.pageview(b)}catch(f){}}};var interpret=function(b){this.SetOptions(b);this.openId=this.options.openId;this.closeId=this.options.closeId;this.contentId=this.options.contentId;this.Init()};
interpret.prototype={SetOptions:function(b){this.options={openId:[],closeId:[],contentId:[]};$.extend(this.options,b||{})},Init:function(){this.openArray=[];this.closeArray=[];this.contentArray=[];for(var b=0;b<this.openId.length;b++)$("#"+this.openId[b])[0]&&(this.openArray.push($("#"+this.openId[b])),this.closeArray.push($("#"+this.closeId[b])),this.contentArray.push($("#"+this.contentId[b])));this.Control();this.OtherClick()},Control:function(){for(var b=this,c=0;c<this.openArray.length;c++)(function(){var d=
c;b.openArray[d].click(function(f){f.stopPropagation();for(f=0;f<c;f++)f==d?"none"==b.contentArray[d].css("display")?b.contentArray[d].css({display:"block"}):b.contentArray[d].css({display:"none"}):b.contentArray[f].css({display:"none"})});b.closeArray[d].click(function(){b.contentArray[d].css({display:"none"})});b.contentArray[d].click(function(b){b.stopPropagation()})})()},OtherClick:function(){for(var b=this,c=0;c<this.contentArray.length;c++)(function(){var d=c;$(document).click(function(){"block"==
b.contentArray[d].css("display")&&b.contentArray[d].css({display:"none"})})})()}};var imitationSelect=function(b){this.SetOptions(b);this.selectWarp=this.options.selectWarp;this.hiddenInput=this.options.hiddenInput;this.textInput=this.options.textInput;this.arrow=this.options.arrow;this.list=this.options.list;this.ship_quantity=$("#"+this.options.ship_quantity);this.defaultLength=this.options.defaultLength;this.yScrollClass=this.options.yScrollClass;0!=this.selectWarp.length&&this.Init()};
imitationSelect.prototype={SetOptions:function(b){this.options={selectWarp:[],hiddenInput:[],textInput:[],arrow:[],list:[],defaultLength:12,ship_quantity:"ship_quantity",yScrollClass:"simulation-select-yScroll"};$.extend(this.options,b||{})},Init:function(){this.params={_From:this.options.selectWarp};this.selectWarpArray=[];this.hiddenInputArray=[];this.textInputArray=[];this.arrowArray=[];this.listArray=[];for(var b=0;b<this.selectWarp.length;b++)$("#"+this.selectWarp[b])[0]&&(this.selectWarpArray.push($("#"+
this.selectWarp[b])),this.hiddenInputArray.push($("#"+this.hiddenInput[b])),this.textInputArray.push($("#"+this.textInput[b])),this.arrowArray.push($("#"+this.arrow[b])),this.listArray.push($("#"+this.list[b])));this.FocusInput();this.ControlArrow();this.OpenSelectList()},FocusInput:function(){this.ship_quantity.blur(function(){calculateCost()})},ControlArrow:function(){for(var b=this,c=0;c<this.selectWarpArray.length;c++)(function(){var d=c;b.selectWarpArray[d].mouseenter(function(){b.arrowArray[d].addClass("simulation-select-harrow")}).mouseleave(function(){b.arrowArray[d].removeClass("simulation-select-harrow")})})()},
HighlightDefaultStatus:function(b,c){$(c[0]).addClass("hover");for(var d=1;d<c.length;d++)$(c[d]).removeClass("hover")},OpenSelectList:function(){for(var b=this,c=0;c<this.listArray.length;c++)(function(){var d=c,f=$("#"+b.options.list[d]+" > ul"),e=$("#"+b.options.list[d]+" > ul > li"),g=e.height()*e.length;f.prepend('<li style="overlfow:hidden;float:left;padding:0;margin-left:-1px;width:1px;height:'+g+'px"></li>');b.selectWarpArray[d].click(function(f){f.stopPropagation();b.HighlightDefaultStatus(d,
e);for(f=0;f<c;f++)f==d?"none"==b.listArray[d].css("display")?b.listArray[d].css({display:"block",visibility:"visible"}):b.listArray[d].css({display:"none",visibility:"hidden"}):b.listArray[f].css({display:"none",visibility:"hidden"})});e.length>b.defaultLength&&f.addClass(b.yScrollClass);b.SelectList(d,e);b.ClickList(d,e);b.Close(d,f,e)})()},SelectList:function(b,c){for(var d=0;d<c.length;d++)(function(){var b=d;$(c[b]).mouseenter(function(){$(this).addClass("hover");for(var e=0;e<d;e++)e!=b&&$(c[e]).removeClass("hover")})})()},
ClickList:function(b,c){for(var d=this,f=0;f<c.length;f++)$(c[f]).click(function(){d.textInputArray[b].val($(this).text());d.hiddenInputArray[b].val($(this).attr("vHidden"));"shippingSelect"==d.params._From&&calculateCost()})},Close:function(b,c){var d=this;$(document).click(function(){"block"==d.listArray[b].css("display")&&(d.listArray[b].css({display:"none",visibility:"hidden"}),d.HighlightDefaultStatus(b,c))})}};
function calculateCost(){var b=$("#ship_quantity").attr("value"),c=$("#_cur_maxordersize").val(),d=$("#minQuantity").val(),f=$("#shippingSelectHiddenInput").attr("value");/^\d+$/.test(b)?"0"==b?(alert("Purchase quantity is zero,Please checkout!"),$("#ship_quantity").val(d)):(b=parseInt(b),c=parseInt(c),d=parseInt(d),b>c&&($("#ship_quantity").val(c),b=c),b<d&&($("#ship_quantity").val(d),b=d),DH.request({url:"/product/shippingpayment.do?ship_country="+f+"&ship_quantity="+b+"&pid="+_pid+"&itemcode="+
_itemcode,type:"GET",dataType:"html",success:function(b){b=b.split('<div name="separator"></div>');$("#_ShippingAndPayment_sub0").html(b[0]);$("#_ShippingAndPayment_sub1").html(b[1])}}),gtag("event","caculate",{event_category:"Checkout-product",event_label:""})):(alert("Quantity entered must be a number!"),$("#ship_quantity").val(d))}var loadScroll=function(b){this.SetOptions(b);document.getElementById(this.options.container)&&(this.container=$("#"+this.options.container),this.timer=null,this.Init())};
loadScroll.prototype={SetOptions:function(b){this.options={container:"CorssPromotion1"};$.extend(this.options,b||{})},Init:function(){this.Run()},Run:function(){if(!this.flag){this.timer&&clearTimeout(this.timer);var b=this,c=this.container.offset().top,d=$(window).height(),f=$(window).scrollTop();c<=d+f?this.Load():this.timer=setTimeout(function(){b.Run()},50)}},Load:function(){this.flag=!0;new crossPromotion(this.options)}};
var loadCommonCp=function(b){this.SetOptions(b);document.getElementById(this.options.crossPromotionWarp)&&(this.crossPromotionWarp=$("#"+this.options.crossPromotionWarp),this.timer=null,this.Init())};
loadCommonCp.prototype={SetOptions:function(b){this.options={crossPromotionWarp:"crossPromotionWarp"};$.extend(this.options,b||{})},Init:function(){this.Run()},Run:function(){this.timer&&clearTimeout(this.timer);var b=this.crossPromotionWarp.offset().top,c=$(window).height(),d=$(window).scrollTop();b<=c+d&&this.Load()},Load:function(){new commonCp}};
var commonCp=function(b){this.SetOptions(b);this.commonCpBoxWarp=$("#"+this.options.commonCpBoxWarp);this.commonCpBox=$("#"+this.options.commonCpBox);this.itemWidth=this.options.itemWidth;this.nextButton=$("#"+this.options.nextButton);this.backButton=$("#"+this.options.backButton);this.splitString=this.options.splitString;this.pageNum=$("#"+this.options.pageNum);this.pageTotal=$("#"+this.options.pageTotal);this.showFirst=$("#"+this.options.showFirst);this.timer1=this.timer=null;this.Init()};
commonCp.prototype={SetOptions:function(b){this.options={nextButton:"nextButton",backButton:"backButton",commonCpBoxWarp:"commonCpBoxWarp",commonCpBox:"commonCpBox",commonCpList:"commonCpBox > li",itemWidth:193,splitString:"SPLITFLAG",pageNum:"pageNum",pageTotal:"pageTotal",showFirst:"showFirst"}},Init:function(){this.Load()},Load:function(){var b=this,c=!0,d="",f=window.location.href;-1!=f.indexOf("#")&&(d=f.substring(f.indexOf("#")+1,f.length));DH.request({type:"GET",url:"/dhrec/recommend_for_product_html.action",
dataType:"JSON",data:"pagetype="+$("#pagetype").val()+"&itemcode="+_itemcode+"&catalog="+_pro_catalogid+"&recinfo="+d,cache:"false",success:function(e){c=!1;if(null==e||""==$.trim(e))$("#crossPromotionWarp").css({display:"none"});else{var d=$.trim(e.ot),f=$.trim(e.pagetrack),h=$.trim(e.sppagetrack),m=$.trim(e.spot);""!=d&&""!=f&&b.CropSale(d,f);""!=m&&""!=h&&b.CropSaleSp(m,h);e=e.content.split(b.splitString);$("#crossPromotionWarp").css({display:"block"});for(d=0;d<e.length;d++)""!==e[d]&&b.commonCpBoxWarp.data("cache"+
d,e[d]);b.dataLength=e.length-1;b.visualSum=Math.floor(b.commonCpBoxWarp.width()/b.itemWidth);b.cPage=1;b.sPage=Math.ceil(b.dataLength/b.visualSum);b.pageNum.html(b.cPage);b.pageTotal.html(b.sPage);for(e=0;e<b.visualSum;e++)b.commonCpBox.append(b.commonCpBoxWarp.data("cache"+e));b.Monitor();b.Page()}},complete:function(b){c&&$("#crossPromotionWarp").css({display:"none"})}})},Monitor:function(){var b=this;this.timer&&clearTimeout(this.timer);this.visualWidth=this.commonCpBoxWarp.width();this.visualWidth!=
this.Monitor._visualWidth&&this.Monitor._visualSum&&(this.commonCpList=$("#"+this.options.commonCpList),this.visualSum=Math.floor(this.visualWidth/this.itemWidth),this.sPage=Math.ceil(this.dataLength/this.visualSum),this.cPage=Math.ceil((this.Monitor._visualSum*this.Monitor._cPage-(this.Monitor._visualSum-1))/this.visualSum),this.pageNum.html(this.cPage),this.pageTotal.html(this.sPage),this.DisplayChange(this.visualSum,this.Monitor._visualSum,this.cPage),this.showFirstPro());this.Monitor._visualWidth=
this.visualWidth;this.Monitor._visualSum=this.visualSum;this.Monitor._cPage=this.cPage;this.timer=setTimeout(function(){b.Monitor()},50)},DisplayChange:function(b,c,d){if(b<c)for(;b<c;b++)this.commonCpList[b]&&$(this.commonCpList[b]).remove();else for(this.commonCpBox.html(""),c=b*d,b=b*d-b;b<c;b++)this.commonCpBoxWarp.data("cache"+b)&&this.commonCpBox.append(this.commonCpBoxWarp.data("cache"+b))},Page:function(){var b=this;this.nextButton.click(function(){b.cPage++;b.cPage>b.sPage&&(b.cPage=1);b.Add("right");
b.pageNum.html(b.cPage);b.showFirstPro()});this.backButton.click(function(){b.cPage--;0>=b.cPage&&(b.cPage=b.sPage);b.Add("left");b.pageNum.html(b.cPage);b.showFirstPro()})},showFirstPro:function(){var b=this;1==this.cPage?b.showFirst.html(""):this.showFirst.html('( <a href="javascript:void(0)">Start over</a> )');this.showFirst.click(function(){b.cPage=1;b.commonCpBox.html("");for(var c=0;c<b.visualSum;c++)b.commonCpBox.append(b.commonCpBoxWarp.data("cache"+c));b.showFirst.html("");b.pageNum.html(b.cPage)})},
Add:function(b){var c=this;if("true"!=this.Add.flag)switch(this.commonCpList=$("#"+this.options.commonCpList),b&&(this.Add.direction=b),this.Add.direction){case "left":this.Add.sVar=this.visualSum*this.cPage-this.visualSum;this.Add.eVar=this.visualSum*this.cPage;this.Add.i=0;break;case "right":this.Add.sVar=this.visualSum*this.cPage-1,this.Add.eVar=this.visualSum*this.cPage-this.visualSum,this.Add.i=this.visualSum-1}this.timer1&&clearTimeout(this.timer1);switch(this.Add.direction){case "left":if(this.Add.i>
this.visualSum||this.Add.sVar>=this.Add.eVar){this.Add.flag="false";return}this.commonCpBoxWarp.data("cache"+this.Add.sVar)&&(this.commonCpList[this.Add.i]?$(this.commonCpList[this.Add.i]).before(this.commonCpBoxWarp.data("cache"+this.Add.sVar)):this.commonCpBox.append(this.commonCpBoxWarp.data("cache"+this.Add.sVar)));break;case "right":if(0>this.Add.i||this.Add.sVar<this.Add.eVar){this.Add.flag="false";return}this.commonCpBoxWarp.data("cache"+this.Add.sVar)&&(this.commonCpList[this.Add.i]?$(this.commonCpList[this.Add.i]).after(this.commonCpBoxWarp.data("cache"+
this.Add.sVar)):this.commonCpBox.append(this.commonCpBoxWarp.data("cache"+this.Add.sVar)))}this.commonCpList[this.Add.i]&&$(this.commonCpList[this.Add.i]).remove();switch(this.Add.direction){case "left":this.Add.sVar++;this.Add.i++;break;case "right":this.Add.sVar--,this.Add.i--}this.Add.flag="true";this.timer1=setTimeout(function(){c.Add()},20)},CropSale:function(b,c){try{var d=_dhta.getTracker();d.setVar("searchcontent",c);d.pageview(b)}catch(f){}},CropSaleSp:function(b,c){try{var d=_dhta.getTracker();
d.setVar("vd",c);d.pageview(b)}catch(f){}}};
var FNYearTip=function(){return{_init:!1,init:function(b){var c=this;this.options={container:"#yearTip",mask:"#yearTipMask",maskIframe:"#yearTipMaskIframe",yearContinue:"#yearContinue",yearReturn:"#yearReturn",yeartipclose:"#yeartipclose"};$.extend(this.options,b||{});this._init||(this._init=!0,$("body").delegate(this.options.yearContinue,"click",function(b){b=$(b.currentTarget).attr("data-flag");c.setFlag();c.CloseYearTip();"BuyProductNow"===b?$("#buyItNow").trigger("click"):$("#addToCartButton").trigger("click")}),
$("body").delegate(this.options.yearReturn,"click",$.proxy(this.CloseYearTip,this)),$("body").delegate(this.options.yeartipclose,"click",$.proxy(this.CloseYearTip,this)))},setFlag:function(){var b=DHCookieUtil.getcookie("vid").replace(/\=/ig,"");DHCookieUtil.addcookies("yearMarkCookie",b,1,{expires:365,path:"/",domain:".dhgate.com"})},ShowYeartip:function(b){$("body").append('<div id="yearTipMask"><iframe id="yearTipMaskIframe"></iframe></div><div id="yearTip"><div class="addbuy-yeartip"><span id="yeartipclose" class="icon-bclose"></span><p class="title">'+
$L("verify_age")+'</p><p class="des">'+$L("verifyAge_des")+'</p><span class="n-yellow-button year-continue" data-flag="'+b+'" id="yearContinue">'+$L("verifyAge_continue")+'</span><span class="n-grey-button year-return" id="yearReturn">'+$L("verifyAge_reutrn")+"</span></div></div>");this.SetPosition()},CloseYearTip:function(){$(this.options.container).remove();$(this.options.mask).remove()},Resize:function(){var b=this;this.timer&&clearTimeout(this.timer);this.SetPosition();this.timer=setTimeout(function(){b.Resize()},
100)},SetPosition:function(){var b,c,d,f,e,g,l;b=$(document).height();c=Math.min($(document).width(),$("body").outerWidth(!0));d=$(this.options.container).height();f=$(this.options.container).width();e=$(window).height();g=$(window).width();l=$(window).scrollTop();lScroll=$(window).scrollLeft();this.isIE6?(g=parseInt((g-f)/2+lScroll),e=parseInt((e-d)/2+l)):(g=parseInt((g-f)/2),e=parseInt((e-d)/2));$(this.options.container).css({top:e,left:g,width:f,height:d});$(this.options.mask).css({width:c,height:b,
opacity:.5});$(this.options.maskIframe).css({width:c,height:b,opacity:0})}}}(),addToCartProduct=function(b){this.SetOptions(b);if(document.getElementById(this.options.addToCartButton)||document.getElementById(this.options.buyItNow))this.quantity=$("#"+this.options.quantity),this.prosizeid=$("#"+this.options.prosizeid),this.isBlackBuyer=$("#"+this.options.isBlackBuyer),this.sel_country=$("#"+this.options.sel_country),this.matrixbuykeys=$("#"+this.options.matrixbuykeys),this.matrixsalekeys=$("#"+this.options.matrixsalekeys),
this.buyerCountryId=$("#"+this.options.buyerCountryId),this.toolalreadyadd=$("#"+this.options.toolalreadyadd),this.getASampleArea=$("#"+this.options.getASampleArea),this.continueShopping=this.options.continueShopping,this.buyItNow=$("#"+this.options.buyItNow),this.addToCartButton=$("#"+this.options.addToCartButton),this.addToCartProduct=$("#"+this.options.addToCartProduct),this.selectPropertiesNotice=$("#"+this.options.selectPropertiesNotice),this.selectPropertiesNoticeList=$("#"+this.options.selectPropertiesNoticeList),
this.addToCartProductContent=$("#"+this.options.addToCartProductContent),this.addToCartProductMask=$("#"+this.options.addToCartProductMask),this.addToCartProductMaskIframe=$("#"+this.options.addToCartProductMaskIframe),this.cartpopclose=this.options.cartpopclose,this.timer=null,this.isIE6=$.browser.msie&&"6.0"==$.browser.version,this.Init()};
addToCartProduct.prototype={SetOptions:function(b){this.options={quantity:"quantity",prosizeid:"hiddenOptions",buyItNow:"buyItNow",sel_country:"hiddenCountry",isBlackBuyer:"isBlackBuyer",matrixbuykeys:"matrixbuykeys",matrixsalekeys:"matrixsalekeys",buyerCountryId:"buyercountryid",toolalreadyadd:"toolalreadyadd",getASampleArea:"getASampleArea",continueShopping:"continueShopping",addToCartButton:"addToCartButton",addToCartProduct:"addToCartProduct",addToCartProductContent:"addToCartProductContent",
addToCartProductMask:"ShippingCostMask",selectPropertiesNotice:"selectPropertiesNotice",selectPropertiesNoticeList:"selectPropertiesNoticeList",addToCartProductMaskIframe:"ShippingCostMaskIframe",cartpopclose:"cartpopclose"};$.extend(this.options,b||{})},Init:function(){this.params={_BuyProductNow:"BuyProductNow"};this.prosizeidValue=this.prosizeid.val();this.prosizeidValue||(this.prosizeidValue="");this.selCountryValue="0"==this.productType?this.sel_country.val():this.buyerCountryId.val();this.Load();
"103030007"===_catelogID&&FNYearTip.init()},CheckBuyAttrVal:function(b,c){b.stopPropagation();var d=DHCookieUtil.getcookie("vid").replace(/\=/ig,"");if(!DHCookieUtil.getcookies("yearMarkCookie",d)&&"103030007"===_catelogID)return FNYearTip.ShowYeartip(c),!1;for(var d=$(b.target),f="",e="",g=DH_Product_Properties_Color_Object.colorListHiddenInput,l=0;l<g.length;l++){var h=g[l];if(0<=h.indexOf("hiddenBuy_")){var m="listBuy_"+h.split("_")[1],n=$("#"+m+" li"),p=$("#"+m).attr("attrid");if(0<n.length){for(var r=
0,q=0,h=0;h<n.length;h++)$(n[h]).is("[selectedattr='js-selectedAttr']")?r++:"color-fail"==$(n[h]).attr("class")&&q++;0>=r&&q<n.length&&(function(){var b=$("#"+m).parent(),c=b.find(".js-attr-error");0<c.length?c.show():b.append('<div class="qtyerror js-attr-error" style="display: block;">'+$L("detial_valid_unSelected",{select:$("#"+p).text().replace(":","")})+"</div>")}(),d.attr("id")==this.options.toolAddtoCart&&$(window).scrollTop(100),e+="<li>"+$("#"+p).text().substring(0,$("#"+p).text().length-
1)+"</li>")}}else if(n=$("#customSize li"),0<n.length){for(var q=r=0,v=$("#customSize").attr("vhidden"),h=0;h<n.length;h++)$(n[h]).is("[selectedattr='js-selectedAttr']")?r++:"color-fail"==$(n[h]).attr("class")&&q++;0>=r&&q<n.length&&(function(){var b=$("#customSize").parent(),c=b.find(".js-attr-error");0<c.length?c.show():b.append('<div class="qtyerror js-attr-error" style="display: block;">'+$L("detial_valid_unSelected",{select:$("#"+v).text().replace(":","")})+"</div>")}(),e+="<li>"+$("#"+v).text().substring(0,
$("#"+v).text().length-1)+"</li>")}""==e&&(f+=$("#"+g[l]).val()+"-")}return""==e?!0:!1},DhgateBtnTrack:function(b){_dhq=_dhq||[];_dhq.push(["setVar","itemcode",_itemcode]);_dhq.push(["setVar","cid",_pro_catalogid]);_dhq.push(["setVar","pid",_pid]);_dhq.push(["pageview",b])},BuyProductNow:function(){var b=this;b.buyItNow.click(function(c){if(b.CheckBuyAttrVal(c,"BuyProductNow")&&""!=$("#selectedSkuVal").val())if($("#returnurl").val(window.location.href),$("#impressionInfo").val(b.setLocationHash()),
c=c=$("#_cur_shippingtypeid").val()||"",$("#shipType").val(c),$("#inventoryLocationCountryId").val(),$("#stProductDiv").is(":hidden")){var d=$("#hiddenCountry").val();$("#shipCoutry").val(d);b.DhgateBtnTrack("pdbn");document.productdisplayForm.submit()}else if(c=$("#planchoosebox .this"),0<c.length){d=$("#hiddenCountry").val();$("#shipCoutry").val(d);d="";0<c.length&&(c=$(c[0]).attr("id"),d=$("#"+c+"AddCart").val());if(""!=d)for(c=d.split("&"),d=0;d<c.length;d++){var f=c[d].split("=");"stSkuId"==
f[0]&&$("#stSkuId").val(f[1]);"stSkuMd5"==f[0]&&$("#stSkuMd5").val(f[1]);"stItemCode"==f[0]&&$("#stItemCode").val(f[1]);"stSupplierid"==f[0]&&$("#stSupplierid").val(f[1])}$("#selectedSkuVal").val();d=$(".js-wholesale-list li");c="";0<d.length&&(c=d.eq(0).attr("price")||0,d=$("#radixUnit").val(),c/=d);$("#productToSTPrice").val(c);b.DhgateBtnTrack("pdbn");document.productdisplayForm.submit()}else new buySt({isDisplay:1==$("#tuangou").val()||1!=$("#isCallStProd").val()?!1:!0})})},setLocationHash:function(){var b=
location.hash;""!=b&&1<b.length&&(b=b.substr(1));return b},Load:function(){var b=this,c="",d="",f="",e="";this.BuyProductNow();this.addToCartButton.click(function(g){if(b.CheckBuyAttrVal(g)&&(c=$("#selectedSkuVal").val(),d=$("#selectedSkuMd5Val").val(),""!=c&&"block"!=b.isBlackBuyer.css("display"))){b.addToCartProductContent.html('<div class="popup-loading"></div>');b.addToCartProduct.css({display:"block"});b.addToCartProductMask.css({display:"block"});b.Resize();g="";"block"==$("#customSizeInfo").css("display")&&
(f=$("#hiddenAttrvalcm").val(),0<$("#remarksText").length&&(g=$("#remarksText").val()),""!=g&&(g=escape(g)),$("#remarksText").val(),e=$("#customSizeInput").val());var l=$("#hiddenCountry").val(),h=b.setLocationHash(),m=$("#stSupplierid").val(),n=$("#inventoryLocationCountryId").val(),p=$("#_cur_shippingtypeid").val()||"";g="//shoppingcart.dhgate.com/cart/addToCartForProduct.do?addfrom="+$("#displaypriceAB").val()+"&shipType="+p+"&act=addToCartforProduct&isblank=true&stSupplierid="+m+"&shipCoutry="+
l+"&supplierid="+_toid+"&itemcode="+_itemcode+"&skuId="+c+"&skuMd5="+d+"&quantity="+$.trim(b.quantity.val())+"&cou="+b.selCountryValue+"&customattr="+f+"&specification="+g+"&unit="+e+"&counterfeittypeid="+_counterfeittypeid+"&impressionInfo="+h+"&inventoryLocationCountryId="+n+"&sy="+$("#shopifysign").val()+"&ifpb="+$("#displayBannerSign").val();$("#stProductDiv").is(":hidden")||(l=$("#planchoosebox .this"),h="",0<l.length&&(l=$(l[0]).attr("id"),h=$("#"+l+"AddCart").val()),""!=h&&(g=g+"&"+h),$("#selectedSkuVal").val(),
h=$(".js-wholesale-list li"),l="",0<h.length&&(l=h.eq(0).attr("price")||0,h=$("#radixUnit").val(),l/=h),g=g+"&productToSTPrice="+l);(l=$.trim($("#cpsMark").val()))&&(g=g+"&cpsMark="+l);b.prosizeidValue||(b.prosizeidValue="");DH.request({url:g,type:"GET",dataType:"jsonp",cache:!1,success:function(c){c=c?c.result:"";null==c||""==c?(b.addToCartProduct.css({display:"none"}),b.addToCartProductMask.css({display:"none"}),b.isBlackBuyer.css({display:"block"}),b.toolalreadyadd.html($L("detail_msg_addProdctToCartError",
{_sellerDomainname:_sellerDomainname})),b.toolalreadyadd.css({display:"block"})):(b.addToCartButton.removeAttr("init-src"),b.addToCartProductContent.find("div").remove(),b.addToCartProductContent.append(c),b.addToCartProduct.css({visibility:"hidden"}),b.Close(),b.Load.first="true",$("#cartcnt").text($("#basketSize").val()),b.toolalreadyadd.css({display:"block"}),$("#isaddtocart").val("1"),b.LoadCrossPromotion())}})}})},Resize:function(){var b=this;this.timer&&clearTimeout(this.timer);this.SetPosition();
this.timer=setTimeout(function(){b.Resize()},100)},SetPosition:function(){if("none"!=this.addToCartProduct.css("display")){var b,c,d,f,e,g,l;b=$(document).height();c=Math.min($(document).width(),$("body").outerWidth(!0));d=this.addToCartProduct.children("table").height();f=this.addToCartProduct.children("table").width();e=$(window).height();g=$(window).width();l=$(window).scrollTop();lScroll=$(window).scrollLeft();this.isIE6?(g=parseInt((g-f)/2+lScroll),e=parseInt((e-d)/2+l)):(g=parseInt((g-f)/2),
e=parseInt((e-d)/2));this.addToCartProduct.css({top:e,left:g,width:f,height:d});this.addToCartProductMask.css({width:c,height:b,opacity:.5});this.addToCartProductMaskIframe.css({width:c,height:b,opacity:0});"true"==this.Load.first&&this.addToCartProduct.css({visibility:"visible"})}},Close:function(){var b=this;$("#"+this.cartpopclose).click(function(){b.addToCartProduct.css({display:"none"});b.addToCartProductMask.css({display:"none"})});$("#"+this.continueShopping).click(function(){b.addToCartProduct.css({display:"none"});
b.addToCartProductMask.css({display:"none"})})},LoadCrossPromotion:function(){var b=this;$("#loadcross").load("/dhrec/add_to_cart_recommendation.action?pagetype=9&itemcode="+_itemcode+"&catalog="+_pro_catalogid,function(c){try{var d=$.parseJSON(c);c="";null!=d.ot&&(c=$.trim(d.ot));var f=$.trim(d.pagetrack);""!=c&&""!=f&&b.CropSale(c,f);null==$.trim(d.content)||""==$.trim(d.content)?$("#loadcross").html(""):$("#loadcross").html(d.content)}catch(e){$("#loadcross").html("")}})},CropSale:function(b,c){try{var d=
_dhta.getTracker();d.setVar("searchcontent",c);d.pageview(b)}catch(f){}}};function MM_openBrWindow(b,c,d){window.open(b,c,d)}function Pt(b,c){var d=_dhta.getTracker();d.setVar("vd",c);d.pageview(b)}function Pts(b,c,d){var f=_dhta.getTracker();f.setVar("vd",c);f.setVar("itemcode",d);f.pageview(b)}function ResetValue(){$("#productdisplayForm")[0].reset();for(var b=$("input[type=hidden]"),c=0;c<b.length;c++)"1"==$(b[c]).attr("reset")&&$(b[c]).val($(b[c]).attr("initial"))}
function InitProperty(){if(0<_buyAttrListSize){0<_buyAttrCustomListSize&&(DH_Product_Properties_Color_Object.colorList.push("customSize"),DH_Product_Properties_Color_Object.colorListHiddenInput.push("hiddenBuycustomSize"));for(var b=1;b<=_buyAttrListSize;b++)DH_Product_Properties_Color_Object.colorList.push("listBuy_"+b),DH_Product_Properties_Color_Object.colorListHiddenInput.push("hiddenBuy_"+b);for(b=0;b<DH_Product_Properties_Color_Object.colorList.length;b++)document.getElementById(DH_Product_Properties_Color_Object.colorList[b])||
(DH_Product_Properties_Color_Object.colorList.splice(b,1),DH_Product_Properties_Color_Object.colorListHiddenInput.splice(b,1))}}
function inputTextTips(){var b=$("#messageTextarea"),c=$L("detail_tips_inputTextTips");b.val(c);b.focus(function(){1!=this.markTextarea?$(this).val("").css({color:"#000"}):1==this.markTextarea&&(this.markTextarea=2)}).blur(function(){""==$.trim($(this).val())?$(this).css({color:"#999"}).val(c):this.markTextarea=1});var b=$("#verifycodeInput"),d=$("#MzImgExpPwd"),f=$("#aMzImgExpPwd"),e=$L("detail_login_verifycode");b.val(e);b.focus(function(){"inline"!=d.css("display")&&d.css({display:"inline"}).attr({src:"https://secure.dhgate.com/verifycode.jsp?width=72&height=22&fontsize=19&charlength=4&temp="+
(new Date).getTime().toString(36)});1!=this.markInput?$(this).val("").css({color:"#000"}):1==this.markInput&&(this.markInput=2)}).blur(function(){""==$.trim($(this).val())?$(this).css({color:"#999"}).val(e):this.markInput=1});f.click(function(){d.css({display:"inline"}).attr({src:"https://secure.dhgate.com/verifycode.jsp?width=72&height=22&fontsize=19&charlength=4&temp="+(new Date).getTime().toString(36)})})}
function toggleCategories(){var b=$("#moreLink"),c=$("#moreMultidimensioncate");b.click(function(){"none"==c.css("display")?($(this).attr("class","moreactive"),$(this).html($L("common_fewer")),c.show()):"block"==c.css("display")&&($(this).attr("class","morebtn"),$(this).html($L("common_more")),c.hide())})}var Bubbling=function(b){this.SetOptions(b);this.colmain=$("."+this.options.colmain);this.init()};
Bubbling.prototype={SetOptions:function(b){this.options={colmain:"col-main"};$.extend(this.options,b||{})},init:function(){var b=this;this.colmain.delegate(".bubblingbtn","mouseenter",function(c){c=$(c.currentTarget);b.hover(1,c)});this.colmain.delegate(".bubblingbtn","mouseleave",function(c){c=$(c.currentTarget);b.hover(0,c)})},hover:function(b,c){1===b?c.find(".newpopcon").show():c.find(".newpopcon ").hide()}};
$(function(){1==$("#tuangou").val()&&$(".j-countdown").each(function(b,c){var d=$(c).attr("starttime")||0,f=setInterval(function(){var b=$(c),g=(d-+new Date)/1E3;if(0>=g)clearInterval(f),b.hide();else{var l=parseInt(g/86400),h=parseInt((g-86400*l)/3600),m=parseInt((g-86400*l-3600*h)/60),g=parseInt(g-86400*l-3600*h-60*m);b.is(":hidden")&&b.show();b.find("span").text((0<l?l+"d : ":"")+(9<h?h+"h":"0"+h+"h")+" : "+(9<m?m+"m":"0"+m+"m")+" : "+(9<g?g+"s":"0"+g+"s"))}},1E3)})});
$(function(){if(1==$("#tuangou").val()){var b;$(".tellmyfriend").hover(function(){b&&clearTimeout(b);$(this).nextAll(".sharelayyer").addClass("share-show")},function(){var c=$(this);b=setTimeout(function(){c.nextAll(".sharelayyer").removeClass("share-show")},50)});$(".sharelayyer").hover(function(){clearTimeout(b);$(this).addClass("share-show")},function(){var c=$(this);b=setTimeout(function(){c.removeClass("share-show")},50)})}});
$(function(){if(1==$("#tuangou").val()){var b=+$("#maxGroupNumPerPeoper").val(),c=+$("#surplusSalesNum").val(),d=+$("#inventoryQtyNum").html();selectedInventory="1"==$("#isHasInventory").val()?Math.min(Math.min(b,c),d):Math.min(b,c)}});$(function(){1==$("#tuangou").val()&&($(".wprice-list.js-wholesale-box").hide(),$(".s-arrow").hide())});$(document).ready(function(){0<$("#storepromotion").length&&new Bubbling});
function sjzxprice(){jQuery.ajax({url:"/product/mobileprict.do",type:"GET",dataType:"json",data:{isblank:!0,itemcode:_itemcode,supplierid:_toid,commtype:$("#commtype").val(),isvipprod:$("#isvipprod").val()},cache:!1,success:function(b){var c=$("#languageId").val();if(null!=b){var d=$("#sjzx_price_show").html(),d=b.mobilePriceVO.promVipMaxMobileBuyerPrice==b.mobilePriceVO.promVipMinMobileBuyerPrice?"PT"==c||"pt"==c?d+"<span class='aprice'> "+b.mobilePriceVO.promVipMinMobileBuyerPrice+" USD</span>":
d+"<span class='aprice'> US $"+b.mobilePriceVO.promVipMinMobileBuyerPrice+"</span>":"PT"==c||"pt"==c?d+"<span class='aprice'> "+b.mobilePriceVO.promVipMinMobileBuyerPrice+"-"+b.mobilePriceVO.promVipMaxMobileBuyerPrice+" USD</span>":d+"<span class='aprice'> US $"+b.mobilePriceVO.promVipMinMobileBuyerPrice+"-"+b.mobilePriceVO.promVipMaxMobileBuyerPrice+"</span>";$("#sjzx_price_show").html(d);$("#sjzx_price_show").show()}},error:function(b){}})}$(document).ready(function(){sjzxprice()});
define("appDetail/tpl/wholesaleTpl",[],function(b){return{wrap:'<div class="key-info-ri clearfix ">;<div class="wprice-list js-wholesale-box">;<ul class="js-wholesale-list"></ul>;</div>;<div class="s-arrow"><span class="s-ltarrow disnone js-prev"></span><span class="s-rtarrow disnone js-next"></span></div>;</div>'.split(";"),item:'<li nums="<%=nums%>" class="<% if(index==0){ %>current<% } %>" price="<%=price%>">;<span class="col1"><%=start%> +</span>;<span class="col2">US $<%=price%></span>;<%if(price != originalPrice){%>;<span class="col3">US $<%=originalPrice%></span>;<%}%>;</li>'.split(";")}});
define("appDetail/tpl/attributeTpl",[],function(){return{moreAttribute:['<div class="select-moreattr"><span class="moreAttr-btn"><span class="unit-price-button color-more ">more</span></span><div class="newpopcon opt-layer colorattr-list clearfix" style="display:none"><ul class="color-list clearfix"></ul></div></div>']}});
define("appDetail/common/wholesalePrice",["common/config","lib/backbone","tools/template"],function(b,c,d){function f(b){function c(c){if(b.circular)c<=b.start-u-1?(x.css(h,-((w-2*u)*z)+"px"),c=c==b.start-u-1?w-2*u-1:w-2*u-b.scroll):c>=w-u+1&&(x.css(h,-(u*z)+"px"),c=c==w-u+1?u+1:u+b.scroll);else if(0>c||c>w)return;return c}var e=this;if(!(e instanceof f))return new f($.extend(l,b||{}));b=$.extend(l,b||{});e.config=b;e.container=$(b.container);e.guid=++GUID+"carousel";var d=b.disableBtnCls;g.isString(d)&&
(d=b.disableBtnCls=[d,d]);g.isString(b.panels)&&(b.panels=$(b.panels,e.container));var h=b.vertical?"top":"left",q=b.vertical?"height":"width",v=b.panels,t=v.size(),u=b.visible;b.visible>t&&(b.circular=!1);b.btnPrev&&(g.isString(b.btnPrev)&&(b.btnPrev=$(b.btnPrev,e.container)),b.btnPrev.click(function(){b.btnPrev.hasClass(d[0])||e.go(e.curr-b.scroll);return!1}),b.btnPrev[["removeClass","addClass"][~~(!b.start&&!b.circular)]](d[0]));b.btnNext&&(g.isString(b.btnNext)&&(b.btnNext=$(b.btnNext,e.container)),
b.btnNext.click(function(){b.btnNext.hasClass(d[1])||e.go(e.curr+b.scroll);return!1}),b.btnNext[["removeClass","addClass"][~~(t<b.scroll)]](d[1]));if(!t)return!1;var x=$(b.panels[0].parentNode),y=x.parent();v.each(function(b,c){$(c).attr("es-r",b+1)});b.circular&&(x.prepend(v.slice(t-u).clone()).append(v.slice(0,u).clone()),b.start+=u);var A=x.children(),w=A.size();e.curr=b.start;y.css("visibility","visible");A.css({overflow:"hidden","float":b.vertical?"none":"left"});x.css({margin:"0",padding:"0",
position:"relative","list-style-type":"none","z-index":"1"});y.css({overflow:"hidden",position:"relative","z-index":"2",left:"0px"});var z=b.vertical?e.config.fullSize?e.config.fullSize[0]:$(A[0]).outerHeight(1):e.config.fullSize?e.config.fullSize[0]:$(A[0]).outerWidth(1),v=z*w,C=b.viewSize[~~b.vertical]||A[["width","height"][~~b.vertical]]();A.css(q,C+"px");x.css(q,v+"px").css(h,-(e.curr*z));b.btnGo&&(g.isString(b.btnGo)&&(b.btnGo=$(b.btnGo,e.container)),$.each(b.btnGo,function(c,d){$(d).click(function(){return e.go((b.circular?
b.visible:0)+c*b.scroll)})}));b.auto&&(q=function(){e.later=g.later(function(){e.go(e.curr+b.scroll)},b.auto+b.speed,!0)},v={mouseenter:function(){e.later&&e.later.cancel()},mouseleave:q},q(),y.bind(v),b.btnNext&&b.btnNext.bind(v),b.btnPrev&&b.btnPrev.bind(v));e.go=function(d){if(!b.running){oldVisibles=A.slice(e.curr).slice(0,b.scroll);d=e.curr=c(d);var f=A.slice(e.curr).slice(0,b.scroll),m={container:e.container,currentIndex:~~f.slice(0,1).attr("es-r"),visibles:f,oldVisibles:oldVisibles};e.container.trigger("switch"+
e.guid,m);b.running=!0;b.circular||(0>d?d=0:d+b.visible>w&&(d=b.visible>t?0:w-b.visible));x.animate("left"==h?{left:-(d*z)}:{top:-(d*z)},b.speed,b.easing,function(){e.container.trigger("switched"+e.guid,m);b.running=!1});if(!b.circular){d=b.disableBtnCls;if(b.btnPrev)b.btnPrev[["removeClass","addClass"][~~(0>=e.curr)]](d[0]);if(b.btnNext)b.btnNext[["removeClass","addClass"][~~(e.curr+b.scroll>=w)]](d[1])}}return!1}}var e=window;b=$.extend(!0,window.DH||{Detail:{}});GUID=0;oldVisibles=null;var g={later:function(b,
c,e,d,f){var h=function(b,c){return Object.prototype.toString.call(b)===(c?c:"[object Function]")};c=c||0;d=d||{};var m=null===f||void 0===f?[]:k(f,"[object Array]")?f:!k(f.length,"[object Number]")||k(f)||h(f,"[object Function]")?[f]:Array.prototype.slice.call(f),g;k(b)&&(b=d[b]);f=function(){b.apply(d,m)};g=e?setInterval(f,c):setTimeout(f,c);return{id:g,interval:e,cancel:function(){this.interval?clearInterval(g):clearTimeout(g)}}},isString:function(b,c){return Object.prototype.toString.call(b)===
(c?c:"[object String]")}},l={panels:[],btnPrev:null,btnNext:null,disableBtnCls:"disabled",btnGo:null,auto:null,speed:200,easing:null,vertical:!1,circular:!0,visible:5,start:0,scroll:1,running:!1,viewSize:[],fullSize:null};$.extend(f.prototype,{on:function(b,c){this.container.bind(b+this.guid,function(b,e){b.stopPropagation();c.call(b,e)})},next:function(){this.go(this.curr+this.config.scroll)},prev:function(){this.go(this.curr-this.config.scroll)},setOptions:function(b){$.extend(!0,this.config,b)},
destroy:function(){var b=this.config;$(b.btnNext).unbind("click");$(b.btnPrev).unbind("click");this.go(this.config.start)}});e[b]=$.extend(!0,{},e[b]||{});e[b].Detail=e[b].Detail||{};e[b].Detail.Carousel=f;c=function(b){var c={disableCLs:"disnone",sku:$("#selectedSkuVal").val(),wrapCLs:".js-wholesale-wrap",listWarp:".js-wholesale-list",MAX1024:null,MIN1024:null};this.config=$.extend(c,b);this.init()};c.prototype={init:function(){this._sku_=this.config.sku;this.Business=null;this.events()},events:function(){this._initCarousel(this._getWrap());
$(window).bind("resize",$.proxy(this.resize,this))},_initCarousel:function(b){var c=$(e).width();this._sku_=$(b).attr("data-sku");c=this.getConfig(c,b);c.visible<$(c.panels,b).length?($(c.btnNext,b).parent().show(),$(c.btnNext,b).removeClass(this.config.disableCLs),this.Business=new f(c)):($(c.btnNext,b).parent().hide(),$(c.btnNext,b).addClass(this.config.disableCLs),$(c.btnPrev,b).addClass(this.config.disableCLs))},_getWrap:function(b){return $(".js-wholesale-wrap")},resize:function(){this.changeWholesal(this._getWrap())},
changeWholesal:function(b){var c=$(e).width(),d=$(b).attr("data-sku");b=b||$(this.config.wrapCLs);this._sku_=d;$(b).find(this.config.listWarp).css("width","");this.Business&&this.Business.destroy();this.Business=void 0;c=this.getConfig(c,b);c.visible<$(c.panels,b).length?($(c.btnNext,b).parent().show(),$(c.btnNext,b).removeClass(this.config.disableCLs),this.Business=new f(c)):($(c.btnNext,b).parent().hide(),$(c.btnNext,b).addClass(this.config.disableCLs),$(c.btnPrev,b).addClass(this.config.disableCLs))},
getConfig:function(b,c){var d={container:c,viewBox:".js-wholesale-box",panels:".js-wholesale-list li",btnPrev:".js-prev",btnNext:".js-next",disableBtnCls:"disnone",vertical:0,circular:0,speed:200,btnGo:null},f=this.config;return d=1024<$(e).width()?$.extend(d,{scroll:4,visible:4,viewSize:f.MAX1024?f.MAX1024.viewSize:[83,50],fullSize:f.MAX1024?f.MAX1024.fullSize:[102,50]}):$.extend(d,{scroll:2,visible:2,viewSize:f.MIN1024?f.MIN1024.viewSize:[90,50],fullSize:f.MIN1024?f.MIN1024.fullSize:[106,50]})}};
e[b]=$.extend(!0,{},e[b]||{});e[b].Detail=e[b].Detail||{};return e[b].Detail.wholesale=c});
define("appDetail/common/sizetemplate",[],function(){var b=function(b){this.SetOptions(b);this.selectors=this.options.selectors;this.isIE6=$.browser.msie&&"6.0"==$.browser.version;this.Init()};b.prototype={SetOptions:function(b){this.options={selectors:{sizebtn:".j-sizing-info",sizetab:".j-sizetab li"}};$.extend(this.options,b||{})},Init:function(){var b=$("body");b.delegate(this.selectors.sizebtn,"click",$.proxy(this.showSize,this));b.delegate(this.selectors.sizetab,"click",$.proxy(this.tabSwitch,
this))},showSize:function(){var b=this,d=$("body"),f=$("#supplierid").val(),e=$("#szSellerTemplateId").val();d.append('<div class="newpopcon coupopbox size-pop-loading j-loadingbox"></div>');d.append('<div class="size-tpl-mask j-sizetpl-mask"><iframe class="j-mask-iframe"></iframe></div>');b.popShow(".j-loadingbox");DH.request({url:"/product/product_template_ajax.do",type:"GET",data:{supplierId:f,szSellerTemplateId:e},cache:!1,dataType:"html",success:function(c){c?($(".j-loadingbox").remove(),d.append(c),
b.popShow(".j-sizetpl-dialog"),b.closePop(".j-sizetpl-dialog")):(c='<div class="newpopcon coupopbox size-pop-tips j-sizetips-dialog"><span class="icon-bclose j-close-dialog"></span><div class="size-tips-con"><b></b>'+$L("detail_tips_sizetemplate")+"</div></div>",$(".j-loadingbox").remove(),d.append(c),b.popShow(".j-sizetips-dialog"),b.closePop(".j-sizetips-dialog"))}})},tabSwitch:function(b){b=$(b.target);var c=b.closest(".j-tab-container"),f=c.find(b.attr("data-target"));b.addClass("current").siblings().removeClass("current");
c.find(".j-tabcon").hide();f.show()},popShow:function(b){var c=this;c.setPosition(b);$(window).bind("scroll resize",function(){c.setPosition(b)})},setPosition:function(b){var c,f,e,g,l,h,m,n=$(".j-sizetpl-mask"),p=$(".j-mask-iframe");c=$(document).height();f=Math.min($(document).width(),$("body").outerWidth(!0));e=$(b).outerHeight(!0);g=$(b).outerWidth(!0);l=$(window).height();h=$(window).width();m=$(window).scrollTop();lScroll=$(window).scrollLeft();this.isIE6?(g=parseInt((h-g)/2+lScroll),e=parseInt((l-
e)/2+m)):(g=parseInt((h-g)/2),e=parseInt((l-e)/2));$(b).css({top:e,left:g});n.css({width:f,height:c});p.css({width:f,height:c})},closePop:function(b){var c=$(".j-sizetpl-mask");$("body").delegate(".j-close-dialog","click",function(d){$(d.target).parents(b).remove();c.remove()})}};return b});
define("appDetail/common/d1-tracking",["common/config","tools/jquery.cookie","tools/dhgate.cookie"],function(b,c,d){return{execDetailTrack:function(b){window._dhq=window._dhq||[];var c=$.cookie("DHgate_toolbar");_dhq.push(["setVar","content",c]);_dhq.push(["setVar","itemcode",_itemcode]);_dhq.push(["setVar","pid",_pid]);_dhq.push(["setVar","cid",_pro_catalogid]);_dhq.push(["pageview",b])}}});
define("appDetail/common/adclickcharging",["common/config","lib/backbone"],function(b,c,d,f){function e(b){this.options={uri:"//adcenter.dhgate.com/ppc/settle?msg=",msg:"admsg"}}e.prototype={setParams:function(b){this.options=b||this.options},getQueryString:function(b){b=new RegExp("(^|&)"+b+"=([^&]*)(&|$)","i");b=window.location.search.substr(1).match(b);return null!=b?unescape(b[2]):null},trackmsg:function(b){null!=b&&function(b){var c=new Image(1,1);c.src=b;c.onload=function(){c.onload=null}}("//adcenter.dhgate.com/ppc/settle?msg="+
b)}};return new e});
define("appDetail/common/dispatchPledge",[],function(){var b=function(b){this.SetOptions(b);this.selectors=this.options.selectors;this.Init()};b.prototype={SetOptions:function(b){this.options={selectors:{suppierID:"#supplierid",itemCode:"#itemcode",pledgeWrap:".j-pledge-wrap",isOntimeType:".j-isOntime",isOverseasType:".j-isOverseas",isChinaBrandType:".j-isChinaBrand",isMerchandiseType:".j-isMerchandise",isCertificationType:".j-isCertification"}};$.extend(this.options,b||{})},Init:function(){var b=$("body"),
d=this.options.selectors;this.checkInfo();b.delegate(d.pledgeWrap,"mouseenter",$.proxy(this.showList,this));b.delegate(d.pledgeWrap,"mouseleave",$.proxy(this.hideList,this))},checkInfo:function(){var b=this.options.selectors,d=$(b.suppierID).val(),f=$(b.itemCode).val();DH.request({url:"/product/productguaranteedajax.do",type:"GET",data:{supplierid:d,itemcode:f},cache:!1,dataType:"json",success:function(c){if(""!=c){var e=c.isOntime,d=c.isOverseas,f=c.isChinaBrand,m=c.isMerchandise;c=c.isCertification;
e&&"1"==e&&($(b.pledgeWrap).show(),$(b.isOntimeType).show());d&&"1"==d&&($(b.pledgeWrap).show(),$(b.isOverseasType).show());f&&"1"==f&&($(b.pledgeWrap).show(),$(b.isChinaBrandType).show());m&&"1"==m&&($(b.pledgeWrap).show(),$(b.isMerchandiseType).show());c&&"1"==c&&($(b.pledgeWrap).show(),$(b.isCertificationType).show())}},error:function(){}})},showList:function(){$(this.options.selectors.pledgeWrap).addClass("hover fande")},hideList:function(){$(this.options.selectors.pledgeWrap).removeClass("hover fande")}};
return b});
define("appDetail/customMade",["common/config","lib/backbone","tools/template","appDetail/selectMenu"],function(b,c,d,f){b=function(b){this.SetOptions(b);document.getElementById(this.options.customSizeWarp)&&(this.customSizeInfo=$("#"+this.options.customSizeInfo),this.customSizeWarp=$("#"+this.options.customSizeWarp),this.customOptions=$("#"+this.options.customOptions),this.customOptionsContent=$("#"+this.options.customOptionsContent),this.customOptionsMask=$("#"+this.options.customOptionsMask),this.hiddenAttrvalcm=
$("#"+this.options.hiddenAttrvalcm),this.customOptionsMaskIframe=$("#"+this.options.customOptionsMaskIframe),this.customOptionsYesButton=$(this.options.customOptionsYesButton),this.customOptionsSubmitButton=this.options.customOptionsSubmitButton,this.customOptionsClose=this.options.customOptionsClose,this.hiddenBuycustomSize=$("#"+this.options.hiddenBuycustomSize),this.customOptionsCancelButton=this.options.customOptionsCancelButton,this.timer=null,this.isIE6=$.browser.msie&&"6.0"==$.browser.version,
this.colorListObject=this.options.colorListObject,this.Init())};b.prototype={SetOptions:function(b){this.options={customSizeInfo:"customSizeInfo",customSizeWarp:"customSizeWarp",customOptionsYesButton:".customOptionsYesButton",customOptionsSubmitButton:"customOptionsSubmitButton",customOptions:"customOptions",hiddenAttrvalcm:"hiddenAttrvalcm",customOptionsContent:"customOptionsContent",customOptionsMask:"customOptionsMask",customOptionsMaskIframe:"customOptionsMaskIframe",customOptionsClose:"customOptionsClose",
hiddenBuycustomSize:"hiddenBuycustomSize",customOptionsCancelButton:"customOptionsCancelButton",colorListObject:null};$.extend(this.options,b||{})},Init:function(){for(var b=0;b<DH_Product_Properties_Color_Object.colorList.length;b++)if(DH_Product_Properties_Color_Object.colorList[b]==_customSize){this._index=DH_Product_Properties_Color_Object.colorList.length;break}this.Load();this.ControlList()},Load:function(){var b=this,c="";this.customOptionsYesButton.live("click",function(e){if("LI"!=e.target.nodeName||
$(e.target).hasClass("color-selected"))if(b.customOptions.css({display:"block"}),b.customOptionsMask.css({display:"block"}),b.Resize(),"true"!=b.Load.flag){c=$.trim(b.hiddenBuycustomSize.attr("attrvalid"));if(null!=$("#hiddenIamgeUrl").val()||""!=$("#hiddenIamgeUrl").val())imageUrl=escape($("#hiddenIamgeUrl").val());DH.request({url:"/product/turnForProdCm.do",type:"GET",dataType:"html",cache:!1,data:{attrValId:c,iamgeUrl:imageUrl,catePubId:_pro_catepubid},success:function(c){b.customOptions.find("div").remove();
b.customOptionsContent.html(c);b.customOptions.css({visibility:"hidden"});b.CheckInput();b.checkRemarkLength();b.Submit();b.Close();b.Load.first="true";new f({selectWarp:["customSizeUnitWarp"],hiddenInput:["customSizeHiddenInput"],textInput:["customSizeInput"],arrow:["customSizeSelectArrow"],list:["customSizeUnitSelectList"]});b.ChangeUnit()}});b.Load.flag="true"}})},Resize:function(){var b=this;this.timer&&clearTimeout(this.timer);this.SetPosition();this.timer=setTimeout(function(){b.Resize()},100)},
SetPosition:function(){if("none"!=this.customOptions.css("display")){var b,c,d,f,m,n,p;b=Math.min($(document).height(),$("body").outerHeight(!0));c=Math.min($(document).width(),$("body").outerWidth(!0));d=this.customOptions.children("table").height();f=this.customOptions.children("table").width();m=$(window).height();n=$(window).width();p=$(window).scrollTop();lScroll=$(window).scrollLeft();this.isIE6?(n=parseInt((n-f)/2+lScroll),m=parseInt((m-d)/2+p)):(n=parseInt((n-f)/2),m=parseInt((m-d)/2));this.customOptions.css({top:m,
left:n,width:f,height:d});this.customOptionsMask.css({width:c,height:b,opacity:.5});this.customOptionsMaskIframe.css({width:c,height:b,opacity:0});"true"==this.Load.first&&this.customOptions.css({visibility:"visible"})}},ControlList:function(){var b=this;this.customSizeWarp.click(function(c){if("LI"==c.target.nodeName)try{void 0!=b.colorListObject.ClickItems.__index[b._index-1]&&($(b.customOptionsYesButton[1]).css({display:"none"}),b.customSizeInfo.css({display:"none"}))}catch(l){}})},Submit:function(){var b=
this,c,d="",f="",m="";$("#"+this.customOptionsSubmitButton).click(function(){var e=!0;c=$("input[name='textinput']");c.each(function(b){""==$.trim($(c[b]).val())&&(e=!1)});e&&(b.customOptions.css({display:"none"}),b.customOptionsMask.css({display:"none"}),b.customSizeInfo.css({display:"block"}),d=b.hiddenBuycustomSize.attr("attrvalid")+",",c.each(function(b){f=""==f?$(c[b]).attr("attrvalcmid")+"_"+$(c[b]).val():f+"-"+$(c[b]).attr("attrvalcmid")+"_"+$(c[b]).val();m=""==m?"<span>"+$(c[b]).attr("attrvalcmName")+
": <b>"+$(c[b]).val()+"</b> "+$("#customSizeInput").val()+"</span>":m+",<span>"+$(c[b]).attr("attrvalcmName")+": <b>"+$(c[b]).val()+"</b> "+$("#customSizeInput").val()+"</span>"}),d+=f,b.hiddenAttrvalcm.val(d),b.customSizeInfo.html(m),$("#hiddenunit").val($("#customSizeInput").val()),$("#customattr").val(d),$("#hiddenRemark").val($("#remarksText").val()),$(b.customOptionsYesButton[1]).css({display:"block"}),m=f=d="")})},CheckInput:function(){var b,c=/^(\+|-)?\d+($|\.\d+$)/;b=$("input[name='textinput']");
b.each(function(e){$(b[e]).blur(function(d){c.test($(b[e]).val())||$(b[e]).val("")})})},getsubString:function(b,c){var e=b.replace(/[^\x00-\xff]|[\r\n]/g,"xx").length,d,f=0,g="";if(e<=c)return b;for(var p=0;p<e;p++){d=b.charAt(p).toString();null!=d.match(/[^\x00-\xff]|[\r\n]/g)?f+=2:f++;if(f>c)break;g+=d}return g},checkRemarkLength:function(){var b=this;$("#remarksText").blur(function(c){c=$("#remarksText").val();2E3<c.replace(/[^\x00-\xff]|[\r\n]/g,"xx").length&&($("#remarksText").val(b.getsubString(c,
2E3)),$("#remarksText").focus())})},Close:function(){var b=this;$("#"+this.customOptionsClose).click(function(){if("none"==b.customSizeInfo.css("display")){$(b.customOptionsYesButton[0]).removeClass("color-selected").children("i").remove();try{b.colorListObject.ClickItems.__index[b._index-1]=void 0}catch(g){}}b.customOptions.css({display:"none"});b.customOptionsMask.css({display:"none"})});$("#"+this.customOptionsCancelButton).click(function(){if("none"==b.customSizeInfo.css("display")){$(b.customOptionsYesButton[0]).removeClass("color-selected").children("i").remove();
try{b.colorListObject.ClickItems.__index[b._index-1]=void 0}catch(g){}}b.customSizeWarp.find("ul li").eq(0).click();b.customOptions.css({display:"none"});b.customOptionsMask.css({display:"none"})})},ChangeUnit:function(){$("#customSizeUnitSelectList").click(function(b){"LI"==b.target.nodeName&&(b=$(b.target).text(),$(".wedding-unit").text(b),$("#customSizeInput").val(b))})}};return b});
define("appDetail/groupPurchase",["common/config","lib/backbone","tools/template"],function(b,c,d){return{productPrice:{},totalCost:{sp:0,ep:0},selector:{wrapper:".js-groupPurchase",product:".js-product",prodsWrapper:".js-prods",chooseBtn:".common-cp-price",buyerBtn:".js-buyerBtn",addCartBtn:".js-addCartBtn",totalCost:".js-totalCost"},apiUrl:"//www.dhgate.com/product/getgrouppurchase.do",init:function(){var b=this;b.getProds();$(b.selector.wrapper).delegate(b.selector.chooseBtn,"click",function(c){b.chooseProd(c)});
$(b.selector.wrapper).delegate(b.selector.buyerBtn,"click",function(){b.go("1")});$(b.selector.wrapper).delegate(b.selector.addCartBtn,"click",function(){b.go("2")})},getProds:function(){var b=this;DH.request({url:b.apiUrl,dataType:"json",data:{itemcode:_itemcode,catalogid:_catelogID,supplierid:$("#supplierid").val()},success:function(c){"object"===typeof c&&c.grouppurchaseData&&1==c.grouppurchaseData.code?b.getProdsStr(c.grouppurchaseData.combinationProducts):$(b.selector.wrapper).hide()}})},getProdsStr:function(b){for(var c=
[],d=0,f=b.length;d<f;d++){var h=b[d].itemcode,m=b[d].productPrice.match(/(\d+\.?\d*)/g);b[d].cls=1==b[d].sign?"":"onchoose";var n='<li class="js-product" data-itemcode="<%=itemcode%>"><div class="common-cp-img"><a target="_blank" href="<%=productUrl%>"><img src="<%=productThumbnailImageUrl%>" alt="<%=productName%>" /></a></div><div class="common-cp-title"><a target="_blank" title="<%=productName%>" href="<%=productUrl%>"><%=productName%></a></div><div class="common-cp-price <%=cls%>"><strong><%=productPrice%></strong> / <%=productMeasure%></div></li>'.replace(/<%=([\w\d-_]*?)%>/g,
function(c,e){return b[d][e]?b[d][e]:""});1==b[d].sign?c.unshift(n):c.push(n);this.productPrice[h]={sp:Number(m[0]||0),ep:Number(m[1]||m[0])};this.addTotalCost(h)}this.setTotalCost();$(this.selector.prodsWrapper).html(c.join('<li class="fbt-plus"></li>'));$(this.selector.wrapper).show()},chooseProd:function(b){b=$(b.target);var c=["choose","onchoose"],d=b.closest(this.selector.product).data("itemcode");b.hasClass(c[0])?(this.addTotalCost(d),b.removeClass(c[0]).addClass(c[1])):b.hasClass(c[1])&&(this.reducedTotalCost(d),
b.removeClass(c[1]).addClass(c[0]));this.setTotalCost()},addTotalCost:function(b){this.productPrice[b]&&(this.productPrice[b].ischecked=1,this.totalCost.sp=Number(this.totalCost.sp)+this.productPrice[b].sp,this.totalCost.ep=Number(this.totalCost.ep)+this.productPrice[b].ep)},reducedTotalCost:function(b){this.productPrice[b]&&(this.productPrice[b].ischecked=0,this.totalCost.sp=Number(this.totalCost.sp)-this.productPrice[b].sp,this.totalCost.ep=Number(this.totalCost.ep)-this.productPrice[b].ep)},setTotalCost:function(){if(0<=
this.totalCost.sp&&0<=this.totalCost.ep){this.totalCost.sp=this.totalCost.sp.toFixed(2);this.totalCost.ep=this.totalCost.ep.toFixed(2);var b=this.totalCost.sp==this.totalCost.ep?this.totalCost.sp:this.totalCost.sp+" - "+this.totalCost.ep,b="US $"+b;$(this.selector.totalCost).html(b)}},go:function(b){var c=[];b="//www.dhgate.com/grouppurchase/groupdisplay.do"+("?type="+b+"&itemcode="+_itemcode);$.each(this.productPrice,function(b,e){b!=_itemcode&&c.push(b+"-"+e.ischecked)});b+="&data="+c.join(",");
window.location.href=b}}});
define("appDetail/selectMenu",["common/config","lib/backbone","tools/template"],function(b,c,d){function f(){var b=$("#ship_quantity").attr("value"),c=$("#_cur_maxordersize").val(),d=$("#minQuantity").val(),f=$("#shippingSelectHiddenInput").attr("value");/^\d+$/.test(b)?"0"==b?(alert("Purchase quantity is zero,Please checkout!"),$("#ship_quantity").val(d)):(b=parseInt(b),c=parseInt(c),d=parseInt(d),b>c&&($("#ship_quantity").val(c),b=c),b<d&&($("#ship_quantity").val(d),b=d),DH.request({url:"/product/shippingpayment.do?ship_country="+
f+"&ship_quantity="+b+"&pid="+_pid+"&itemcode="+_itemcode,type:"GET",dataType:"html",success:function(b){b=b.split('<div name="separator"></div>');$("#_ShippingAndPayment_sub0").html(b[0]);$("#_ShippingAndPayment_sub1").html(b[1])}}),gtag("event","caculate",{event_category:"Checkout-product",event_label:""})):(alert("Quantity entered must be a number!"),$("#ship_quantity").val(d))}b=function(b){this.SetOptions(b);this.selectWarp=this.options.selectWarp;this.hiddenInput=this.options.hiddenInput;this.textInput=
this.options.textInput;this.arrow=this.options.arrow;this.list=this.options.list;this.ship_quantity=$("#"+this.options.ship_quantity);this.defaultLength=this.options.defaultLength;this.yScrollClass=this.options.yScrollClass;0!=this.selectWarp.length&&this.Init()};b.prototype={SetOptions:function(b){this.options={selectWarp:[],hiddenInput:[],textInput:[],arrow:[],list:[],defaultLength:12,ship_quantity:"ship_quantity",yScrollClass:"simulation-select-yScroll"};$.extend(this.options,b||{})},Init:function(){this.params=
{_From:this.options.selectWarp};this.selectWarpArray=[];this.hiddenInputArray=[];this.textInputArray=[];this.arrowArray=[];this.listArray=[];for(var b=0;b<this.selectWarp.length;b++)$("#"+this.selectWarp[b])[0]&&(this.selectWarpArray.push($("#"+this.selectWarp[b])),this.hiddenInputArray.push($("#"+this.hiddenInput[b])),this.textInputArray.push($("#"+this.textInput[b])),this.arrowArray.push($("#"+this.arrow[b])),this.listArray.push($("#"+this.list[b])));this.FocusInput();this.ControlArrow();this.OpenSelectList()},
FocusInput:function(){this.ship_quantity.blur(function(){f()})},ControlArrow:function(){for(var b=this,c=0;c<this.selectWarpArray.length;c++)(function(){var e=c;b.selectWarpArray[e].mouseenter(function(){b.arrowArray[e].addClass("simulation-select-harrow")}).mouseleave(function(){b.arrowArray[e].removeClass("simulation-select-harrow")})})()},HighlightDefaultStatus:function(b,c){$(c[0]).addClass("hover");for(var e=1;e<c.length;e++)$(c[e]).removeClass("hover")},OpenSelectList:function(){for(var b=this,
c=0;c<this.listArray.length;c++)(function(){var e=c,d=$("#"+b.options.list[e]+" > ul"),f=$("#"+b.options.list[e]+" > ul > li"),g=f.height()*f.length;d.prepend('<li style="overlfow:hidden;float:left;padding:0;margin-left:-1px;width:1px;height:'+g+'px"></li>');b.selectWarpArray[e].click(function(d){d.stopPropagation();b.HighlightDefaultStatus(e,f);for(d=0;d<c;d++)d==e?"none"==b.listArray[e].css("display")?b.listArray[e].css({display:"block",visibility:"visible"}):b.listArray[e].css({display:"none",
visibility:"hidden"}):b.listArray[d].css({display:"none",visibility:"hidden"})});f.length>b.defaultLength&&d.addClass(b.yScrollClass);b.SelectList(e,f);b.ClickList(e,f);b.Close(e,d,f)})()},SelectList:function(b,c){for(var e=0;e<c.length;e++)(function(){var b=e;$(c[b]).mouseenter(function(){$(this).addClass("hover");for(var d=0;d<e;d++)d!=b&&$(c[d]).removeClass("hover")})})()},ClickList:function(b,c){for(var e=this,d=0;d<c.length;d++)$(c[d]).click(function(b){"shippingCostSelect"==e.params._From?DH_SHIP.model.trigger("Ship:change:shipCountry",
{id:$(this).attr("vHidden"),name:$(this).text()}):DH_SHIP.model.trigger("Ship:change:stockCountry",{id:$(this).attr("vHidden"),name:$(this).text()})})},Close:function(b,c){var e=this;$(document).click(function(){"block"==e.listArray[b].css("display")&&(e.listArray[b].css({display:"none",visibility:"hidden"}),e.HighlightDefaultStatus(b,c))})}};return b});
define("appDetail/shippingCost",["common/config","lib/backbone","tools/template","appDetail/selectMenu"],function(b,c,d,f){c.Model.extend({defaults:function(){return{code:-1,wholesale:[{discount:0,discountPrice:0,price:0,startQty:0,endQty:0}],deliveryTime:"",price:0,qty:0,totalCost:0,stockInCountry:"CN",shipToCountry:"US"}},initialize:function(b,c){this.setOption(c);this.ajaxOptions=this.options.ajaxOptions;this.skuInfo=window.skujson||this.options.skuInfo},setOption:function(c){this.options={ajaxOptions:{uri:b.wwwRUL+
"/product/productprict.do",data:{version:1,client:"pc"},type:"GET",dtaType:"json",async:!0,cache:!1,processData:!0}};$.extend(!0,this.options,c||{})},urlRoot:function(){return this.ajaxOptions.uri},sync:function(b,d,f){this.__params=$.extend(!0,{},this.ajaxOptions,f||{});return c.sync.call(this,null,this,$.extend(!0,{},this.ajaxOptions,{url:this.url()},f))},parse:function(b,c){var e={};e.code=null!=b?200:-1;return e}});c.View.extend({});d=function(b){this.SetOptions(b);document.getElementById(this.options.shippingCostChooseButton)&&
(this.shippingCostChooseButton=$("#"+this.options.shippingCostChooseButton),this.ShippingCostChoose=$("#"+this.options.ShippingCostChoose),this.ShippingCostMask=$("#"+this.options.ShippingCostMask),this.ShippingCostChooseTextarea=$("#"+this.options.ShippingCostChooseTextarea),this.ShippingCostMaskIframe=$("#"+this.options.ShippingCostMaskIframe),this.ShippingCostChooseContent=this.options.ShippingCostChooseContent,this.chooseLeft=this.options.chooseLeft,this.ShipLoading=this.options.ShipLoading,this.chooseShippingCannot=
this.options.chooseShippingCannot,this.ShippingCostClose=this.options.ShippingCostClose,this.timer=null,this.isIE6=$.browser.msie&&"6.0"==$.browser.version,this.Init())};d.prototype={SetOptions:function(b){this.options={shippingCostChooseButton:"shippingCostChooseButton",ShippingCostChoose:"ShippingCostChoose",ShippingCostMask:"ShippingCostMask",ShippingCostChooseTextarea:"ShippingCostChooseTextarea",ShippingCostChooseContent:"ShippingCostChooseContent",chooseLeft:"chooseLeft",ShippingCostOKShipping:"OKShipping",
ShipLoading:"ShipLoading",ShippingCostMaskIframe:"ShippingCostMaskIframe",chooseShippingCannot:"chooseShippingCannot",ShippingCostClose:"ShippingCostChooseClose"};$.extend(this.options,b||{})},Init:function(){this.Open()},Open:function(){var b=this;this.shippingCostChooseButton.click(function(){b.ShippingCostChoose.css({display:"block"});b.ShippingCostMask.css({display:"block"});$("#"+b.options.ShippingCostChooseTextarea)[0]&&(b.ShippingCostChoose.html(b.ShippingCostChooseTextarea.html()),b.ShippingCostChooseTextarea.remove(),
b.Resize(),b.Close(),new f({selectWarp:["shippingCostSelect"],hiddenInput:["hiddenCountry"],textInput:["textCountry"],arrow:["arrowCountry"],list:["listCountry"]}),new f({selectWarp:["inventoryLocationShippingSelect"],hiddenInput:["inventoryLocationCountryId"],textInput:["textInventory"],arrow:["arrowInventory"],list:["listInventory"]}));$("#russiacountrynoties").css("display","none");if("Russia"==$("#textCountry").val())for(var c=$("#chooseLeft li"),e=0;e<c.length;e++){var d=$(c[e]).attr("class"),
m=$(c[e]).attr("vhidden");"current"==d&&"China"!=m&&"EMS"!=m&&"CHINAPOSTAIR"!=m&&"HONGKONGPOST"!=m&&"CHINAPOSTSAL"!=m&&"SINGAPOREPOST"!=m&&$("#chooseShippingCannot").is(":hidden")&&$("#russiacountrynoties").css("display","block")}c=$("#listInventory > ul> li");c.length?(e=$("#inventoryLocationCountryId").val(),d=c.filter("[vhidden='"+e+"']").index(),$("#inventoryidclass").attr("class",e.toLowerCase()),$(c.eq(d)).trigger("click"),$("#textInventory").val($("#listInventory").find("li[vhidden='"+e+"'] span").html())):
(c=$("#listCountry > ul> li"),e=$("#hiddenCountry").val(),d=c.filter("[vhidden='"+e+"']").index(),$("#countryidclass").attr("class",e.toLowerCase()),$(c.eq(d)).trigger("click"))})},loadShippingType:function(){},Resize:function(){var b=this;this.timer&&clearTimeout(this.timer);this.SetPosition();this.timer=setTimeout(function(){b.Resize()},50)},SetPosition:function(){if("none"!=this.ShippingCostChoose.css("display")&&"block"!=$("#listCountry").css("display")){var b,c,d,f,m,n,p;$("#"+this.chooseLeft).find("li");
"block"==$("#"+this.ShipLoading).css("display")?$("#"+this.ShippingCostChooseContent).addClass("width640"):"none"==$("#"+this.chooseShippingCannot).css("display")?this.ShippingCostChoose.width("100%"):$("#"+this.ShippingCostChooseContent).removeClass("width640");b=$(document).height();c=Math.min($(document).width(),$("body").outerWidth(!0));d=this.ShippingCostChoose.children("table").height();f=this.ShippingCostChoose.children("table").width();m=$(window).height();n=$(window).width();p=$(window).scrollTop();
lScroll=$(window).scrollLeft();this.isIE6?(n=parseInt((n-f)/2+lScroll),m=parseInt((m-d)/2+p)):(n=parseInt((n-f)/2),m=parseInt((m-d)/2));this.ShippingCostChoose.css({top:m,left:n,width:f,height:d});this.ShippingCostMask.css({width:c,height:b,opacity:.5});this.ShippingCostMaskIframe.css({width:c,height:b,opacity:0})}},Close:function(){var b=this;$("#"+this.ShippingCostClose).click(function(){b.ShippingCostChoose.css({display:"none"});b.ShippingCostMask.css({display:"none"})});$("#"+this.cannotShipping).click(function(){b.ShippingCostChoose.css({display:"none"});
b.ShippingCostMask.css({display:"none"})});$("#"+this.options.ShippingCostOKShipping).click(function(){b.ShippingCostChoose.css({display:"none"});b.ShippingCostMask.css({display:"none"})})}};return d});
define("appDetail/skuChoose","common/config lib/backbone tools/template appDetail/skuInfoModel appDetail/tpl/attributeTpl appDetail/tpl/wholesaleTpl".split(" "),function(b,c,d,f,e,g){var l=c.Model.extend({defaults:function(){return{code:-1,wholesale:[{discount:0,discountPrice:0,price:0,startQty:0,endQty:0}],skuId:null,skuMd5:null,enableSale:1,stock:0,minOrder:0,maxOrder:0,buyerNum:0,price:0,otherPrice:0,discount:1,totalCost:0,otherTotalCost:0,deliveryTime:"",quantity:$("#quantity").val()||0,commtype:$("#commtype").val()||
"",stockInCountry:$("#inventoryLocationCountryId").val()||"CN",shipToCountry:$("#hiddenCountry").val()||"US",viaExpressTypeName:"",shippingtypeid:$("#_cur_shippingtypeid").val(),defaultShippingTypeId:"",supplierId:window._toid||"",itemcode:window._itemcode||"",productId:window._pid||"",buyerId:b.buyerId||_dologin,promo_dto:null,isSkuPromo:"yes"==$("#isSkuPromo").val()?!0:!1}},initialize:function(b){this.setOption(b);this.ajaxOptions=this.options.ajaxOptions;this.skuInfo=window.skujson||this.options.skuInfo||
{};this.skuInfoMd5=window.skuJsonMd5||this.options.skuJsonMd5||{}},setOption:function(c){this.options={ajaxOptions:{uri:b.wwwURL+"/product/productprict.do",data:{version:1,client:"pc",itemcode:window._itemcode||"",supplierId:window._toid||"",skuId:$("#selectedSkuVal").val(),skuMd5:$("#selectedSkuMd5Val").val(),quantity:$("#quantity").val()||"",isdhporttype:window._dhportType||"",countryid:$("#hiddenCountry").val(),shippingtypeid:$("#_cur_shippingtypeid").val()||"",inventoryLocationCountryId:$("#inventoryLocationCountryId").val(),
commtype:$("#commtype").val()||"commissionCV2",isvipprod:$("#isvipprod").val(),isAttrClick:!1},type:"GET",dtaType:"json",async:!0,cache:!1,processData:!0},supplierId:window._toid||"",itemcode:window._itemcode||"",productId:window._pid||"",buyerId:b.buyerId||_dologin,ABCD:"BBB"};$.extend(!0,this.options,c||{})},urlRoot:function(){return this.ajaxOptions.uri},sync:function(b,e,d){this.__params=$.extend(!0,{},this.ajaxOptions,d||{});return c.sync.call(this,null,this,$.extend(!0,{},this.ajaxOptions,{url:this.url()},
d))},parse:function(b,c){this.ajaxOptions.data=$.extend(!0,{},this.ajaxOptions.data,c.data||{});var e={},d=c.data;if(!b)return{};e.code=null!=b?200:-1;e.originalPrice=b.discountPrice;e.price=b.webprice;e.otherPrice=b.ratePrice;e.totalCost=b.buyernewprice;e.otherTotalCost=b.totalRatePrice;e.quantity=d.quantity;e.commtype=$("#commtype").val()||"";e.stockInCountry=d.inventoryLocationCountryId||$("#inventoryLocationCountryId").val()||"CN";e.shipToCountry=d.countryid||"US";e.viaExpressTypeName=d.shippingtypeid||
"DHLink";e.shippingtypeid=d.shippingtypeid||$("#_cur_shippingtypeid").val();e.defaultShippingTypeId=this.get("defaultShippingTypeId")||$("#_init_cur_shippingtypeid").val()||"";e.supplierId=d.supplierId||_toid||"";e.itemcode=d.itemcode||_itemcode||"";e.productId=window._pid||"";e.shippingCost=b._cur_shippingcost;e.wholesale=[];if(-1!=e.code&&""!=b){var f=[];$.each(b.productWholesaleRangeDTOList,function(b,c){var e={};e.discountPrice=c.discountPrice;e.promDiscountPrice=c.promDiscountPrice;e.vip=c.vipPrice;
e.startQty=c.startQty;e.endQty=c.endQty;f.push(e)});e.wholesale=f;e.promo_dto=b.promo_dto}return e},setQuantity:function(b,c){c=c||{};this.set({quantity:b},{silent:void 0===c.silent?!0:c.silent,validate:!0,type:"quantity",fetch:void 0===c.fetch?!0:c.fetch})},setEnableSale:function(b,c){this.set({enableSale:b+""},{silent:void 0===c?!0:c,validate:!1,type:"enableSale"})},setMaxOrder:function(b,c){this.set({maxOrder:b},{silent:void 0===c?!0:c,validate:!0,type:"maxOrder"})},setMinOrder:function(b,c){this.set({minOrder:b},
{silent:void 0===c?!0:c,validate:!0,type:"minOrder"})},setBuyerNum:function(b,c){this.set({buyerNum:b},{silent:void 0===c?!0:c,validate:!0,type:"buyerNum"})},setShippingTypeId:function(b,c){this.set({shippingtypeid:b},{silent:void 0===c?!0:c,validate:!1,type:"shippingType"})},setShippingTypeName:function(b,c){this.set({viaExpressTypeName:b},{silent:void 0===c?!0:c,validate:!1,type:"viaExpressTypeName"})},setShipToCountry:function(b,c){this.set({shipToCountry:b},{silent:void 0===c?!0:c,validate:!1,
type:"shipToCountry"})},setStockInCountryId:function(b,c){this.set({stockInCountry:b},{silent:void 0===c?!0:c,validate:!1,type:"stockInCountry"})},setStockInCountryName:function(b,c){this.set({stockInCountryName:b},{silent:c||!0,validate:!1,type:"stockInCountryName"})},setStock:function(b,c){this.set({stock:b},{silent:void 0===c.silent?!0:c.silent,validate:c.validate||!1,type:"stock",fetch:c.fetch||!0})},validate:function(b,c){var e;if("enableSale"==c.type&&(e=this.validataExpireEnableSale(b),"string"===
typeof e))return e;if("quantity"==c.type||"stock"==c.type){e=this.validataExpireQuantity(b,c.type);if("string"===typeof e)return e;this.trigger("SKU:change:wholesaleLine",{quantity:b.quantity});c.fetch&&this.trigger("SKU:change:fetch",{quantity:b.quantity,countryid:this.get("shipToCountry"),inventoryLocationCountryId:$("#inventoryLocationCountryId").val()||this.get("stockInCountry"),shippingtypeid:this.get("shippingtypeid")})}},validataExpireEnableSale:function(b,c){$.trim(b.enableSale);if("0"==b.enableSale)return"isEnableSale-enableSale-"+
(this.get("stock")||$("#inventoryQtyNum_new").html())},validataExpireQuantity:function(b,c){var e=Number($.trim(b.quantity)),d=Number(this.get("dailyDealsStatus")||$("#_daily_deals_num").val()),f=Number(this.get("dailyDealsNum")||$("#_daily_deals_num").val()),h=Number(this.get("maxOrder")||$("#_cur_maxordersize").val()),m=Number(this.get("minOrder")||$("#currentordersize").val()),g=Number(this.get("stock")||$("#inventoryQtyNum_new").html()),l=Number(this.get("buyerNum")||$("#_daily_deals_buyerNum").val());
if(/^[1-9][0-9]{0,}$/.test(e))if("1"==d){if(e>h&&f>h&&h<l)return"isQuantity-maxOrder-"+h;if(e>g&&g<=f&&g<=l&&e>=m)return"isQuantity-customStock-"+m;if(e>f&&l>f&&f>=m)return"isQuantity-customStock-"+f;if(e>l&&l<f&&l>=m)return"isQuantity-customStock-"+l;if(e<m&&l>=m)return"isQuantity-minOrder-"+m;if(l<m)return"isQuantity-soldOut-0"}else{if(e>g)return"isQuantity-stock-"+(m>g?m:g);if(e>h)return"isQuantity-maxOrder-"+h;if(e<m)return"isQuantity-minOrder-"+m}else return 0==e?"isQuantity-minOrder-"+m:"isQuantity-number-"+
m}});return c.View.extend({el:"#productdisplayForm",events:{"click .js-selectionWrapper li:not(.js-moreAttr)":"attrClickHandler","blur #quantity":"checkQuantity","keypress #quantity":"quantityPress","click #quantityEnter":"checkQuantity","click .moreorigin li":"changeStockIn"},initialize:function(b){b=b||{};this.setOption(b);this.model=this.option.model;this.modelSKU=this.option.modelSKU;this.attrValCache=this.option.attrValCache||{};this.skuStatus={promoType:null,isSoldOut:!1,maxOrder:null,minOrder:1,
hasInventory:!0};b=$("#selectedSkuVal").val();this.getQueryString("skuid")==b&&(this.attrSelecetAll=!0);var c=this;b=parseInt($.trim(_buyAttrListSize||0))+parseInt($.trim(_buyAttrCustomListSize||0));var e=function(){var b=0;_.each(c.attrValCache,function(){b++});return b}();b>=e&&(this.attrSelecetAll=!0);this.initElement();this.initEvent();this.initSelectAttr();this.render()},initEvent:function(){this.listenTo(this.model,"sync",this.success);this.listenTo(this.model,"error",this.error);this.listenTo(this.model,
"invalid",this.matchErrorTip);this.listenTo(this.modelSKU,"sync",this.successSKU);this.listenTo(this.modelSKU,"error",this.errorSKU);this.modelSKU.on("SKU:change:fetch",this.requestSKU,this);this.model.on("SKU:change:wholesale",this.changeWholesale,this);this.model.on("SKU:change:wholesaleLine",this.changeWholesaleLine,this);this.model.on("SKU:change:selected",this.changeSkuInfo,this);this.model.on("SKU:change:fetch",this.request,this);this.model.on("SKU:change:country",this.changeCountry,this);this.model.on("SKU:change:enableSale",
this.changeEnableSale,this);1<$("#inventoryLocationSelectWarp ul li").length&&(this.$el.on("mouseenter","#inventoryLocationSelectWarp",function(b){$(this).addClass("hover")}),this.$el.on("mouseleave","#inventoryLocationSelectWarp",function(b){$(this).removeClass("hover")}))},initElement:function(){this.$html=this.$html||$("html");this.$window=this.$window||$(window);this.$quantity=$("#quantity");this.$skuINT=this.$el.find(this.option.skuINT);this.$skuMd5INT=this.$el.find(this.option.skuMd5INT);this.colorListItems=
this.option.colorList;this.colorListHiddenInput=this.option.colorListHiddenInput},render:function(){this.AttributeHandler();this.init_menu();this.AttributeListHandler()},getQueryString:function(b){b=new RegExp("(^|&)"+b+"=([^&]*)(&|$)","i");b=window.location.search.substr(1).match(b);return null!=b?unescape(b[2]):null},setOption:function(b){this.option={colorList:[],colorListHiddenInput:[],attributeWrap:".js-selectionWrapper",attributeList:".js-selectionWrapper li",priceCls:".js-priceTips",totalCostCls:"",
skuINT:"#selectedSkuVal",skuMd5INT:"#selectedSkuMd5Val",tpl:e,model:new l(b.modelDefaults||{ajaxOptions:{data:{version:1,client:"pc",quantity:$("#quantity").val(),skuId:$("#selectedSkuVal").val(),skuMd5:$("#selectedSkuMd5Val").val(),itemcode:window._itemcode||"",supplierId:window._toid||"",countryid:$("#hiddenCountry").val(),shippingtypeid:$("#_cur_shippingtypeid").val(),inventoryLocationCountryId:$("#inventoryLocationCountryId").val()||"CN",commtype:$("#commtype").val(),isAttrClick:!1}}}),modelSKU:new f({ajaxOptions:{data:{itemcode:window._itemcode||
"",productid:window._pid||"",isdhporttype:window._dhportType||"",countryid:$("#inventoryLocationCountryId").val()}}})};this.option=$.extend(!0,{},this.option,b||{})},request:function(b){b=$.extend(_.clone(this.model.ajaxOptions.data),b||{});this.model.fetch({data:b})},requestSKU:function(b){b=$.extend(_.clone(this.modelSKU.ajaxOptions.data),b||{});this.modelSKU.fetch({data:b})},changeStockIn:function(b){var c=$(b.currentTarget);b=c.attr("vhidden");c=c.attr("vname");this.model.setQuantity(this.model.get("minOrder")||
$("#quantity").val(),{fetch:!1});$("#quantity").val(this.model.get("minOrder"));this.modelSKU.trigger("SKU:change:fetch",{countryid:b,countryName:c})},errorSKU:function(b,c,e){},successSKU:function(b,c,e){c=this.model;c.get("skuMd5");var d=c.get("skuMd5")||$("#selectedSkuMd5Val").val();if(200==b.get("code")){var f=b.get("skuMd5Info");b.get("skuAttrInfo");b=f[d];e=e.data.countryid;this.SKUMD5_init?(c.setMaxOrder(b.maxOrder),c.setMinOrder(b.minOrder),c.setBuyerNum(b.buyerMaxOrder),c.trigger("SKU:change:selected",
{skuMd5:d},b),this.model.setStockInCountryId(e),$("#inventoryLocationSelectWarp").removeClass("hover"),$("#inventoryLocationSelect").attr("class",e.toLowerCase()).html(e),$("#inventoryLocationCountryId").val(e),c.set({attrName:b.attrName})):(this.SKUMD5_init=!0,c.attributes.minOrder=b.minOrder,c.attributes.maxOrder=b.maxOrder,c.attributes.buyerNum=b.buyerMaxOrder,c.attributes.enableSale=b.enableSale,c.attributes.stockInCountry=b.selectCountry,c.attributes.stock=b.stock,$("#inventoryLocationSelectWarp").removeClass("hover"),
$("#inventoryLocationSelect").attr("class",e.toLowerCase()).html(e),$("#inventoryLocationCountryId").val(e));b.maxOrder&&this.$el.find("#quantity").val(b.minOrder)}},success:function(b,c,e){if(200==b.get("code")){this.changePrice({price:b.get("price"),otherPrice:b.get("otherPrice"),originalPrice:b.get("originalPrice"),savePrice:null,otherTotalCost:b.get("otherTotalCost")||"",totalCost:b.get("totalCost"),shippingCost:b.get("shippingCost"),quantity:b.get("quantity")||$("#quantity").val()});this.attrSelecetAll&&
"0"!=this.model.get("enableSale")&&this.showTotalCost();e.data.isAttrClick&&(this.model.ajaxOptions.data.isAttrClick=!1,b.trigger("SKU:change:wholesale",{wholesale:b.get("wholesale")}));e=$("#isvipprod").val();var d=$("#radixUnit").val(),f=1<d?$("#plural").val():$("#measurename").val();if(b.get("isSkuPromo"))if(c.promo_dto){$("#js-priceTips").text(c.webprice);b=c.promo_dto.typeId;var h=c.promo_dto.promoTypeId,g,m;m=9==b||3==b?9==b?c.promo_dto.promName:"Time Limited Sale":c.promo_dto.promName;0==h?
$(".key-info-lt.tuprice").html($L("detail_tips_bubble_discount_price")+":"):$(".key-info-lt.tuprice").html("Reduced Price:");var l='<strong class="w-price unit-linethrough">US $'+c.promo_price_ori+"/ "+(1<d?$L("detail_tips_lot"):f)+" </strong></div>";1<d&&(l+='<span class="lot-pie">'+d+" "+f+"  &nbsp;/&nbsp; "+$L("detail_tips_lot")+"</span>");0==h?(h=c.promo_dto.discountRate+"|"+c.promo_start_date+"|"+c.promo_end_date,f=c.promo_dto.discountRate+"% OFF",d='<span id="js-discountrate" cssinfo="'+c.promo_dto.className+
'" class="'+c.promo_dto.className+'">'+c.promo_dto.discountRate+"</span>"):(h=c.promo_dto.discountRate+"|"+c.promo_start_date+"|"+c.promo_end_date+"|reduction",f="$"+c.promo_dto.discountRate,d='<span id="js-discountrate" cssinfo="'+c.promo_dto.className+'" class="'+c.promo_dto.className+'"><sup>$</sup>'+c.promo_dto.discountRate+"</span>");$(".old-price").html(l);$("#js-discountrate")&&$("#js-discountrate").remove();$("#bimgContainer").append(d);0<$(".discountbox").length&&($(".discountbox").remove(),
$(".vip-club").remove());3==b||9==b?1==e?"V4"===buyerLevelId||"V5"===buyerLevelId?($(".key-info-lt.tuprice").html($L("detail_tips_price")+':<span class="after-promotion">('+$L("detail_tips_vipdiscount")+")</span>"),g='<div class="vip-club clearfix"><ul class="discountbox redstyle"><li><span class="discountname"><span class="namebg"></span><span class="namec">'+m+'</span></span><span class="discountnum"><span>'+f+',</span></span><span style="" data-endtime="'+c.promo_dto.promEndDate.time+'" id="dh-discountTime" class="discountime"><span class="dh-time"></span> left! </span></li><li class="vip-clubcon"><span class="discountvip"><span class="vipbg"></span><span class="vipc">'+
$L("detail_tips_viptag")+'</span></span><span class="vip-content">'+$L("detail_tips_vipdec")+"</span></li></ul></div>"):"V3"===buyerLevelId&&(g='<div class="vip-club clearfix"><ul class="discountbox redstyle"><li><span class="discountname"><span class="namebg"></span><span class="namec">'+m+'</span></span><span class="discountnum"><span>'+f+',</span></span><span style="" data-endtime="'+c.promo_dto.promEndDate.time+'" id="dh-discountTime" class="discountime"><span class="dh-time"></span> left! </span></li><li class="vip-clubcon"><span class="discountvip"><span class="vipbg"></span><span class="vipc">'+
$L("detail_tips_vip3tag")+'</span></span><span class="vip-content">'+$L("detail_tips_vip3dec")+'<div class="qa-warp"><span id="delVipIcon" class="qa-icon2"></span><div id="delVip" style="display: none;"><span title="close" id="delVipClose"></span><span class="arrow-top"></span><div class="del-qa-text"><div class="survey-link">'+$L("detail_tips_bubble_title")+'</div><dl class="del-qa-list"><dt>'+$L("detail_tips_bubble_name")+'</dt><dd class="clearfix"><b></b><span>'+$L("detail_tips_bubble_text1")+
'</span></dd><dd class="clearfix"><b></b><span>'+$L("detail_tips_bubble_text2")+'</span></dd><dd class="clearfix"><b></b><span>'+$L("detail_tips_bubble_text3")+'</span></dd><dd class="clearfix"><b></b><span>'+$L("detail_tips_bubble_text4")+'</span></dd><dd class="clearfix"><b></b><span>'+$L("detail_tips_bubble_text5")+"</span></dd></dl></div></div></div></span></li></ul></div>"):g='<div class="discountbox redstyle clearfix"><span class="discountname"><span class="namebg"></span><span class="namec">'+
m+'</span></span><span class="discountnum"><span>'+f+',</span></span><span style="" data-endtime="'+c.promo_dto.promEndDate.time+'" id="dh-discountTime" class="discountime"><span class="dh-time"></span> left! </span></div>':1==e?"V4"===buyerLevelId||"V5"===buyerLevelId?($(".key-info-lt.tuprice").html($L("detail_tips_price")+":"),g='<div class="vip-club clearfix"><ul class="discountbox"><li><span class="discountname"><span class="namebg"></span><span class="namec">'+m+'</span></span><span  discountCountDown="'+
h+'"></span></li><li class="vip-clubcon"><span class="discountname"><span class="namebg"></span><span class="namec">'+$L("detail_tips_viptag")+'</span></span><span class="vip-content">'+$L("detail_tips_vipdec")+"</span></li></ul></div>"):"V3"===buyerLevelId&&($(".key-info-lt.tuprice").html($L("detail_tips_price3")+":"),g='<div class="vip-club clearfix"><ul class="discountbox"><li><span class="discountname"><span class="namebg"></span><span class="namec">'+m+'</span></span><span  discountCountDown="'+
h+'"></span></li><li class="vip-clubcon"><span class="discountvip"><span class="vipbg"></span><span class="vipc">'+$L("detail_tips_vip3tag")+'</span></span><span class="vip-content">'+$L("detail_tips_vip3dec")+'<div class="qa-warp"><span id="delVipIcon" class="qa-icon2"></span><div id="delVip" style="display: none;"><span title="close" id="delVipClose"></span><span class="arrow-top"></span><div class="del-qa-text"><div class="survey-link">'+$L("detail_tips_bubble_title")+'</div><dl class="del-qa-list"><dt>'+
$L("detail_tips_bubble_name")+'</dt><dd class="clearfix"><b></b><span>'+$L("detail_tips_bubble_text1")+'</span></dd><dd class="clearfix"><b></b><span>'+$L("detail_tips_bubble_text2")+'</span></dd><dd class="clearfix"><b></b><span>'+$L("detail_tips_bubble_text3")+'</span></dd><dd class="clearfix"><b></b><span>'+$L("detail_tips_bubble_text4")+'</span></dd><dd class="clearfix"><b></b><span>'+$L("detail_tips_bubble_text5")+"</span></dd></dl></div></div></div></span></li></ul></div>"):g='<div class="discountbox clearfix"><span class="discountname"><span class="namebg"></span><span class="namec">'+
m+'</span></span><span  discountCountDown="'+h+'"></span></div>';0<$(".key-info .hinfo").length?$(".key-info .hinfo").after(g):$(".key-info .proname").after(g);if(3==b||9==b){var n=$("#dh-discountTime");c=+new Date(n.data("endtime"));0<n.length&&(window.DownTime&&(window.DownTime.clearTime(),window.DownTime=null),window.DownTime=new getCountdownTime({endTime:c,type:"weekend",formatDay:!1,returnData:function(b){n.find("span.dh-time").html(b.hour+"h&nbsp;"+b.minute+"m&nbsp;"+b.seconds+"s").andSelf().show()}}))}else 0<
$("span[discountCountDown]").length&&(DH_CountDownInterface.getServerTime(),salesPromotionCountDown("span","discountCountDown"))}else $(".key-info-lt.tuprice").html($L("detail_tips_price")+":"),$("#js-discountrate").remove(),$(".old-price").html(""),0<$(".discountbox").length?($(".discountbox").remove(),$(".vip-club").remove()):$("#js-discountrate").remove(),1==e&&("V4"===buyerLevelId||"V5"===buyerLevelId?($(".key-info-lt.tuprice").html($L("detail_tips_price")+":"),l='<strong class="w-price unit-linethrough">US $'+
c.vip_price_ori+"/ "+(1<d?$L("detail_tips_lot"):f)+" </strong></div>",g='<div class="vip-club clearfix"><ul class="discountbox redstyle"><li class="vip-clubcon"><span class="discountvip"><span class="vipbg"></span><span class="vipc">'+$L("detail_tips_viptag")+'</span></span><span class="vip-content">'+$L("detail_tips_vipdec")+"</span></li></ul></div>"):"V3"===buyerLevelId&&(l='<strong class="w-price unit-linethrough">US $'+c.vip_price_ori+"/ "+(1<d?$L("detail_tips_lot"):f)+" </strong></div>",g='<div class="vip-club clearfix"><ul class="discountbox redstyle"><li class="vip-clubcon"><span class="discountvip"><span class="vipbg"></span><span class="vipc">'+
$L("detail_tips_vip3tag")+'</span></span><span class="vip-content">'+$L("detail_tips_vip3dec")+'<div class="qa-warp"><span id="delVipIcon" class="qa-icon2"></span><div id="delVip" style="display: none;"><span title="close" id="delVipClose"></span><span class="arrow-top"></span><div class="del-qa-text"><div class="survey-link">'+$L("detail_tips_bubble_title")+'</div><dl class="del-qa-list"><dt>'+$L("detail_tips_bubble_name")+'</dt><dd class="clearfix"><b></b><span>'+$L("detail_tips_bubble_text1")+
'</span></dd><dd class="clearfix"><b></b><span>'+$L("detail_tips_bubble_text2")+'</span></dd><dd class="clearfix"><b></b><span>'+$L("detail_tips_bubble_text3")+'</span></dd><dd class="clearfix"><b></b><span>'+$L("detail_tips_bubble_text4")+'</span></dd><dd class="clearfix"><b></b><span>'+$L("detail_tips_bubble_text5")+"</span></dd></dl></div></div></div></span></li></ul></div>")),1<d&&(l='<span class="lot-pie">'+d+" "+f+"  &nbsp;/&nbsp; "+$L("detail_tips_lot")+"</span>"),$(".old-price").html(l?l:
""),0<$(".key-info .hinfo").length?$(".key-info .hinfo").after(g?g:""):$(".key-info .proname").after(g?g:"")}},matchErrorTip:function(b,c,e){b=c.split("-");e||(e={},e.type=b[1]);if("quantity"==e.type||"stock"==e.type)switch(b[1]){case "maxOrder":this.setViewQuantity({msg:$L("detail_valid_productInfoMaxOrder",{order:b[2]}),quantity:b[2]});break;case "minOrder":this.setViewQuantity({msg:$L("detail_valid_productInfoMinOrder",{order:b[2]}),quantity:b[2]});break;case "customStock":this.setViewQuantity({msg:$L("detail_valid_customStock",
{customStock:b[2]}),quantity:b[2]});break;case "stock":this.setViewQuantity({msg:$L("detail_valid_productInfoMaxStock",{stock:b[2]}),quantity:b[2]});break;case "number":this.setViewQuantity({msg:$L("detail_valid_productInfoNumber"),quantity:b[2]});break;case "specificationOut":this.specificationOut({quantity:b[2]});break;case "soldOut":this.setSoldOut({quantity:b[2]})}},setViewQuantity:function(b){this.controlErrorStyle({formElement:null,errorElement:$("#maxOrderError"),errorText:b.msg,autoHide:!0,
show:!0});this.$quantity.val(b.quantity);this.model.setQuantity(b.quantity,{fetch:!0});this.model.trigger("SKU:change:wholesaleLine",{quantity:b.quantity});this.changeUnit(b.quantity)},setSoldOut:function(b){$("#inventoryQtyNum_new").html(b.quantity||0);$("#quantity").attr("disabled","disabled");$("#quantity").val("");$("#qtynote").css({display:"block"});$("#cannotadd").css({display:"inline-block"});$("#addToCartButton").css({display:"none"});$("#buyeritnowspan").css({display:"none"});this.hideTotalCost()},
controlErrorStyle:function(b){var c=b.formElement,e=b.errorElement,d=b.errorText,f=b.autoHide;if(!0===b.show){if(c&&c.addClass(this.cErrorTipStyle),e.html(d).show(),f)var h=setTimeout(function(){e.hide();clearTimeout(h)},3E3)}else c.removeClass(this.cErrorTipStyle),e.html(d).hide()},changeUnit:function(b){var c=this.$el.find(".purchase-quantity-lot");1<b?c.html(c.attr("unit2")):c.html(c.attr("unit1"))},quantityPress:function(b){var c=$(b.target);if(13==b.keyCode)return c.blur(),!1;8!=b.keyCode&&$("#quantityEnter").css({display:"block"})},
showTotalCost:function(){this.specificationIn();$("#curSelection").show().parent().next().show();$("#_show_buyernewprice").show().siblings("div").hide();$("#otherTotalCost").show();$("#_init_buyer_buyernewprice").show();$(".total-cost-title").show()},hideTotalCost:function(){$("#curSelection").hide().parent().next().hide();$("#_show_buyernewprice").hide().siblings("div").show();$("#otherTotalCost").hide();$("#_init_buyer_buyernewprice").hide();$(".total-cost-title").hide()},specificationOut:function(b){$("#inventoryQtyNum_new").html(b.quantity||
0);$("#quantity").attr("disabled","disabled");$("#qtynote").show();$("#maxOrderError").hide();$("#cannotadd").css({display:"inline-block"});$("#addToCartButton").hide();$("#buyeritnowspan").hide();this.hideTotalCost()},specificationIn:function(){$("#quantity").removeAttr("disabled");$("#qtynote").hide();$("#cannotadd").hide();$("#addToCartButton").show();$("#buyeritnowspan").show()},fnChangeUrl:function(){var b=location.href,c=this.attrValCache,e="",d;for(d in c)e+=d+":"+c[d]+",";e=e.substring(0,
e.length-1);window.history.replaceState&&(-1!=b.indexOf("#")?(localUrl_part1=b.split("#")[0],localUrl_part2=b.split("#")[1],location.search&&(localUrl_part1=localUrl_part1.split("?")[0]),window.history.replaceState({},"",localUrl_part1+"?skuAttr="+e+"#"+localUrl_part2)):location.search?(localUrl_part1=b.split("?")[0],window.history.replaceState({},"",localUrl_part1+"?skuAttr="+e)):window.history.replaceState({},"",b+"?skuAttr="+e))},attrClickHandler:function(b){var c=$(b.currentTarget),e=c.attr("vhidden"),
d=c.attr("attrid");b=c.attr("attrvalid");var f=c.attr("csname");this.attrValCache[d]=b;this.fnChangeUrl();if("js-selectedAttr"!=c.attr("selectedattr")||c.hasClass("js-hiddenLi"))b=this.model.get("minOrder"),this.model.attributes.quantity=b;b={quantity:this.model.get("quantity"),skuId:"",skuMd5:"",itemcode:this.model.get("itemcode"),supplierId:this.model.get("supplierId"),countryid:$("#hiddenCountry").val(),shippingtypeid:this.model.get("shippingtypeid"),commtype:this.model.get("commtype")||"commissionCV2",
inventoryLocationCountryId:$("#inventoryLocationCountryId").val()||this.model.get("stockInCountry")};$("#selectOption"+d).html("["+f+"]");d=c.closest("ul.js-selectionWrapper");c.hasClass("js-hiddenLi")?(c.parents("ul").find("input[name=buyattrval]").val(e),c.parents("ul").find("input[name=buyattrval]").attr("key",e),c.addClass("color-selected").attr("selectedattr","js-selectedAttr"),c.siblings("li").removeClass("color-selected").removeAttr("selectedattr").children("i").remove(),c.parents(".js-moreAttr").siblings("li").removeClass("color-selected").removeAttr("selectedattr").children("i").remove(),
d=c.closest("li.js-moreAttr"),c.removeClass("color-selected").children("i").remove(),d.find("i").length?d.find("span.moreAttr-btn").addClass("more-hover color-selected"):d.find("span.moreAttr-btn").addClass("more-hover color-selected").append("<i></i>"),$.trim(c.find("span").text())?d.find("span.color-more").html(c.find("span").html()):d.find("span.color-more").html(c.find("img").clone()),d.find("div.colorattr-list").hide()):c.closest(".js-selection").length?(f=c.find("span").text(),d=c.closest(".js-selectionWrapper"),
d.find(".unit-price-button").html(f),d.closest(".key-info-ri").removeClass("zIndex").find(".opt-layer").hide(),c.parents("ul").find("input[name=buyattrval]").val(e),c.parents("ul").find("input[name=buyattrval]").attr("key",e),c.addClass("color-selected").attr("selectedattr","js-selectedAttr"),c.siblings("li").removeClass("color-selected").removeAttr("selectedattr"),c.siblings(".customOptionsYesButton").length&&$("#customSizeInfo, a.customOptionsYesButton").hide()):(c.parents("ul").find("input[name=buyattrval]").val(e),
c.parents("ul").find("input[name=buyattrval]").attr("key",e),c.addClass("color-selected").attr("selectedattr","js-selectedAttr").append("<i></i>"),c.siblings("li").removeClass("color-selected").removeAttr("selectedattr").children("i").remove(),c.siblings(".customOptionsYesButton").length&&$("#customSizeInfo, a.customOptionsYesButton").hide(),d.find(".moreAttr-btn").removeClass("color-selected more-hover").find(".color-more").html("more").siblings("i").remove());c.parents(".js-selectionWrapper").siblings(".js-attr-error").hide();
c=this.getAttributeSelect();c.selectAll&&(e=this.getSelectSkuInfo(c.attr),c=this.modelSKU.get("skuMd5Info")[e.skuMd5],this.model.set("skuId",c.skuId),this.model.set("skuMd5",c.skuMd5),this.model.ajaxOptions.data=$.extend(!0,{},this.model.ajaxOptions.data,{skuId:c.skuId,skuMd5:c.skuMd5}),this.model.setEnableSale(c.enableSale),0==c.enableSale?(this.specificationOut({quantity:c.stock||0}),$("#quantity").addClass("disableqty")):($("#quantity").removeClass("disableqty"),b.skuId=e.skuId,b.skuMd5=e.skuMd5,
b.isAttrClick=!0,window.history.replaceState&&(e=location.href,-1!=e.indexOf("#")?(localUrl_part1=e.split("#")[0],localUrl_part2=e.split("#")[1],location.search&&(localUrl_part1=localUrl_part1.split("?")[0]),window.history.replaceState({},"",localUrl_part1+"?skuid="+b.skuId+"#"+localUrl_part2)):location.search?(localUrl_part1=e.split("?")[0],window.history.replaceState({},"",localUrl_part1+"?skuid="+b.skuId)):window.history.replaceState({},"",e+"?skuid="+b.skuId)),c.enableSale?(this.model.ajaxOptions.data=
$.extend(!0,{},this.model.ajaxOptions.data,b),this.model.attributes.stock=c.stock,this.model.setQuantity(c.minOrder||$("#quantity").val(),{fetch:!1}),b.quantity=this.model.get("quantity")||$("#quantity").val(),this.model.trigger("SKU:change:selected",b,c),this.attrSelecetAll=!0):this.hideTotalCost()))},initSelectAttr:function(){var c=$("input[name='_currentSelectValue']"),e="";if(0<c.length){for(var d=0;d<c.length;d++)if(d==c.length-1)var f=c[d].value,f=f.split("|"),e="ar"==b.countryCur?e+('<span class="curselectitem">'+
f[0]+'<span id="selectOption'+$.trim(f[2])+"\" dir='rtl'>["+$.trim(f[1])+"]</span></span>"):e+('<span class="curselectitem">'+f[0]+'<span id="selectOption'+$.trim(f[2])+'">['+$.trim(f[1])+"]</span></span>");else f=c[d].value,f=f.split("|"),e="ar"==b.countryCur?e+('<span class="curselectitem">'+f[0]+'<span id="selectOption'+$.trim(f[2])+"\" dir='rtl'>["+$.trim(f[1])+"]</span>,</span>"):e+('<span class="curselectitem">'+f[0]+'<span id="selectOption'+$.trim(f[2])+'">['+$.trim(f[1])+"]</span>,</span>");
$("#curSelection").html(e)}},getAttributeSelect:function(){var b=this.$el.find("input[name=buyattrval]");selectAttr=[];flag=!0;b.each(function(b,c){var e=$(c).attr("key");if(""==e||void 0==e)flag=!1;selectAttr.push($(c).attr("key"))});return{attr:selectAttr,selectAll:flag}},getSelectSkuInfo:function(b){var c=this.modelSKU.get("skuAttrInfo");b=b.join(";").replace(/\_+/ig,":");return c[b]},setSelectSkuInfo:function(b){this.$skuINT.val(b.skuId);this.$skuMd5INT.val(b.skuMd5)},changePrice:function(b){var c=
Number(b.price).toFixed(2),e=c/($("#radixUnit").val()||1),d=Number(b.otherPrice).toFixed(2),f=Number(b.originalPrice).toFixed(2),g=Number(b.totalCost).toFixed(2),h=Number(b.otherTotalCost).toFixed(2),l=Number(b.shippingCost).toFixed(2);this.$el.find(".new-lot-show-pieces .op").html(e.toFixed(2));this.$el.find("#js-priceTips").html(c);this.$el.find(".js-tuangou-discountrate").html(100*(1-c/f)+"%");this.$el.find(".js-save-price").html($L("common_price",{price:(f-c).toFixed(2)}));this.$el.find(".js-yuanjia-tuangou").html(f);
b.otherPrice&&this.$el.find("#js-multiPrice").html(d);b.totalCost&&this.$el.find("#_show_buyernewprice").html($L("common_price",{price:g}));b.otherTotalCost&&this.$el.find("#otherTotalCost").html($L("common_otherPrice",{price:h}));this.$el.find("#shippingcost").html($L("common_price",{price:l}));this.changeUnit(b.quantity)},changeSkuInfo:function(b,c){var e=this.model;try{e.set("skuId",c.skuId),this.$skuINT.val(c.skuId),this.$skuMd5INT.val(c.skuMd5),e.set("skuMd5",c.skuMd5),this.$el.find(".delestimate").show(),
this.$el.find("#leadingTime").html(c.deliveryTime),e.set("deliveryTime",c.deliveryTime),e.setEnableSale(c.enableSale),0==c.enableSale&&this.specificationOut({quantity:e.get("stock")||0}),e.setStock(c.stock,{validate:!0}),this.$el.find("#inventoryQtyNum_new").html(c.stock)}catch(p){console.log(p)}},changeWholesale:function(b){var c=$(g.wrap.join(""));b=b.wholesale;for(var e=[],f=!0,h=0,l=b.length;h<l;h++)0==h&&(getStProdFun(b[h].promDiscountPrice.toFixed(2)),f=b[h].promDiscountPrice.toFixed(2)==b[h].discountPrice.toFixed(2)?
!1:!0),e.push(d(g.item.join(""),{nums:1<b[h].endQty?b[h].startQty+" - "+b[h].endQty:b[h].startQty+" + ",start:b[h].startQty,end:b[h].endQty,price:b[h].promDiscountPrice.toFixed(2),originalPrice:b[h].discountPrice.toFixed(2),index:h}));c.find(".js-wholesale-list").html(e.join(""));f&&c.addClass("lineprice");this.$el.find(".js-wholesale-wrap").html(c);__ws.changeWholesal()},changeCountry:function(c){if(c.shipToCountryName&&c.expressTypeName&&c.shippingtypeid){if("ar"==b.countryCur)var e=c.shipToCountryName+
" Via "+c.expressTypeName,d=c.deliverytimeProcessingShipMin+" - "+c.deliverytimeProcessingShipMax;else e=c.shipToCountryName+" Via "+c.expressTypeName,d=c.deliverytimeProcessingShipMin+" and "+c.deliverytimeProcessingShipMax;0<c.shippingCost?($("#freeshipping").hide(),$("#shippingcost").html($L("common_price",{price:c.shippingCost})).show()):($("#shippingcost").hide(),$("#freeshipping").html($L("common_freeShipping")).show());this.$el.find("#shippingCostChooseButton").html(e);this.$el.find(".delestimate").show();
this.model.setShippingTypeId(c.shippingtypeid);$("#_cur_shippingtypeid").val(c.shippingtypeid);this.model.setShipToCountry(c.shipToCountry);$("#hiddenCountry").val(c.shipToCountry);c.deliverytimeProcessingShipMin&&$("#deliverytimeProcessing").html(d);c.promiseDays&&$("#promisedays").html(c.promiseDays)}c.stockInCountry&&c.stockInCountryName&&(this.model.setStockInCountryId(c.stockInCountry),$("#inventoryLocationCountryId").val(c.stockInCountry),this.$el.find("#inventoryLocationSelect").html(c.stockInCountry).attr("class",
c.stockInCountry.toLowerCase()));"US"!=c.shipToCountry?($("#stProductDiv").hide(),$("#stProductDiv .this").removeClass("this")):getStProdFun()},checkQuantity:function(b){b=$(b.target);var c;$("#quantityEnter").hide();c=b.val();/^[1-9]([0-9]{0,})|(\.[0-9]{0,})$/.test(c)&&(c=parseInt(c),b.val(c));this.changeUnit(b.val());this.model.setQuantity(b.val(),{fetch:!0})},changeWholesaleLine:function(b){$("#selectedSkuVal").val();var c=$(".js-wholesale-wrap"),c=$(".js-wholesale-list >li",c),e=this.$quantity;
b=b.quantity;e.val(b);c.each(function(c,e){var d=$(e),f=d.attr("nums"),g,h,f=f&&1<f.length?f:"1",f=f.replace(/\s/ig,"").split("-");g=parseInt(f[0]);h=parseInt(f[1]);1<f.length&&0<h?b<=h&&g<=b&&d.addClass("current").siblings().removeClass("current"):g<=b&&d.addClass("current").siblings().removeClass("current")})},AttributeListHandler:function(){for(var b=0;b<this.colorListItems.length;b++)if($("#"+this.colorListItems[b])[0]){var c=$("#"+this.colorListItems[b]),e=c.find(".js-hiddenLi"),c=c.find(".colorattr-list ul");
e.length&&0==c.children().length&&(e.removeClass("color-selected"),c.html(e.show()))}},AttributeHandler:function(){},init_menu:function(){(function(b){(function(){$(".head-Shop-by").bind("mouseenter",function(){$(".head-Shop-by .head-shop").addClass("head-active");$(".head-Shop-by .head-Shop-List").show()}).bind("mouseleave",function(){$(".head-Shop-by .head-shop").removeClass("head-active");$(".head-Shop-by .head-Shop-List").hide()});$(".wholesalePcon").bind("mouseenter",function(){$("#WholesalePLayyer").show()}).bind("mouseleave",
function(){$("#WholesalePLayyer").hide()});$("#productdisplayForm").delegate("#quantity","click",function(){}).delegate("#quantity","focus",function(){$(this).css({color:"#333"});clearTimeout("");var b=$("#WholesalePriceList").clone().attr("id","js-priceTab");b.find("thead").remove();b.find("tbody tr:first").addClass("firstline")}).delegate("#quantity","blur",function(){""==$.trim($(this).val())&&$(this).val($(this).attr("placeholder"));$(this).val()==$(this).attr("placeholder")&&$(this).css({color:"#999"})});
$("#productdisplayForm").delegate("#js-priceTab tbody tr","click",function(){var c=($(this).attr("nums")||"1").split("-");b.getPriceRange();$.trim(c[0])&&$("#quantity").css({color:"#333"}).val($.trim(c[0]))});$("html, body").click(function(b){b=$(b.target);0==b.closest("#WholesalePLayyer").length&&$("#WholesalePLayyer").hide();0==b.closest(".select-moreattr").length&&$(".colorattr-list").hide().closest(".key-info-ri").addClass("zIndex");0==b.closest(".js-selectionWrapper").length&&$(".opt-layer").hide().closest(".key-info-ri").removeClass("zIndex")});
$(".select-moreattr").delegate(".color-more","click",function(b){$(".colorattr-list").hide().closest(".key-info-ri").removeClass("zIndex");$(this).closest(".key-info-ri").addClass("zIndex");$(this).parent().siblings(".colorattr-list").show();b.stopPropagation()});$(".js-selectionWrapper").delegate(".unit-price-button","click",function(b){$(".opt-layer").hide().closest(".key-info-ri").removeClass("zIndex");$(this).siblings(".opt-layer").show().closest(".key-info-ri").addClass("zIndex");b.stopPropagation()})})()})(window)}})});
define("appDetail/shippingModel",["common/config","lib/backbone","tools/template"],function(b,c,d){var f=c.Model.extend({defaults:function(){return{code:-1,skuId:"",skuMd5:"",shipToCountry:"",shipToCountryName:"",stockInCountry:"",stockInCountryName:"",shippingtypeid:$("#_cur_shippingtypeid").val(),expressTypeName:"",shipToCountryList:[],stockInCountryList:[],expressTypeList:[{shippingtypeid:"",expressTypeName:"",imgSrc:"",originCountry:"",supportTrack:"",deliverytime:"",shippingCost:"",deliverytimeProcessingShipMin:"",
deliverytimeProcessingShipMax:"",promiseDays:""}]}},initialize:function(b){this.setOption(b);this.ajaxOptions=this.options.ajaxOptions;this.skuInfo=window.skujson||this.options.skuInfo||{};this.skuInfoMd5=window.skuJsonMd5||this.options.skuJsonMd5||{}},setOption:function(c){this.options={ajaxOptions:{uri:b.wwwURL+"/product/productshippingajax.do",data:{version:1,client:"pc",itemcode:window._itemcode||"",supplierId:window._toid||"",skuId:$("#selectedSkuVal").val(),skuMd5:$("#selectedSkuMd5Val").val(),
quantity:$("#quantity").val()||"",isdhporttype:window._dhportType||"",countryid:$("#hiddenCountry").val(),shippingtypeid:$("#_cur_shippingtypeid").val()||"",inventoryLocationCountryId:$("#inventoryLocationCountryId").val(),commtype:$("#commtype").val()||"commissionCV2",isvipprod:$("#isvipprod").val(),tuanGouDays:""},type:"GET",dtaType:"json",async:!0,cache:!1,processData:!0}};$.extend(!0,this.options,c||{})},urlRoot:function(){return this.ajaxOptions.uri},sync:function(b,d,f){this.__params=$.extend(!0,
{},this.ajaxOptions,f||{});return c.sync.call(this,null,this,$.extend(!0,{},this.ajaxOptions,{url:this.url()},f))},parse:function(c,d){this.ajaxOptions.data=$.extend(!0,{},this.ajaxOptions.data,d.data||{});var e={},f=d.data;if(!c)return e;e.code=200;e.skuId=f.skuId;e.skuMd5=f.skuMd5;e.shipToCountry=f.countryid;e.stockInCountry=f.inventoryLocationCountryId;e.shippingtypeid=f.shippingtypeid||$("#_cur_shippingtypeid").val();e.expressTypeName=this.get("expressTypeList").expressTypeName||"";e.shipToCountryList=
[];e.stockInCountryList=[];e.expressTypeList=[];$.each(c.shippingCostList||[],function(c,d){e.expressTypeList.push({shippingtypeid:d.shippingtype,expressTypeName:d.expressType,imgSrc:d.webimage?b.staticImage+"/b/shippingcost/new/"+d.webimage:!1,originCountry:d.whCountryName,supportTrack:d.supportTrack,deliverytime:d.deliverytime,shippingCost:d.shipcostfinal2,deliverytimeProcessingShipMin:d.deliverytimeProcessingShipMin,deliverytimeProcessingShipMax:d.deliverytimeProcessingShipMax,promiseDays:d.promiseDays})});
return e},setExpress:function(b,c){c=c||!0;this.set({shippingtypeid:b.shippingtypeid},{silent:c,validate:!1,type:"shippingtypeid"});this.set({expressTypeName:b.expressTypeName},{silent:c,validate:!1,type:"expressTypeName"})},setCountry:function(b,c){c=c||!0;this.set({shipToCountry:b.shipToCountry},{silent:c,validate:!1,type:"shipToCountry"});this.set({shipToCountryName:b.shipToCountryName},{silent:c,validate:!1,type:"shipToCountryName"})},setStockIn:function(b,c){c=c||!0;this.set({stockInCountry:b.stockInCountry},
{silent:c,validate:!1,type:"stockInCountry"});this.set({stockInCountryName:b.stockInCountryName},{silent:c,validate:!1,type:"stockInCountryName"})},setTimes:function(b,c){c=c||!0;this.set({deliverytimeProcessingShipMin:b.deliverytimeProcessingShipMin},{silent:c,validate:!1,type:"deliverytimeProcessingShipMin"});this.set({deliverytimeProcessingShipMax:b.deliverytimeProcessingShipMax},{silent:c,validate:!1,type:"deliverytimeProcessingShipMax"});this.set({promiseDays:b.promiseDays},{silent:c,validate:!1,
type:"promiseDays"})},setShippingCost:function(b,c){this.set({shippingCost:b.shippingCost},{silent:c||!0,validate:!1,type:"shippingCost"})}});return c.View.extend({el:"#ShippingCostChoose",events:{"click #listCountry li":"CountryClick","click #chooseShippingMethod ul#chooseLeft li":"shippintTypeClick","click #OKShipping":"OKShipping","click #ShippingCostChooseClose":"cancel","click #supportShippingtype .choose .sortdefault":"sortExpress"},initialize:function(b){this.setOption(b||{});this.model=new f;
this.initElment();this.initEvent()},initElment:function(){this.$expressList=this.$el.find(this.option.expressList);this.$expressListWrap=this.$el.find(this.option.expressListWrap);this.$expressLoading=this.$el.find(this.option.expressLoading);this.$chooseShippingCannot=this.$el.find(this.option.chooseShippingCannot);this.$cannotCountryName=this.$el.find(this.option.cannotCountryName)},initEvent:function(){this.listenTo(this.model,"sync",this.success);this.listenTo(this.model,"error",this.error);this.model.on("Ship:change:shipCountry",
this.CountryClick,this);this.model.on("Ship:change:stockCountry",this.StockInClick,this);this.model.on("Ship:change:fetch",this.request,this)},render:function(){},setOption:function(b){this.option={StockInWrap:"#inventoryLocationShippingSelect",expressListWrap:"#chooseShippingMethod",expressList:"#chooseShippingMethod #chooseLeft",expressLoading:"#ShipLoading",chooseShippingCannot:"#chooseShippingCannot",cannotCountryName:"#cannotCountryName",textCountry:"#textCountry",countryidclass:"#countryidclass"};
this.option=$.extend(!0,{},this.option,b||{})},success:function(b,c,d){200==b.get("code")&&this.changeExpressList(b.get("expressTypeList"),c.countryid,c.inventoryLocationCountryId)},error:function(b,c,d){},changeExpressList:function(b,c,f){var e=['<li class="<% if(isCurr == true){ %>current<% } %>"  vHidden="<%=shippingtypeid%>"><div class="radiowrap"><input name="shippingtypeid" type="radio" vHidden="<%=shippingtypeid%>" <% if(isCurr == true){ %>checked="checked"<% } %>/></div><label for=stRadio<%=i%>><% if (!!imgSrc) { %><img src="<%=imgSrc%>" title="<%=expressTypeName%>" width="30" height="80" /><% }else{%><span title="<%=expressTypeName%>"><%=expressTypeName%></span><% } %></label><div class="origin"><%=originCountry%></div><% if(supportTrack) {%>',
'<div class="state">'+$L("detail_tips_TrackingAvailable")+'<% }else{%><div class="state no-text">'+$L("detail_tips_TrackingUnavailable")+"<% } %>","</div>",'<div class="days"><%=deliverytime%> '+$L("search_tips_days")+" </div>","<% if (shippingCost == 0) { %>",'<div class="freeshipping">'+$L("common_freeShipping")+"</div>",'<% }else{%><div class="tprice">US $<%=shippingCost%></div><% } %><% if (shippingtypeid == "DHLINK_P_Gate") { %>','<div class="epacketnote"><div class="arrowtop">&nbsp;</div><span>'+
$L("detail_msg_DHLinkNoto")+"</span></div>","<% } %></li>"].join(""),g=b.length,l=[],p,r={};if(0==g)this.$el.find(this.option.cannotCountryName).html(this.$el.find("#listCountry li[vHidden="+c+"]").attr("vname")),this.$el.find(this.option.expressListWrap).hide(),this.$el.find(this.option.expressLoading).hide(),this.$el.find(this.option.chooseShippingCannot).show();else{for(var q=0;q<g;q++)b[q].shippingtypeid==this.model.get("shippingtypeid")&&(p=!0);for(q=0;q<g;q++)b[q].i=q,b[q].shippingtypeid==this.model.get("shippingtypeid")||
1==g?(b[q].isCurr=!0,r=b[q],void 0==b[q].supportTrack&&(b[q].supportTrack=!0)):b[q].isCurr=!1,p||0!=q||(b[q].isCurr=!0,r=b[q]),l.push(d(e,b[q]));g?(this.$el.find(this.option.expressList).html(l.join("")),this.$el.find(this.option.expressListWrap).show()):this.$el.find(this.option.expressListWrap).hide();this.$el.find(this.option.expressLoading).hide();this.$el.find(this.option.chooseShippingCannot).hide();this.model.setExpress({shippingtypeid:r.shippingtypeid,expressTypeName:r.expressTypeName});this.model.setStockIn({stockInCountry:f,
stockInCountryName:this.$el.find("#listCountry li[vHidden="+f+"]").attr("vname")});this.model.setCountry({shipToCountry:c,shipToCountryName:this.$el.find("#listCountry li[vHidden="+c+"]").attr("vname")});this.model.setTimes(r);this.model.setShippingCost({shippingCost:r.shippingCost})}},CountryClick:function(b){var c=b.id;b=b.name;this.$el.find(this.option.textCountry).val(b);this.$el.find(this.option.countryidclass).attr("class",c.toLowerCase());this.$el.find(this.option.expressListWrap).hide();this.$el.find(this.option.expressList).html("");
this.$el.find(this.option.expressLoading).show();this.model.setCountry({shipToCountry:c,shipToCountryName:b});this.model.trigger("Ship:change:fetch",{countryid:c,countryName:b,shippingtypeid:this.model.get("shippingtypeid")})},StockInClick:function(b){var c=b.id;b=b.name;this.$el.find("#textInventory").val(b);this.$el.find("#inventoryidclass").attr("class",c.toLowerCase());this.$el.find(this.option.expressListWrap).hide();this.$el.find(this.option.expressList).html("");this.$el.find(this.option.expressLoading).show();
this.model.setStockIn({stockInCountry:c,stockInCountryName:b});this.model.trigger("Ship:change:fetch",{inventoryLocationCountryId:c,stockInCountryName:b,shippingtypeid:this.model.get("shippingtypeid")})},shippintTypeClick:function(b){b=$(b.currentTarget);var c=b.attr("vHidden"),e=this.model.get("expressTypeList"),d={};$.each(e,function(b,e){e.shippingtypeid==c&&(d=e)});b.addClass("current").find("input[type=radio]").attr("checked",!0);b.siblings().removeClass("current").find("input[type=radio]").removeAttr("checked");
this.model.setExpress(d);this.model.setTimes(d);this.model.setShippingCost({shippingCost:d.shippingCost})},sortExpress:function(b){b=$(b.currentTarget);$("#supportShippingtype .choose  li");var c=$("#chooseLeft  > li");if(!(2>c.length)){var e=[],d=b.index()+1,f=b.attr("id");$.each(c,function(b){e[b]=c[b]});b.hasClass("sortasc")?(e.reverse(),b.removeClass("sortasc"),b.addClass("sortdesc")):(e.sort(this.SortStr(d,f)),$(".sortdesc").removeClass("sortdesc"),$(".sortasc").removeClass("sortasc"),b.addClass("sortasc"));
var n=document.createDocumentFragment();$.each(e,function(b){n.appendChild(e[b])});$("#chooseLeft").append(n)}},SortStr:function(b,c){return function(e,d){var f;$(e).find(":nth-child("+b+")").text();var g;$(d).find(":nth-child("+b+")").text();var h,l;if("SortDelivery"==c)return g=$(e).find(":nth-child("+b+")").text().indexOf("-"),l=$(d).find(":nth-child("+b+")").text().indexOf("-"),-1!=g?(f=$(e).find(":nth-child("+b+")").text().substr(g+1),h=$(e).find(":nth-child("+b+")").text().substring(0,g)):(f=
$(e).find(":nth-child("+b+")").text(),h=$(e).find(":nth-child("+b+")").text().substr(g+1)),-1!=l?(g=$(d).find(":nth-child("+b+")").text().substr(l+1),l=$(d).find(":nth-child("+b+")").text().substring(0,l)):(g=$(d).find(":nth-child("+b+")").text(),l=$(d).find(":nth-child("+b+")").text().substr(l+1)),f=parseInt(f),g=parseInt(g),h=parseInt(h),l=parseInt(l),g>f?-1:f>g?1:l>h?-1:h>l?1:0;g=$(e).find(":nth-child("+b+")").text().indexOf("$");l=$(d).find(":nth-child("+b+")").text().indexOf("$");f=-1!=g?$(e).find(":nth-child("+
b+")").text().substr(g+1):0;g=-1!=l?$(d).find(":nth-child("+b+")").text().substr(l+1):0;f=parseFloat(f);g=parseFloat(g);return g>f?-1:f>g?1:0}},OKShipping:function(b){$(b.target);var c=this.model;b=$("#inventoryLocationCountryId").val();c={shipToCountry:c.get("shipToCountry"),shipToCountryName:c.get("shipToCountryName"),stockInCountry:c.get("stockInCountry"),stockInCountryName:c.get("stockInCountryName"),shippingtypeid:c.get("shippingtypeid")||$("#_cur_shippingtypeid").val(),expressTypeName:c.get("expressTypeName"),
deliverytimeProcessingShipMax:c.get("deliverytimeProcessingShipMax"),deliverytimeProcessingShipMin:c.get("deliverytimeProcessingShipMin"),shippingCost:c.get("shippingCost"),promiseDays:c.get("promiseDays")};void 0!=c.deliverytimeProcessingShipMin&&($("#_init_buyer_buyernewprice_not").hide(),c.stockInCountry!=b&&$(".moreorigin li[vHidden="+c.stockInCountry+"]").trigger("click"));DH_sku.model.trigger("SKU:change:country",c);(0==DH_Product_Properties_Color_Object.colorList.length||DH_sku.attrSelecetAll)&&
DH_sku.model.trigger("SKU:change:fetch",{countryid:c.shipToCountry||$("#hiddenCountry").val(),shippingtypeid:c.shippingtypeid||$("#_cur_shippingtypeid").val(),inventoryLocationCountryId:c.stockInCountry||$("#inventoryLocationCountryId").val()||"CN"});this.$el.find(".sortdefault").removeClass("sortdesc sortasc")},request:function(b){b.quantity=$("#quantity").val()||"1";b=$.extend(_.clone(this.model.ajaxOptions.data),b||{});this.model.fetch({data:b})},cancel:function(){this.$el.find(".sortdefault").removeClass("sortdesc sortasc")}})});
define("appDetail/skuInfoModel",["common/config","lib/backbone"],function(b,c){return c.Model.extend({defaults:function(){return{skuAttrInfo:{},skuMd5Info:{}}},initialize:function(b){this.setOption(b);this.ajaxOptions=this.options.ajaxOptions;this.fetch({data:this.ajaxOptions.data})},setOption:function(c){this.options={ajaxOptions:{uri:b.wwwURL+"/product/inventory.do",data:{version:1,client:"pc",itemcode:window._itemcode||"",productid:window._pid||"",isdhporttype:window._dhportType||"",countryid:$("#inventoryLocationCountryId").val()},
type:"GET",dtaType:"json",async:!0,cache:!1,processData:!0}};$.extend(!0,this.options,c||{})},urlRoot:function(){return this.ajaxOptions.uri},sync:function(b,f,e){this.__params=$.extend(!0,{},this.ajaxOptions,e||{});return c.sync.call(this,null,this,$.extend(!0,{},this.ajaxOptions,{url:this.url()},e))},parse:function(b,c){this.ajaxOptions.data=$.extend(!0,{},this.ajaxOptions.data,c.data||{});var e=this.get("code"),d={},f={};b&&(e=200,$.each(b,function(b,c){f[b]={skuId:c.a,skuMd5:c.g,enableSale:c.b,
maxOrder:c.c,minOrder:c.d,stock:c.h,originalStock:c.e,attrName:c.f,buyerMaxOrder:c.h,deliveryTime:c.i};d[c.g]={skuId:c.a,skuMd5:c.g,attrs:b,enableSale:c.b,maxOrder:c.c,minOrder:c.d,stock:c.h,originalStock:c.e,attrName:c.f,buyerMaxOrder:c.h,deliveryTime:c.i}}));return{code:e,skuAttrInfo:f,skuMd5Info:d}}})});
define("appDetail/promotion",["common/config","common/feedback"],function(b,c){return{getPromoCate:function(){DH.request({url:"/activities/promotion/spring-cate.html",type:"get",dataType:"html",cache:!1,success:function(b){0!=b.replace(/(^\s*)|(\s*$)/g,"").length&&(b=$(b),$.browser.msie&&"6.0"==$.browser.version&&!$.support.style?b.css({position:"absolute",top:68}):b.css({position:"fixed",top:68}),$("body").append(b),new c({el:".springBox",$goTop:".q",$survey:".q"}))},error:function(){}})}}});
define("appDetail/viewedAndRecommend",["common/config","lib/backbone","tools/template"],function(b,c,d){b=function(){this.count=this.index=1;this._RecommendID=_catelogID||"";this.seoKeywords=$("#seoKeyWord").val()||"";this.supplierid=$("#supplierid").val()||"";this.itemcode=$("#itemcode").val()||"";this.validLength=""};b.prototype={xhrHttpRw:function(){DH.request({url:"/wholesale/listajax.do",data:{act:"recentviewpro",proNum:"18",imploc:"vhpd"},type:"post",success:function(b){b=JSON.parse(b);var c=
"",d="",f=b.slice(0,9),h=b.slice(9,18),c=c+'<ul class="clearfix j-list" id="rwlist1">';$.each(f,function(b,e){c+="<li>";c+='  <a href="'+e.productUrl+'">';c+='    <img src="'+e.imagePath+'">';c+="  </a>";c+="</li>"});c+="</ul>";d+='<ul class="clearfix j-list" id="rwlist2">';$.each(h,function(b,c){d+="<li>";d+='  <a href="'+c.productUrl+'">';d+='    <img src="'+c.image200Path+'">';d+="  </a>";d+="</li>"});d+="</ul>";$(".viewed-product").show().append(c+d);if(1<Math.ceil(b.length/9)){$(".viewed-product .num-button-g").append('<span class="num-button cur">1</span> <span class="num-button">2</span> ');
var m=setInterval(function(){this.index++;this.index=this.index%2?1:2;$("#rwlist"+this.index).show().siblings("ul").hide();$($(document).find(".num-button")[this.index-1]).addClass("cur").siblings().removeClass("cur")},5E3)}else clearInterval(m),$(".viewed-product .num-button-g").html("&nbsp;")}})},xhrHttpRp:function(){var b=this;DH.request({url:"/wholesale/listajax.do",data:{act:"recommondpro",searchkey:this.seoKeywords,proNum:"24",imploc:"cppd",catalog:this._RecommendID,itemcode:this.itemcode,supplierid:this.supplierid},
type:"post",success:function(c){c=JSON.parse(c);var e="",d="",f="",m="",n=c.slice(0,6),p=c.slice(6,12),r=c.slice(12,18),q=c.slice(18,24);c=Math.ceil(c.length/6);0<q.length&&6>q.length&&(q=[],c--);0<r.length&&6>r.length&&(r=[],c--);0<p.length&&6>p.length&&(p=[],c--);b.validLength=c;1<c&&($("#js-ab-prevButton").before(' <div class="num-button-g"></div>'),c='<span class="num-text">1</span>/'+c,$("#otherItemsAbuy .num-button-g").append(c));e+='<ul class="clearfix j-list" id="rplist1">';$.each(n,function(b,
c){var d=c.itemSold||0,f=c.feedbackPercent||0;e+="<li>";e+='    <div class="common-cp-img">';e+='      <a title="'+c.title+'" href="'+c.productUrl+'"><img src="'+c.image200Path+'" alt="'+c.title+'"></a>';e+="    </div>";e+='    <div class="common-cp-title"><a title="'+c.title+'" href="'+c.productUrl+'">'+c.title+"</a></div>";e+='    <div class="common-cp-price"><strong>US&nbsp;$&nbsp;'+c.price+"/"+c.measure+"</strong></div>";d?e+='    <div class="common-cp-sold"><span>'+$L("detail_tips_sold")+":</span>"+
d+"</div>":f&&(e+='    <div class="common-cp-sold"><span>'+$L("detail_tips_feedback")+":</span>"+f+"</div>");e+="</li>"});e+="</ul>";d+='<ul class="clearfix j-list" id="rplist2">';$.each(p,function(b,c){var e=c.itemSold||0,f=c.feedbackPercent||0;d+="<li>";d+='    <div class="common-cp-img">';d+='      <a title="'+c.title+'" href="'+c.productUrl+'"><img src="'+c.image200Path+'" alt="'+c.title+'"></a>';d+="    </div>";d+='    <div class="common-cp-title"><a title="'+c.title+'" href="'+c.productUrl+
'">'+c.title+"</a></div>";d+='    <div class="common-cp-price"><strong>US&nbsp;$&nbsp;'+c.price+"/"+c.measure+"</strong></div>";e?d+='    <div class="common-cp-sold"><span>'+$L("detail_tips_sold")+":</span>"+e+"</div>":f&&(d+='    <div class="common-cp-sold"><span>'+$L("detail_tips_feedback")+":</span>"+f+"</div>");d+="</li>"});d+="</ul>";f+='<ul class="clearfix j-list" id="rplist3">';$.each(r,function(b,c){var e=c.itemSold||0,d=c.feedbackPercent||0;f+="<li>";f+='    <div class="common-cp-img">';
f+='      <a title="'+c.title+'" href="'+c.productUrl+'"><img src="'+c.image200Path+'" alt="'+c.title+'"></a>';f+="    </div>";f+='    <div class="common-cp-title"><a title="'+c.title+'" href="'+c.productUrl+'">'+c.title+"</a></div>";f+='    <div class="common-cp-price"><strong>US&nbsp;$&nbsp;'+c.price+"/"+c.measure+"</strong></div>";e?f+='    <div class="common-cp-sold"><span>'+$L("detail_tips_sold")+":</span>"+e+"</div>":d&&(f+='    <div class="common-cp-sold"><span>'+$L("detail_tips_feedback")+
":</span>"+d+"</div>");f+="</li>"});f+="</ul>";m+='<ul class="clearfix j-list" id="rplist4">';$.each(q,function(b,c){var e=c.itemSold||0,d=c.feedbackPercent||0;m+="<li>";m+='    <div class="common-cp-img">';m+='      <a title="'+c.title+'" href="'+c.productUrl+'"><img src="'+c.image200Path+'" alt="'+c.title+'"></a>';m+="    </div>";m+='    <div class="common-cp-title"><a title="'+c.title+'" href="'+c.productUrl+'">'+c.title+"</a></div>";m+='    <div class="common-cp-price"><strong>US&nbsp;$&nbsp;'+
c.price+"/"+c.measure+"</strong></div>";e?m+='    <div class="common-cp-sold"><span>'+$L("detail_tips_sold")+":</span>"+e+"</div>":d&&(m+='    <div class="common-cp-sold"><span>'+$L("detail_tips_feedback")+":</span>"+d+"</div>");m+="</li>"});m+="</ul>";$("#otherItemsAbuy").show();$("#js-ab-commonCpBoxWarp").show().append(e+d+f+m)}})},bindEve:function(){var b=this;$(document).delegate(".num-button","click",function(){var b=$(this).text();$("#rwlist"+b).show().siblings("ul").hide();$(this).addClass("cur").siblings().removeClass("cur")});
$("#js-ab-prevButton").click(function(){b.count+=b.validLength;b.count--;b.count%=b.validLength;b.count=b.count?b.count:b.validLength;$("#otherItemsAbuy .num-text").text(b.count);$("#rplist"+b.count).show().siblings("ul").hide()});$("#js-ab-nextButton").click(function(){b.count++;b.count%=b.validLength;b.count=b.count?b.count:b.validLength;$("#otherItemsAbuy .num-text").text(b.count);$("#rplist"+b.count).show().siblings("ul").hide()})}};return b});"use strict";
define("appDetail/sample",["common/config","lib/backbone","tools/jquery.cookie","tools/dhgate.cookie"],function(b,c,d,f){b=function(b){this.defaults={selector:{container:"#sample_form",form:"#sample_form",button:".j-sample-submit",errorCls:".j-error"},api:{uri:"//shoppingcart.dhgate.com/cart/buyerSampleValidate.do",param:null}};this.setOption(b);this.init()};b.prototype={init:function(){this.container=$(this.option.selector.container);this.form=$(this.option.selector.form);this.$error=$('<div class="j-error" style="display:none;color:red;text-align: right;margin: 0 50px 10px 0;"></div>');
$(".samples-wrap",this.container).prepend(this.$error);0<this.container.length&&this.initEvents()},setOption:function(b){this.option=$.extend({},this.defaults,b)},initEvents:function(){var b=this;$(this.option.selector.button,this.container).bind("click",function(){b.verification()})},verification:function(){if(!this._getSampling){var b=this,c=this.form[0];param={buyerId:$.cookie("b2b_buyerid"),supplierId:c.supplierId.value,itemcode:c.itemcode.value,skuId:c.skuId.value,skuMd5:c.skuMd5.value};api=
this.option.api;this._getSampling=!0;$.ajax({url:api.uri,data:param,dataType:"jsonp",timeout:1E4,success:function(c){0==c.ret?b.submit():2==c.ret?(c=encodeURIComponent(location.href),location.href="https://secure.dhgate.com/usr/signin.do?returnURL="+c):(c=1==c.ret?$L("detail_tips_sample_once"):$L("detail_tips_sample_error"),b.$error.html(c).show());b._getSampling=!1},error:function(){b._getSampling=!1}})}},submit:function(){this.form.submit()}};return b});
define("appDetail/bonusCoupon",[],function(){return function(b){function c(){if($.cookie("b2b_b_t_v2"))$.ajax({url:"//dg.dhgate.com/myaccount/coupon/seller_coupon.do",type:"GET",data:{couponCode:g},dataType:"jsonp",success:function(b){200==b.code?($(".mask").show(),$("#bcouppopbox").empty().append(h({couponData:b})).show(),d(),f()):201==b.code?window.open("https://www.dhgate.com/activities/promotion/bonuscoupon.html"):($(".mask").show(),$("#bcouppopbox-faile").empty().append(m({couponData:b})).show(),
d(),f())},error:function(b){window.console&&console.log("\u8bf7\u6c42\u5931\u8d25")}});else{var b=location.href,b=b.replace(/\#.*/ig,"").replace(/\?getcoupon=.*/ig,"").replace(/getcoupon=.*/ig,""),b=b+(-1!=b.indexOf?"?":"&")+"Bcoupcode="+g;location.href="https://secure.dhgate.com/usr/signin.do?returnURL="+encodeURIComponent(b)}}function d(){var b=$("#bcouppopbox"),c=$("#bcouppopbox-faile"),e=$(window).width(),d=$(window).height();b.css({left:(e-630)/2,top:(d-218)/2});c.css({left:(e-482)/2,top:(d-
101)/2})}function f(){$(".js-couponLayer-close").click(function(){$(".mask").hide();$("#bcouppopbox-faile").hide();$("#bcouppopbox").hide()})}function e(b){b=new RegExp("(^|&)"+b+"=([^&]*)(&|$)","i");b=window.location.search.substr(1).match(b);return null!=b?unescape(b[2]):null}var g;b={coupontype:11,hourcycle:0,supplierid:$("#supplierid").val()};var l=_.template('<div class="coup-infro coup-infor-bonus bubblingbtn" ><a href="javascript:;" id="getnow" couponcode="<%=couponData.couponCode%>"> Get a US <strong>$<%=couponData.couponAmount%></strong> Coupon </a><span class="line">|</span><a class="viewmore" target="_blank" href="https://www.dhgate.com/activities/promotion/bonuscoupon.html">View More</a></div>'),
h=_.template('<div class="newpopcon-bt alignc"><span class="icon-bigcorrect"></span>Congratulations!</div><p class="alignc">You just received a <b class="orange"> FREE US $<%=couponData.couponAmount%></b> coupon! The coupon Expires: <span class="endtime"> <%=couponData.expireDateFormat%></span></p><div class="coupop-btn alignc"><input type="button" value="Use Coupon Now" class="n-yellow-button js-couponLayer-close" /><a href="//dg.dhgate.com/myaccount/coupon/coupon.do#mydh-summ-cou" class="n-grey-button">View My Coupon</a></div><span class="icon-bclose js-couponLayer-close"></span>'),
m=_.template('<h4 class="vip-dialog-tit">Bonus Coupon</h4><div class="vip-dialog-con"><span class="couopn-dialog-tit orange-text"><b class="icon-big-warning"></b><%=couponData.msg%></span></div><span class="icon-bclose js-couponLayer-close"></span>');$.ajax({url:"//dg.dhgate.com/myaccount/coupon/coupon_list_new.do",type:"GET",data:b,dataType:"jsonp",success:function(b){0==b.status?b.data&&0<b.data.length&&($("#coup-infor-bonus").empty().append(l({couponData:b.data[0]})),g=$("#getnow").attr("couponcode"),
$("#getnow").click(function(){c()}),e("Bcoupcode")&&c()):alert(b.msg)},error:function(b){window.console&&console.log("\u8bf7\u6c42\u5931\u8d25")}})}});
define("appDetail/tpl/fullReductionTpl",["common/config","common/langLoader"],function(b,c){return{content:['<div class="cross-off bubblingbtn">','<a href="javascript:;"><%=$L("full_tag_discounts")%></a>','<div class="newpopcon   cross-pop" style="display: none;"> ',"<ul>","<% _.each(list,function(m,n){ %>",'<li><span><%=$L("full_spend",{pricefull:m.full})%></span>, <%=$L("full_get",{priceoff:m.reduction})%></li>',"<%});%>","</ul>",'<div class="viewmore"><a target="_blank" href="'+b.hostRead+'/activities/promotion/fullreduction.html#pdtomultidiscount"><%=$L("full_viewmore")%></a></div>',
"</div>","</div>"]}});
define("appDetail/fullReduction",["common/config","lib/backbone","tools/template","common/tools/request","appDetail/tpl/fullReductionTpl"],function(b,c,d,f,e){return{getFullReturn:function(){var c={itemcode:$("#itemcode").val(),supplierid:$("#supplierid").val()};f.request({url:b.hostRead+"/product/man_fan_list.do",timeout:1E4,data:c,dataType:"jsonp",success:function(b){b.data&&b.data.fullReductionList&&0<b.data.fullReductionList.length&&($("#storepromotion").prepend(d(e.content.join(""),{list:b.data.fullReductionList})),
$("#storepromotion").parent().next(".store-pro").show())},error:function(){}})}}});
define("common/right-nav",["common/config","tools/template"],function(b,c){return function(d){function f(c){$.ajax({type:"GET",url:b.wwwURL+"/activities/promotion/right-nav-data-"+b.countryCur+".html",context:window,async:!0,cache:!1,dataType:"text",timeout:8E3,success:c,error:function(){}})}function e(b){var c=b.getTimezoneOffset()/60,e=b.getTime();b.setTime(e+36E5*(-8-c));return b}(function(){for(var b=navigator.userAgent,c="Android;iPhone;SymbianOS;Windows Phone;iPad;iPod".split(";"),e=!0,d=0;d<
c.length;d++)if(0<b.indexOf(c[d])){e=!1;break}return e})()&&$.ajax({async:!1,type:"GET",dataType:"jsonp",url:"//www.dhgate.com/common/buyertime.do",data:"",timeout:3E3,success:function(d){var g=new Date(parseInt(d.time));f(function(d){$("body").append(d);d=e(lp_right_nav_data.startTime);var f=e(lp_right_nav_data.endTime);g<d||g>f||f==d||(f=lp_right_nav_data.data)&&0<f.length&&(d=c("<%var data=list;%><%for(var i=0;i<data.length;i++){%><% if (i==0){%><li class=\"nav-first nav-icon0\"><a href=\"<%=data[i].link%>\" ><i></i></a></li><%}else{%><li class=\"nav-icon<%=data[i].cateid%>\"> <%if (data[i].lpid==1){%><a href=\"<%=data[i].link%>#lp_activityid-navi-<%=data[i].activityid%>\"onclick=\"gtag('event', 'NLP', {'event_category': '2017 Autumn','event_label': 'rban<%=i%>'});\"><i ></i><div class=\"f-box\"> <div class=\"qrcode\"></div><strong class=\"arr\">\u25c6</strong></div></a><%}else{%><a href=\"<%=data[i].link%>#lp_activityid-navi-<%=data[i].activityid%>\" onclick=\"gtag('event', 'NLP', {'event_category': '2017 Autumn','event_label': 'rban<%=i%>'});\"><i ></i><span><%=data[i].name%></span></a><%}%></li> <%}%><%}%> ",
{list:f,pageLang:b.countryCur}),f=f[0].lpid||"",$("body").append(c('<ul class="fixed-right-nav <%=newcss%>"><%=list%></ul>',{list:d,newcss:f})),$(".topLayer").remove())})}})}});
define("appDetail/CPS-share",["common/config","tools/clipBoard","common/tools/request"],function(b,c,d){b=function(b){this.options={api:{urlLink:"//www.dhgate.com/product/api/shareAddr.json"},shareLink:"",shareContainer:".shareopen"};this.setOptions(b);this.event=this.constructor.event=$({});this.init()};b.prototype={constructor:b,init:function(){this.api=this.options.api;this.shareLink=this.options.shareLink;this.$shareContainer=$(this.options.shareContainer);this.initEvent();this.popPosition();
this.closePop();this.btnclosePop();this.openShare();this.closeShare()},setOptions:function(b){this.options=$.extend(!0,this.options,b||{})},initEvent:function(b){},request:function(b,c,g){var e=this;b=window.location.href;c=$("#canonicalUrl").attr("href");void 0==c?0<b.indexOf("#")&&(b=b.substring(0,b.indexOf("#"))):b=c;var f=b;c={itemcode:$("#itemcode").val(),channel:"ot"};d.request({url:"//www.dhgate.com/product/api/shareAddr.json",type:"GET",data:c,dataType:"json",timeout:1E4,success:function(b){b.result&&
(e.shareLink=f+"?shareToken="+b.result.ot)},error:function(){window.console&&console.log("\u8bf7\u6c42\u5931\u8d25")}})},popPosition:function(){var b=$(".mask-pop"),c=$(window).width(),d=$(window).height(),l=b.height();b.css({left:(c-390)/2,top:(d-l)/2});$(".CPS-mask").show();b.show()},closePop:function(){$(".close-icon").click(function(){$(".CPS-mask").hide();$(".mask-pop").hide();$(".CPS-tip").show();$(".close-icon").unbind()})},btnclosePop:function(){$(".close-btn").click(function(){$(".CPS-mask").hide();
$(".mask-pop").hide();$(".CPS-tip").show();$(".close-btn").unbind()})},openShare:function(){$(".CPS-share").on("click",function(){$(".shareopen").show()})},closeShare:function(){$(".shareopen .close").on("click",function(){$(".shareopen").hide()})},shareCopy:function(){var b=this;if($("#CPScopy").length){var e=new c({beforeCopy:function(){},afterCopy:function(){$(".shareopen").append('<div class="copy-success">Copy Success !</div>');setTimeout(function(){$(".copy-success").remove()},2E3)}});document.getElementById("CPScopy").onclick=
function(){e.copyd(b.shareLink)}}}};return b});
requirejs.config({baseUrl:"//js.dhresource.com/multi/src/",urlArgs:"33333333333",paths:{lib:"common/base",tools:"common/tools",ui:"common/ui",tpl:"common/tpl",appDetail:"detail/v1",header:"common/header",lang:"common/lang",favorite:"common/favorite",autocomplete:"common/widget/autocomplete"},shim:{"lib/backbone":{deps:["lib/underscore","lib/jquery"],exports:"Backbone"},"lib/underscore":{exports:"_"},"lib/jquery":{exports:"$"},"tools/jquery.cookie":{deps:["lib/jquery"],exports:"$cookie"},autocomplete:["jquery"]}});
requirejs(["appDetail/newmain"]);
define("appDetail/newmain","common/config tools/jquery.cookie tools/dhgate.cookie tools/ntalkerim tools/clipBoard common/langLoader common/feedback common/share/webLinkShare common/share/CPSwebLinkShare common/recommends/recommends common/recommends/youviewed favorite/favorites tools/countdown appDetail/skuChoose appDetail/shippingCost appDetail/customMade appDetail/common/wholesalePrice appDetail/groupPurchase appDetail/shippingModel appDetail/common/sizetemplate appDetail/common/d1-tracking appDetail/common/adclickcharging appDetail/common/dispatchPledge appDetail/promotion appDetail/viewedAndRecommend appDetail/sample appDetail/bonusCoupon appDetail/fullReduction common/right-nav appDetail/CPS-share".split(" "),function(b,
c,d,f,e,g,l,h,m,n,p,r,q,v,t,u,x,y,A,w,z,C,K,L,M,N,O,P,V,I){new q({panle:"#J_BPromoTime"});C.trackmsg(C.getQueryString("admsg"));z&&z.execDetailTrack("pd");(function(){if(0<_buyAttrListSize){0<_buyAttrCustomListSize&&(DH_Product_Properties_Color_Object.colorList.push("customSize"),DH_Product_Properties_Color_Object.colorListHiddenInput.push("hiddenBuycustomSize"));for(var b=1;b<=_buyAttrListSize;b++)DH_Product_Properties_Color_Object.colorList.push("listBuy_"+b),DH_Product_Properties_Color_Object.colorListHiddenInput.push("hiddenBuy_"+
b);for(b=0;b<DH_Product_Properties_Color_Object.colorList.length;b++)document.getElementById(DH_Product_Properties_Color_Object.colorList[b])||(DH_Product_Properties_Color_Object.colorList.splice(b,1),DH_Product_Properties_Color_Object.colorListHiddenInput.splice(b,1))}})();g.get(function(){$(".security-services").find("li").length&&$(".security-services").parent(".key-info-line").show();new l({el:".topLayer",$goTop:".layerTop"});DH_sku=new v(DH_Product_Properties_Color_Object);DH_SHIP=new A;__ws=
new x;new t;new u(DH_Product_Properties_Color_Object);"soldout"!==$("#soldout").attr("class")&&$(".js-groupPurchase").length&&y.init();(function(){if($("#bimgContainer").length){var b=$("#bimgDetails"),c=$("#firstBImage"),e=$("#simgList").find("li:eq(0)").attr("b-init"),d=$("#listBuy_1").find("li.color-selected").attr("data-bimg"),e=d?d:e,f=new Image,g,h;f.onload=function(){firstBImageWidth=this.width;firstBImageHeight=this.height;0<firstBImageWidth&&0<firstBImageHeight&&(1<=firstBImageWidth/firstBImageHeight?
358<firstBImageWidth?(g=358,h=358*firstBImageHeight/firstBImageWidth):(g=firstBImageWidth,h=firstBImageHeight):358<firstBImageHeight?(h=358,g=358*firstBImageWidth/firstBImageHeight):(g=firstBImageWidth,h=firstBImageHeight));c.html('<span><img width="'+g+'" height="'+h+'" src="'+f.src+'"></span>'+($("#J_vidoeplay").length?c.html():""));b.html('<iframe></iframe><img src="'+f.src+'" index="0">');f=new Image;window.firstBImageReady=!0};f.src=e}})();(function F(){F.firstBImageTime&&clearTimeout(F.firstBImageTime);
window.firstBImageReady?new maskMagnifier({simgWidth:42,simgHeigth:42,bimgWidth:358,bimgHeight:358,eventType:"hover"}):F.firstBImageTime=setTimeout(F,50)})();new selectUnitPriceCountry;var c=new cTab;"300001"==$("#ctab-productReviews").attr("data-state")&&c.LoadProductReviews();new loadTransactionHistory;new loadTransactionFeedback;new loadProductReviews;new EmbedFeedBackLoad;new favoriteItemsPopup;stockIn();new interpret({openId:["delQaIcon"],closeId:["delQaClose"],contentId:["delQa"]});new IcoHoverOut;
$(".scrollLoading").scrollLoading();$(".save-more-wrap").hover(function(){$(".key-info").addClass("zIndex7");$(".save-more-pop").show()},function(){$(".key-info").removeClass("zIndex7");$(".save-more-pop").hide()});0<$("span[discountCountDown]").length&&salesPromotionCountDown("span","discountCountDown");getStProdFun();DH.request({url:"/dhrec/user_visit.action",type:"get",data:{pagetype:8,itemcode:_itemcode,catalog:_catelogID,vid:DHCookieUtil.getcookie("vid"),BuyerID:DHCookieUtil.getcookie("b2b_buyerid")},
dataType:"json",cache:!1,success:function(b){}});new DH.Store.StoreCoupon({container:"#js-container-coupon",cList:".js-list-coupon",cBtn:".js-list-getStoreCoupon",disabledCls:"disabled",curNum:".js-num",ajax:{params:{pt:$("#js-container-coupon").attr("pt")||"0"}},supplierid:$("#supplierid").val()||""});new DH.Detail.toolbar({container:"#ctabBox",goUp:".buyitnow",top:$("#productdisplayForm").offset().top});new DH.Detail.shortcut({container:".ctab-warp",wrap:"#ctabBox",reference:null,direction:"top",
className:"tab-toolbar"});(function(){var b=[];$.each(DH_Product_Properties_Color_Object.colorList,function(c,e){b.push("#"+e+"> li")});new DH.Detail.attributeLinkage({list:b.join(",")})})();(function(){var b=$(".j-onlinechat"),c=b.attr("data-systemid");c&&""!=c?(b.addClass("onlinechat"),f.init({sellerid:NTKF_PARAM.sellerid,settingid:NTKF_PARAM.settingid,productid:_pid||"",itemcode:_itemcode||"",supplierid:_toid||"",uid:DHCookieUtil.getcookie("b2b_buyerid"),uname:DHCookieUtil.getcookie("buyerusername"),
pageType:102}),b.show()):DH.request({url:"/product/getonlinestatus.do",type:"GET",data:{supplierid:_toid||""},dataType:"json",cache:!1,success:function(c){if(1!=c.isonline){if(1!=c.status)return b.remove(),!1;b.addClass("offlinechat")}f.init({sellerid:NTKF_PARAM.sellerid,settingid:NTKF_PARAM.settingid,productid:_pid||"",itemcode:_itemcode||"",supplierid:_toid||"",uid:DHCookieUtil.getcookie("b2b_buyerid"),uname:DHCookieUtil.getcookie("buyerusername"),pageType:102});b.show()},error:function(){b.remove()}})})();
(function(){$(".msgtoseller").click(function(){document.messagepost.submit()})})();pageviewevent();initStLiClick();initbuyStLiClick();initDetailedSellerRatings();initCloseSellerinfoRatingspop();ResetValue();inputTextTips();toggleCategories();$(".related-words").length&&(c=$(".related-words").clone(),$(".related-words").remove(),$("#relateWord").append(c),$("#relateWord").find(".related-words").show());$(".de-tips").length&&(c=$(".de-tips").clone(),$(".de-tips").remove(),$("#deTips").append(c),$("#deTips").find(".de-tips").show());
sameViewedProd&&0<$("#otherItemsWarp").length&&new sameViewedProd;new loadScroll({container:"CorssPromotion1",nextButton:"js-corss-next",backButton:"js-corss-pre",commonCpBoxWarp:"js-corss-warp",commonCpBox:"js-corss-box",commonCpList:"js-corss-box > li",itemWidth:193,pageNum:"js-corss-pageNum",pageTotal:"js-corss-pageTotal",showFirst:"js-corss-showFirst"});$("#CorssPromotion1 .qa-warp").hover(function(){$(this).children("div").show()},function(){$(this).children("div").hide()});new countDownInterface;
new addToCartProduct;new w;new K;new r;try{var e=function(b){b.price=b.lowprice==b.highprice?b.lowprice:b.lowprice+" - "+b.highprice;b.soldFeedback=0!=b.sold?'<div class="common-cp-feedback">Sold: <strong>'+b.sold+"</strong></div>":0!=b.feedback?'<div class="common-cp-feedback"><strong>'+b.feedback+"</strong> %  Positive feedback</div>":"";b.PPCsoldFeedback=b.recentlysold?'<div class="common-cp-feedback">Sold: <strong>'+b.recentlysold+"</strong></div>":"";return b},c=function(b,c,d){DH.request({url:d,
type:"get",data:b,dataType:"json",cache:!1,success:function(b){if(b.result&&0<b.result.length){var d=new n({cycle:1,per:6,total:24,el:{box:c},listClass:".listBox",tpl:{item:C,page:H},formatData:function(b){return e(b)},param:{pagetype:8,keywords:""}});d.setData(b.result);d.page(1);c.show()}},error:function(){c.hide()}})},d=$("#js-recommend-recently"),g=$("#js-recommend-viewed"),h=$("#js-recommend-channel"),m=_catelogID.substr(0,6),q=_catelogID,z=$("#seoKeyWord").val(),C='<li><div class="common-cp-img"><a href="${link}"><img src="${imgSrc}" title="${title}"></a></div><div class="common-cp-title"><a href="${link}">${title}</a></div><div class="common-cp-price"><strong>${currency}${price}</strong> / ${unit}</div>${soldFeedback}</li>',
H='<span class="currentpage">${page}</span>/${total}',B=b.getVisitorType();0==B.keywords.length&&delete B.keywords;if(0<d.length){var I=$.extend({page:1,pagesize:48,productnum:48,pagetype:8,keywords:z||"",tnslevel:"PPC"==B._f?0:""},B);DH.request({url:"/dhrec/recommend_for_recentview_featured.action",type:"get",data:I,dataType:"json",cache:!1,success:function(b){if(b.result&&0!=b.result.length){var c=new n({cycle:1,per:6,total:48,el:{box:"#js-recommend-recently"},listClass:".listBox",tpl:{item:C,page:H},
formatData:function(b){return e(b)},param:{pagetype:8,keywords:""}});c.setData(b.result);c.page(1)}else d.find(".common-cp").hide()},error:function(){d.find(".common-cp").hide()}});p&&($("#j-youViewed").hide(),p.tpl='<div class="youview-img"><a href="${link}" ><img src="${imgSrc}" alt="${title}"></a></div>',p.el={box:$("#j-youViewed"),list:$("#j-youViewed .j-viewedList")},p.init({pagetype:8}));d.show()}if(0<g.length){var Q=$.extend({page:1,pagesize:24,productnum:24,pagetype:8,itemcode:_itemcode||
"",catalog:q,pos:"cppd2",keywords:z||"",tnslevel:"PPC"==B.f?0:""},B);c(Q,g,"/dhrec/recommend_for_product_details.action")}if(0<h.length&&0<DH.getVisitorType().f.length){var R=$.extend({page:1,pagesize:24,productnum:24,pagetype:8,itemcode:_itemcode||"",catalog:q,keywords:z||"",tnslevel:"PPC"==B.f?0:""},B);c(R,h,"/dhrec/recommend_for_seo_ppc.action")}if(-1==_.indexOf(["en","au","ca","in","uk"],DH.lang)){var J=new M;J.xhrHttpRw();J.xhrHttpRp();J.bindEve()}var G=$("#js-recommend-mayLike"),D=$("#js-recommend-bought"),
E=$("#js-recommend-interest"),S=$("#recommendType").val(),T=$("#supplierid").val();if(0<G.length){var U=$.extend({page:1,pagesize:54,productnum:54,logic:S,supplierid:T,pos:"cppd3",catalog1:q,catalog2:m,itemcode:_itemcode||"",keywords:z||"",tnslevel:"PPC"==B._f?0:""},B);DH.request({url:"//www.dhgate.com/as/prodapi.do",type:"get",data:U,dataType:"jsonp",cache:!1,success:function(b){if(b.prods&&0!=b.prods.length){for(var c=[],d=0;12>d;d++)c.push(b.prods[d]);d=new n({cycle:1,per:4,total:12,el:{box:"#js-recommend-mayLike"},
listClass:".j-list",tpl:{item:'<dl class="clearfix"><dt><a href="${productDetailUrl}" title="${productname}" itemcode="${itemcode}" msg="${msg}"><img src="${imgurl}" title="${productname}"></a></dt><dd><a href="${productDetailUrl}" title="${productname}" itemcode="${itemcode}" msg="${msg}">${productname}</a><p><strong>US $${lowPrice} - ${highPrice}</strong></p><p> / ${measure}</p></dd></dl>',page:'<span class="text-current">${page}</span>/<span>${total}</span>'},formatData:function(b){return e(b)},
onSucc:function(){$(this.el.box).unbind("mouseenter").unbind("mouseleave")},param:{pagetype:8,keywords:""}});d.setData(c);d.page(1);G.show();G.delegate("a","click",function(b){b=$(b.currentTarget);var c=b.attr("msg");0!=b.length&&c&&$.ajax({url:"//seller.dhgate.com/premium/outsidefee/settle.do?",data:{msg:c},type:"get",dataType:"jsonp",success:function(b){}})});if(0<D.length){if(!b.prods||12>=b.prods.length){D.hide();return}c=[];for(d=12;36>d;d++)c.push(b.prods[d]);d=new n({cycle:1,per:6,total:24,
el:{box:"#js-recommend-bought"},listClass:".listBox",tpl:{item:'<li><div class="common-cp-img"><a href="${productDetailUrl}" itemcode="${itemcode}" msg="${msg}"><img src="${imgurl}" title="${productname}"></a></div><div class="common-cp-title"><a href="${productDetailUrl}" itemcode="${itemcode}" msg="${msg}">${productname}</a></div><div class="common-cp-price"><strong>US $${lowPrice} - ${highPrice}</strong> / ${measure}</div>${PPCsoldFeedback}</li>',page:H},formatData:function(b){return e(b)},param:{pagetype:8,
keywords:""}});d.setData(c);d.page(1);D.show();D.delegate("a","click",function(b){b=$(b.currentTarget);var c=b.attr("msg");0!=b.length&&c&&$.ajax({url:"//seller.dhgate.com/premium/outsidefee/settle.do?",data:{msg:c},type:"get",dataType:"jsonp",success:function(b){}})})}if(0<E.length)if(!b.prods||36>=b.prods.length)E.hide();else{c=[];for(d=36;d<b.prods.length;d++)c.push(b.prods[d]);b=new n({cycle:1,per:6,total:18,el:{box:"#js-recommend-interest"},listClass:".listBox",tpl:{item:'<li><div class="common-cp-img"><a href="${productDetailUrl}" itemcode="${itemcode}" msg="${msg}"><img src="${imgurl}" title="${productname}"></a></div><div class="common-cp-title"><a href="${productDetailUrl}" itemcode="${itemcode}" msg="${msg}">${productname}</a></div><div class="common-cp-price"><strong>US $${lowPrice} - ${highPrice}</strong> / ${measure}</div>${PPCsoldFeedback}</li>',
page:H},formatData:function(b){return e(b)},param:{pagetype:8,keywords:""}});b.setData(c);b.page(1);E.show();E.delegate("a","click",function(b){b=$(b.currentTarget);var c=b.attr("msg");0!=b.length&&c&&$.ajax({url:"//seller.dhgate.com/premium/outsidefee/settle.do?",data:{msg:c},type:"get",dataType:"jsonp",success:function(b){}})})}}else G.hide(),D.hide(),E.hide()},error:function(b){G.hide();D.hide();E.hide();window.console&&console.log(b)}})}}catch(F){}"en"==b.countryCur&&L.getPromoCate();0<$("#sample_form").length&&
new N;"en"==b.countryCur&&new O;P.getFullReturn()});(function(){var b=function(){1280>window.screen.width||1259>$(window).width()?$(".col-left-inner").addClass("lowscreen"):$(".col-left-inner").removeClass("lowscreen");(1418>window.screen.width||1418>$(window).width())&&$("#unitPriceCountryContent").css({left:"auto",right:"-3px"})};b();$(window).resize(function(){b()})})();new I});
